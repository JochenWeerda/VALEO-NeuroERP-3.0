
> @valero-neuroerp/frontend-web@0.1.0 lint C:\Users\Jochen\VALEO-NeuroERP-3.0\packages\frontend-web
> eslint . --ext ts,tsx --report-unused-disable-directives --max-warnings 0 "--format" "json"

[{"filePath":"C:\\Users\\Jochen\\VALEO-NeuroERP-3.0\\packages\\frontend-web\\src\\App.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\Jochen\\VALEO-NeuroERP-3.0\\packages\\frontend-web\\src\\components\\GlobalStatusIndicator.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\Jochen\\VALEO-NeuroERP-3.0\\packages\\frontend-web\\src\\components\\admin\\AuditTrailPanel.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Table' is defined but never used. Allowed unused vars must match /^_/u.","line":4,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":4,"endColumn":15},{"ruleId":"no-unused-vars","severity":1,"message":"'Table' is defined but never used. Allowed unused vars must match /^_/u.","line":4,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":4,"endColumn":15},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":21,"column":16,"nodeType":"FunctionDeclaration","messageId":"missingReturnType","endLine":21,"endColumn":40},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":21,"column":16,"nodeType":"FunctionDeclaration","messageId":"missingReturnType","endLine":21,"endColumn":40},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":30,"column":3,"nodeType":"FunctionDeclaration","messageId":"missingReturnType","endLine":30,"endColumn":27},{"ruleId":"@typescript-eslint/strict-boolean-expressions","severity":1,"message":"Unexpected any value in conditional. An explicit comparison or type cast is required.","line":36,"column":11,"nodeType":"MemberExpression","messageId":"conditionErrorAny","endLine":36,"endColumn":18,"suggestions":[{"messageId":"conditionFixCastBoolean","fix":{"range":[992,999],"text":"Boolean(data.ok)"},"desc":"Explicitly cast value to a boolean (`Boolean(value)`)"}]},{"ruleId":"@typescript-eslint/strict-boolean-expressions","severity":1,"message":"Unexpected any value in conditional. An explicit comparison or type cast is required.","line":37,"column":20,"nodeType":"MemberExpression","messageId":"conditionErrorAny","endLine":37,"endColumn":30,"suggestions":[{"messageId":"conditionFixCastBoolean","fix":{"range":[1023,1033],"text":"(Boolean(data.items))"},"desc":"Explicitly cast value to a boolean (`Boolean(value)`)"}]},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":50,"column":40,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":50,"endColumn":42},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":61,"column":43,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":61,"endColumn":45},{"ruleId":"@typescript-eslint/strict-boolean-expressions","severity":1,"message":"Unexpected nullable string value in conditional. Please handle the nullish/empty cases explicitly.","line":142,"column":18,"nodeType":"MemberExpression","messageId":"conditionErrorNullableString","endLine":142,"endColumn":28,"suggestions":[{"messageId":"conditionFixCompareNullish","fix":{"range":[4101,4111],"text":"(entry.user != null)"},"desc":"Change condition to check for null/undefined (`value != null`)"},{"messageId":"conditionFixDefaultEmptyString","fix":{"range":[4101,4111],"text":"(entry.user ?? \"\")"},"desc":"Explicitly treat nullish value the same as an empty string (`value ?? \"\"`)"},{"messageId":"conditionFixCastBoolean","fix":{"range":[4101,4111],"text":"(Boolean(entry.user))"},"desc":"Explicitly cast value to a boolean (`Boolean(value)`)"}]},{"ruleId":"@typescript-eslint/strict-boolean-expressions","severity":1,"message":"Unexpected nullable string value in conditional. Please handle the nullish/empty cases explicitly.","line":150,"column":16,"nodeType":"MemberExpression","messageId":"conditionErrorNullableString","endLine":150,"endColumn":28,"suggestions":[{"messageId":"conditionFixCompareNullish","fix":{"range":[4372,4384],"text":"(entry.reason != null)"},"desc":"Change condition to check for null/undefined (`value != null`)"},{"messageId":"conditionFixDefaultEmptyString","fix":{"range":[4372,4384],"text":"(entry.reason ?? \"\")"},"desc":"Explicitly treat nullish value the same as an empty string (`value ?? \"\"`)"},{"messageId":"conditionFixCastBoolean","fix":{"range":[4372,4384],"text":"(Boolean(entry.reason))"},"desc":"Explicitly cast value to a boolean (`Boolean(value)`)"}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":11,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useEffect, useState } from 'react'\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card'\r\nimport { Badge } from '@/components/ui/badge'\r\nimport { Table } from '@/components/ui/table'\r\nimport { useToast } from '@/hooks/use-toast'\r\n\r\ninterface AuditEntry {\r\n  ts: number\r\n  from: string\r\n  to: string\r\n  action: string\r\n  user?: string\r\n  reason?: string\r\n}\r\n\r\ninterface AuditTrailPanelProps {\r\n  domain: 'sales' | 'purchase'\r\n  number: string\r\n}\r\n\r\nexport default function AuditTrailPanel({ domain, number }: AuditTrailPanelProps) {\r\n  const { toast } = useToast()\r\n  const [entries, setEntries] = useState<AuditEntry[]>([])\r\n  const [loading, setLoading] = useState(true)\r\n\r\n  useEffect(() => {\r\n    loadAudit()\r\n  }, [domain, number])\r\n\r\n  async function loadAudit() {\r\n    try {\r\n      setLoading(true)\r\n      const response = await fetch(`/api/workflow/${domain}/${number}/audit`)\r\n      const data = await response.json()\r\n\r\n      if (data.ok) {\r\n        setEntries(data.items || [])\r\n      }\r\n    } catch (e) {\r\n      toast({\r\n        title: 'Fehler beim Laden',\r\n        description: e instanceof Error ? e.message : 'Unbekannter Fehler',\r\n        variant: 'destructive',\r\n      })\r\n    } finally {\r\n      setLoading(false)\r\n    }\r\n  }\r\n\r\n  const formatTimestamp = (ts: number) => {\r\n    return new Date(ts * 1000).toLocaleString('de-DE', {\r\n      year: 'numeric',\r\n      month: '2-digit',\r\n      day: '2-digit',\r\n      hour: '2-digit',\r\n      minute: '2-digit',\r\n      second: '2-digit',\r\n    })\r\n  }\r\n\r\n  const getActionBadge = (action: string) => {\r\n    const variants: Record<string, 'default' | 'secondary' | 'destructive'> = {\r\n      submit: 'secondary',\r\n      approve: 'default',\r\n      reject: 'destructive',\r\n      post: 'default',\r\n    }\r\n    return (\r\n      <Badge variant={variants[action] || 'outline'}>\r\n        {action.toUpperCase()}\r\n      </Badge>\r\n    )\r\n  }\r\n\r\n  if (loading) {\r\n    return (\r\n      <Card>\r\n        <CardContent className=\"pt-6\">\r\n          <p className=\"text-center text-muted-foreground\">L├ñdt Audit-Trail...</p>\r\n        </CardContent>\r\n      </Card>\r\n    )\r\n  }\r\n\r\n  if (entries.length === 0) {\r\n    return (\r\n      <Card>\r\n        <CardHeader>\r\n          <CardTitle>Audit-Trail</CardTitle>\r\n          <CardDescription>Verlauf aller Workflow-├änderungen</CardDescription>\r\n        </CardHeader>\r\n        <CardContent>\r\n          <p className=\"text-center text-muted-foreground py-8\">\r\n            Noch keine Workflow-Aktionen\r\n          </p>\r\n        </CardContent>\r\n      </Card>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <Card>\r\n      <CardHeader>\r\n        <CardTitle>Audit-Trail</CardTitle>\r\n        <CardDescription>\r\n          Verlauf aller Workflow-├änderungen ({entries.length} Eintr├ñge)\r\n        </CardDescription>\r\n      </CardHeader>\r\n\r\n      <CardContent>\r\n        <div className=\"space-y-4\">\r\n          {entries.map((entry, idx) => (\r\n            <div\r\n              key={idx}\r\n              className=\"flex items-center gap-4 p-3 bg-gray-50 rounded-lg border\"\r\n              data-testid=\"audit-entry\"\r\n            >\r\n              <div className=\"flex-1 grid grid-cols-2 md:grid-cols-4 gap-4\">\r\n                <div>\r\n                  <p className=\"text-xs font-medium text-gray-500\">Zeitpunkt</p>\r\n                  <p className=\"text-sm\">{formatTimestamp(entry.ts)}</p>\r\n                </div>\r\n\r\n                <div>\r\n                  <p className=\"text-xs font-medium text-gray-500\">Aktion</p>\r\n                  <div className=\"mt-1\">{getActionBadge(entry.action)}</div>\r\n                </div>\r\n\r\n                <div>\r\n                  <p className=\"text-xs font-medium text-gray-500\">Transition</p>\r\n                  <p className=\"text-sm\">\r\n                    <Badge variant=\"outline\" className=\"mr-1\">\r\n                      {entry.from}\r\n                    </Badge>\r\n                    ÔåÆ\r\n                    <Badge variant=\"outline\" className=\"ml-1\">\r\n                      {entry.to}\r\n                    </Badge>\r\n                  </p>\r\n                </div>\r\n\r\n                {entry.user && (\r\n                  <div>\r\n                    <p className=\"text-xs font-medium text-gray-500\">Benutzer</p>\r\n                    <p className=\"text-sm\">{entry.user}</p>\r\n                  </div>\r\n                )}\r\n              </div>\r\n\r\n              {entry.reason && (\r\n                <div className=\"flex-1\">\r\n                  <p className=\"text-xs font-medium text-gray-500\">Grund</p>\r\n                  <p className=\"text-sm italic text-gray-600\">{entry.reason}</p>\r\n                </div>\r\n              )}\r\n            </div>\r\n          ))}\r\n        </div>\r\n      </CardContent>\r\n    </Card>\r\n  )\r\n}\r\n\r\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\Jochen\\VALEO-NeuroERP-3.0\\packages\\frontend-web\\src\\components\\app\\NavLiveStatus.tsx","messages":[{"ruleId":"sort-imports","severity":1,"message":"Member 'useLiveSales' of the import declaration should be sorted alphabetically.","line":1,"column":45,"nodeType":"ImportSpecifier","messageId":"sortMembersAlphabetically","endLine":1,"endColumn":57,"fix":{"range":[9,56],"text":"useLiveInventory, useLiveSales, usePolicyAlerts"}}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":1,"source":"import { useLiveInventory, usePolicyAlerts, useLiveSales } from '@/hooks/live-hooks'\n\ntype LiveStatus = 'closed' | 'open' | 'error'\ntype StatusClass = 'bg-emerald-500' | 'bg-red-600' | 'bg-zinc-400'\n\nconst resolveWorstStatus = (statuses: LiveStatus[]): LiveStatus => {\n  if (statuses.includes('error')) {\n    return 'error'\n  }\n  if (statuses.includes('open')) {\n    return 'open'\n  }\n  return 'closed'\n}\n\nconst resolveStatusClass = (status: LiveStatus): StatusClass => {\n  switch (status) {\n    case 'open':\n      return 'bg-emerald-500'\n    case 'error':\n      return 'bg-red-600'\n    default:\n      return 'bg-zinc-400'\n  }\n}\n\nexport default function NavLiveStatus(): JSX.Element {\n  const salesStatus = useLiveSales().status as LiveStatus\n  const inventoryStatus = useLiveInventory().status as LiveStatus\n  const policyStatus = usePolicyAlerts().status as LiveStatus\n\n  const worstStatus = resolveWorstStatus([salesStatus, inventoryStatus, policyStatus])\n  const dotClass = resolveStatusClass(worstStatus)\n\n  return (\n    <div className=\"flex items-center gap-2 text-xs\">\n      <span className={`inline-block h-2 w-2 rounded-full ${dotClass}`} /> Live\n    </div>\n  )\n}\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\Jochen\\VALEO-NeuroERP-3.0\\packages\\frontend-web\\src\\components\\auth\\ProtectedRoute.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":17,"column":8,"nodeType":"FunctionDeclaration","messageId":"missingReturnType","endLine":17,"endColumn":31},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":17,"column":8,"nodeType":"FunctionDeclaration","messageId":"missingReturnType","endLine":17,"endColumn":31},{"ruleId":"@typescript-eslint/strict-boolean-expressions","severity":1,"message":"Unexpected nullable string value in conditional. Please handle the nullish/empty cases explicitly.","line":54,"column":29,"nodeType":"ChainExpression","messageId":"conditionErrorNullableString","endLine":54,"endColumn":53,"suggestions":[{"messageId":"conditionFixCompareNullish","fix":{"range":[1683,1707],"text":"((user?.scopes?.join(', ')) != null)"},"desc":"Change condition to check for null/undefined (`value != null`)"},{"messageId":"conditionFixDefaultEmptyString","fix":{"range":[1683,1707],"text":"((user?.scopes?.join(', ')) ?? \"\")"},"desc":"Explicitly treat nullish value the same as an empty string (`value ?? \"\"`)"},{"messageId":"conditionFixCastBoolean","fix":{"range":[1683,1707],"text":"(Boolean((user?.scopes?.join(', '))))"},"desc":"Explicitly cast value to a boolean (`Boolean(value)`)"}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":54,"column":54,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":54,"endColumn":56,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[1708,1710],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * ProtectedRoute Component\r\n * Route-Protection mit OIDC-Authentication\r\n */\r\n\r\nimport { ReactNode } from 'react'\r\nimport { Navigate } from 'react-router-dom'\r\nimport { useAuth } from '@/hooks/useAuth'\r\nimport { Loader2 } from 'lucide-react'\r\n\r\ninterface ProtectedRouteProps {\r\n  children: ReactNode\r\n  requiredScopes?: string[]\r\n  requiredRoles?: string[]\r\n}\r\n\r\nexport function ProtectedRoute({ \r\n  children, \r\n  requiredScopes = [], \r\n  requiredRoles = [] \r\n}: ProtectedRouteProps) {\r\n  const { isAuthenticated, loading, hasScope, hasRole, user } = useAuth()\r\n\r\n  // Loading state\r\n  if (loading) {\r\n    return (\r\n      <div className=\"flex items-center justify-center h-screen\">\r\n        <Loader2 className=\"h-8 w-8 animate-spin text-blue-600\" />\r\n      </div>\r\n    )\r\n  }\r\n\r\n  // Not authenticated ÔåÆ Redirect to login\r\n  if (!isAuthenticated) {\r\n    return <Navigate to=\"/login\" replace />\r\n  }\r\n\r\n  // Check required scopes\r\n  if (requiredScopes.length > 0) {\r\n    const hasRequiredScope = requiredScopes.some((scope) => hasScope(scope))\r\n    \r\n    if (!hasRequiredScope) {\r\n      return (\r\n        <div className=\"flex items-center justify-center h-screen\">\r\n          <div className=\"text-center space-y-4\">\r\n            <h1 className=\"text-2xl font-bold text-red-600\">Zugriff verweigert</h1>\r\n            <p className=\"text-muted-foreground\">\r\n              Sie haben nicht die erforderlichen Berechtigungen f├╝r diese Seite.\r\n            </p>\r\n            <p className=\"text-sm text-muted-foreground\">\r\n              Erforderlich: {requiredScopes.join(' oder ')}\r\n            </p>\r\n            <p className=\"text-sm text-muted-foreground\">\r\n              Ihre Scopes: {user?.scopes?.join(', ') || 'keine'}\r\n            </p>\r\n          </div>\r\n        </div>\r\n      )\r\n    }\r\n  }\r\n\r\n  // Check required roles\r\n  if (requiredRoles.length > 0) {\r\n    const hasRequiredRole = requiredRoles.some((role) => hasRole(role))\r\n    \r\n    if (!hasRequiredRole) {\r\n      return (\r\n        <div className=\"flex items-center justify-center h-screen\">\r\n          <div className=\"text-center space-y-4\">\r\n            <h1 className=\"text-2xl font-bold text-red-600\">Zugriff verweigert</h1>\r\n            <p className=\"text-muted-foreground\">\r\n              Sie haben nicht die erforderliche Rolle f├╝r diese Seite.\r\n            </p>\r\n            <p className=\"text-sm text-muted-foreground\">\r\n              Erforderlich: {requiredRoles.join(' oder ')}\r\n            </p>\r\n          </div>\r\n        </div>\r\n      )\r\n    }\r\n  }\r\n\r\n  // Authenticated & authorized ÔåÆ Render children\r\n  return <>{children}</>\r\n}\r\n\r\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\Jochen\\VALEO-NeuroERP-3.0\\packages\\frontend-web\\src\\components\\copilot\\AskValeo.tsx","messages":[{"ruleId":"@typescript-eslint/strict-boolean-expressions","severity":1,"message":"Unexpected nullable string value in conditional. Please handle the nullish/empty cases explicitly.","line":207,"column":18,"nodeType":"MemberExpression","messageId":"conditionErrorNullableString","endLine":207,"endColumn":45,"suggestions":[{"messageId":"conditionFixCompareNullish","fix":{"range":[5963,5990],"text":"(pageContext.currentDocument != null)"},"desc":"Change condition to check for null/undefined (`value != null`)"},{"messageId":"conditionFixDefaultEmptyString","fix":{"range":[5963,5990],"text":"(pageContext.currentDocument ?? \"\")"},"desc":"Explicitly treat nullish value the same as an empty string (`value ?? \"\"`)"},{"messageId":"conditionFixCastBoolean","fix":{"range":[5963,5990],"text":"(Boolean(pageContext.currentDocument))"},"desc":"Explicitly cast value to a boolean (`Boolean(value)`)"}]},{"ruleId":"@typescript-eslint/strict-boolean-expressions","severity":1,"message":"Unexpected nullable boolean value in conditional. Please handle the nullish case explicitly.","line":368,"column":10,"nodeType":"ChainExpression","messageId":"conditionErrorNullableBoolean","endLine":368,"endColumn":37,"suggestions":[{"messageId":"conditionFixDefaultFalse","fix":{"range":[11802,11829],"text":"((pageContext?.hasSuggestions) ?? false)"},"desc":"Explicitly treat nullish value the same as false (`value ?? false`)"},{"messageId":"conditionFixCompareTrue","fix":{"range":[11802,11829],"text":"((pageContext?.hasSuggestions) === true)"},"desc":"Change condition to check if true (`value === true`)"}]},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":384,"column":8,"nodeType":"FunctionDeclaration","messageId":"missingReturnType","endLine":384,"endColumn":28},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":384,"column":8,"nodeType":"FunctionDeclaration","messageId":"missingReturnType","endLine":384,"endColumn":28},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'context' is defined but never used. Allowed unused args must match /^_/u.","line":384,"column":29,"nodeType":"Identifier","messageId":"unusedVar","endLine":384,"endColumn":60},{"ruleId":"no-unused-vars","severity":1,"message":"'context' is defined but never used. Allowed unused args must match /^_/u.","line":384,"column":29,"nodeType":"Identifier","messageId":"unusedVar","endLine":384,"endColumn":60},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'question' is defined but never used. Allowed unused args must match /^_/u.","line":385,"column":22,"nodeType":"Identifier","messageId":"unusedVar","endLine":385,"endColumn":38},{"ruleId":"no-unused-vars","severity":1,"message":"'question' is defined but never used. Allowed unused args must match /^_/u.","line":385,"column":22,"nodeType":"Identifier","messageId":"unusedVar","endLine":385,"endColumn":38},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":398,"column":8,"nodeType":"FunctionDeclaration","messageId":"missingReturnType","endLine":398,"endColumn":41},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":398,"column":8,"nodeType":"FunctionDeclaration","messageId":"missingReturnType","endLine":398,"endColumn":41}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":10,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Ask VALEO - AI-Copilot-Komponente\n * Inspiriert von SAP Joule Design Guidelines\n *\n * Design-Prinzipien (SAP Joule adaptiert):\n * 1. Explainable AI - Transparenz bei Empfehlungen\n * 2. Kontextuelle Integration - Mitlaufende Action Bar\n * 3. Grounding - Nur auf verf├╝gbare Daten\n * 4. Progressive Disclosure - Erst einfach, dann komplex\n * 5. Feedback-Loop - Laden, Erfolg, Fehler klar kommunizieren\n *\n * MCP-Integration: Phase 3 ready\n */\n\nimport { useEffect, useMemo, useState } from 'react';\nimport { Button } from '@/components/ui/button';\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogFooter,\n  DialogHeader,\n  DialogTitle,\n} from '@/components/ui/dialog';\nimport { Textarea } from '@/components/ui/textarea';\nimport { Badge } from '@/components/ui/badge';\nimport {\n  AlertCircle,\n  CheckCircle,\n  Lightbulb,\n  Loader2,\n  Send,\n  Sparkles,\n  Wand2,\n} from 'lucide-react';\nimport { createMCPMetadata } from '@/design/mcp-schemas/component-metadata';\n\n// MCP-Metadaten f├╝r Ask VALEO\nexport const askValeoMCP = createMCPMetadata('AskValeo', 'dialog', {\n  accessibility: {\n    role: 'dialog',\n    ariaLabel: 'Ask VALEO AI Assistant',\n    keyboardShortcuts: ['Ctrl+Shift+K', 'Escape'],\n    focusable: true,\n  },\n  intent: {\n    purpose: 'AI-powered assistance for ERP tasks',\n    userActions: ['ask-question', 'get-suggestion', 'auto-fill'],\n    dataContext: ['current-page', 'user-context', 'erp-state'],\n    businessDomain: 'ai-assistance',\n  },\n  mcpHints: {\n    autoFillable: true,\n    explainable: true,\n    testable: true,\n    contextAware: true,\n  },\n});\n\ninterface AskValeoProps {\n  open: boolean;\n  onOpenChange: (open: boolean) => void;\n  pageContext?: {\n    domain: string;\n    currentDocument?: string;\n    availableActions?: string[];\n  };\n}\n\nexport interface AISuggestion {\n  type: 'action' | 'info' | 'warning' | 'tip';\n  title: string;\n  description: string;\n  action?: () => void;\n  actionLabel?: string;\n}\n\nexport interface AskValeoRuntimeContext {\n  domain?: string;\n  currentDocument?: string;\n  [key: string]: unknown;\n}\n\ntype AskValeoPageContext = AskValeoProps['pageContext'];\n\nconst DEFAULT_DOMAIN = 'sales';\nconst AI_RESPONSE_DELAY_MS = 1_500;\nconst QUICK_ACTIONS: readonly string[] = [\n  'Wie erstelle ich einen Auftrag?',\n  'Zeige offene Rechnungen',\n  'Welche Artikel sind unter Mindestbestand?',\n  'Erkl├ñre das Policy-Framework',\n];\n\nconst DOMAIN_SUGGESTIONS: Record<string, AISuggestion[]> = {\n  sales: [\n    {\n      type: 'action',\n      title: 'Verkaufsauftrag erstellen',\n      description: 'Erstelle einen neuen Auftrag f├╝r den zuletzt verwendeten Kunden',\n      actionLabel: 'Erstellen',\n      action: () => console.info('MCP: create-order suggestion triggered'),\n    },\n    {\n      type: 'tip',\n      title: 'Offene Auftr├ñge pr├╝fen',\n      description: 'Du hast 3 Auftr├ñge ├╝ber Lieferdatum. Soll ich diese anzeigen?',\n      actionLabel: 'Anzeigen',\n    },\n  ],\n  inventory: [\n    {\n      type: 'warning',\n      title: 'Bestandswarnung',\n      description: '2 Artikel unter Mindestbestand. Nachbestellung empfohlen.',\n      actionLabel: 'Nachbestellen',\n    },\n  ],\n};\n\nexport function AskValeo({ open, onOpenChange, pageContext }: AskValeoProps): JSX.Element {\n  const [prompt, setPrompt] = useState<string>('');\n  const [loading, setLoading] = useState<boolean>(false);\n  const [response, setResponse] = useState<string | null>(null);\n  const [suggestions, setSuggestions] = useState<AISuggestion[]>([]);\n  const [error, setError] = useState<string | null>(null);\n\n  const domainKey = useMemo<string>(() => pageContext?.domain ?? DEFAULT_DOMAIN, [pageContext?.domain]);\n\n  useEffect(() => {\n    if (!open) {\n      return;\n    }\n    setSuggestions(DOMAIN_SUGGESTIONS[domainKey] ?? []);\n  }, [domainKey, open]);\n\n  const processPrompt = async (value: string): Promise<void> => {\n    const trimmedPrompt = value.trim();\n    if (trimmedPrompt.length === 0) {\n      return;\n    }\n\n    setLoading(true);\n    setError(null);\n    setResponse(null);\n\n    try {\n      // Phase 3: Echte MCP-Browser-Integration\n      // const result = await mcp.askQuestion(trimmedPrompt, pageContext);\n\n      // Aktuell: Mock-Response\n      await new Promise((resolve) => setTimeout(resolve, AI_RESPONSE_DELAY_MS));\n\n      setResponse(\n        [\n          '­ƒÆí VALEO-Antwort (Phase 3 Simulation):',\n          '',\n          `Deine Frage: \"${trimmedPrompt}\"`,\n          '',\n          `Kontext: ${pageContext?.domain ?? 'unbekannt'}`,\n          '',\n          'In Phase 3 wird hier die echte AI-Antwort via MCP-Browser erscheinen.',\n          'Die Metadaten sind bereits vorbereitet!',\n        ].join('\\n'),\n      );\n    } catch (err) {\n      setError('Fehler bei der AI-Anfrage. Bitte versuche es erneut.');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleSubmit = async (): Promise<void> => {\n    await processPrompt(prompt);\n  };\n\n  const handleQuickAction = (question: string): void => {\n    setPrompt(question);\n    void processPrompt(question);\n  };\n\n  const hasResponse = response !== null;\n  const hasError = error !== null;\n\n  return (\n    <Dialog\n      open={open}\n      onOpenChange={onOpenChange}\n      aria-labelledby=\"ask-valeo-title\"\n      data-mcp-component=\"ask-valeo\"\n      data-mcp-page-context={pageContext?.domain}\n    >\n      <DialogContent className=\"max-h-[80vh] max-w-2xl overflow-y-auto\">\n        <DialogHeader>\n          <DialogTitle id=\"ask-valeo-title\" className=\"flex items-center gap-2\">\n            <Sparkles className=\"h-5 w-5 text-primary\" />\n            Ask VALEO\n            <Badge variant=\"outline\" className=\"ml-2\">\n              AI-Assistent\n            </Badge>\n          </DialogTitle>\n          <DialogDescription>\n            Stelle Fragen zu VALEO-ERP oder erhalte Vorschl├ñge f├╝r deine aktuelle Aufgabe.\n            {pageContext && (\n              <span className=\"mt-1 block text-xs\">\n                ­ƒöì Kontext: <strong>{pageContext.domain}</strong>\n                {pageContext.currentDocument && ` | Dokument: ${pageContext.currentDocument}`}\n              </span>\n            )}\n          </DialogDescription>\n        </DialogHeader>\n\n        <div className=\"space-y-4\">\n          <div className=\"relative\">\n            <Textarea\n              placeholder=\"z.B. 'Wie erstelle ich einen Verkaufsauftrag?' oder 'Zeige Artikel unter Mindestbestand'\"\n              value={prompt}\n              onChange={(event) => setPrompt(event.target.value)}\n              onKeyDown={(event) => {\n                if (event.key === 'Enter' && (event.metaKey || event.ctrlKey)) {\n                  event.preventDefault();\n                  void processPrompt(event.currentTarget.value);\n                }\n              }}\n              aria-label=\"Frage an Ask VALEO\"\n              rows={4}\n            />\n            <Button\n              variant=\"ghost\"\n              size=\"sm\"\n              className=\"absolute bottom-3 right-3 gap-2\"\n              onClick={() => {\n                setPrompt('Welche Aufgaben stehen als n├ñchstes an?');\n              }}\n            >\n              <Lightbulb className=\"h-4 w-4\" />\n              Inspiration\n            </Button>\n          </div>\n\n          <div className=\"grid grid-cols-2 gap-2\">\n            {QUICK_ACTIONS.map((action) => (\n              <Button\n                key={action}\n                variant=\"secondary\"\n                size=\"sm\"\n                className=\"justify-start gap-2\"\n                onClick={() => handleQuickAction(action)}\n              >\n                <Wand2 className=\"h-4 w-4\" />\n                {action}\n              </Button>\n            ))}\n          </div>\n\n          {suggestions.length > 0 && (\n            <div className=\"space-y-3 rounded-md border border-dashed bg-muted/50 p-3\">\n              <p className=\"text-xs font-semibold uppercase text-muted-foreground\">Kontextuelle Vorschl├ñge</p>\n              {suggestions.map((sug) => (\n                <div\n                  key={`${sug.title}-${sug.type}`}\n                  className=\"rounded-md border border-border bg-background p-3 shadow-sm\"\n                >\n                  <div className=\"flex items-start gap-2\">\n                    <Badge variant={sug.type === 'warning' ? 'destructive' : 'outline'} className=\"mt-0.5\">\n                      {sug.type.toUpperCase()}\n                    </Badge>\n                    <div className=\"flex-1 space-y-1\">\n                      <p className=\"font-medium\">{sug.title}</p>\n                      <p className=\"text-sm text-muted-foreground\">{sug.description}</p>\n                    </div>\n                    {sug.action && (\n                      <Button variant={sug.type === 'warning' ? 'destructive' : 'default'} onClick={sug.action}>\n                        {sug.actionLabel ?? 'Ausf├╝hren'}\n                      </Button>\n                    )}\n                  </div>\n                </div>\n              ))}\n            </div>\n          )}\n\n          {hasResponse && (\n            <div className=\"rounded-md border border-primary/20 bg-primary/10 p-4\">\n              <div className=\"flex items-start gap-2\">\n                <CheckCircle className=\"mt-0.5 h-5 w-5 flex-shrink-0 text-primary\" />\n                <div className=\"flex-1\">\n                  <p className=\"whitespace-pre-wrap text-sm\">{response}</p>\n                </div>\n              </div>\n            </div>\n          )}\n\n          {hasError && (\n            <div className=\"rounded-md border border-destructive/20 bg-destructive/10 p-4\">\n              <div className=\"flex items-start gap-2\">\n                <AlertCircle className=\"mt-0.5 h-5 w-5 text-destructive\" />\n                <p className=\"text-sm\">{error}</p>\n              </div>\n            </div>\n          )}\n\n          {loading && (\n            <div className=\"flex items-center gap-2 text-sm text-muted-foreground\">\n              <Loader2 className=\"h-4 w-4 animate-spin\" />\n              <span>VALEO denkt nach...</span>\n            </div>\n          )}\n\n          <div className=\"rounded-md border border-dashed bg-muted/50 p-3 text-xs text-muted-foreground\">\n            <strong>­ƒÜÇ Phase 3 Preview:</strong> Diese Komponente ist bereit f├╝r MCP-Browser-Integration.\n            Alle Metadaten (Intent, Context, Actions) sind vorbereitet. In Phase 3 wird hier echte AI via\n            @modelcontext/browser-adapter integriert.\n          </div>\n        </div>\n\n        <DialogFooter>\n          <Button variant=\"outline\" onClick={() => onOpenChange(false)}>\n            Schlie├ƒen\n          </Button>\n          <Button onClick={handleSubmit} disabled={prompt.trim().length === 0 || loading}>\n            {loading ? (\n              <>\n                <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />\n                Verarbeite...\n              </>\n            ) : (\n              <>\n                <Send className=\"mr-2 h-4 w-4\" />\n                Frage senden\n              </>\n            )}\n          </Button>\n        </DialogFooter>\n      </DialogContent>\n    </Dialog>\n  );\n}\n\n/**\n * Joule Action Bar - Mitlaufende Copilot-Leiste\n * SAP Joule Principle: Immer verf├╝gbar, nicht aufdringlich\n */\n\ninterface JouleActionBarProps {\n  onAskClick: () => void;\n  pageContext?: {\n    domain: string;\n    hasSuggestions?: boolean;\n  };\n}\n\nexport function JouleActionBar({ onAskClick, pageContext }: JouleActionBarProps): JSX.Element {\n  return (\n    <div\n      className=\"fixed bottom-6 right-6 z-50\"\n      data-mcp-component=\"joule-action-bar\"\n      data-mcp-domain={pageContext?.domain}\n    >\n      <Button\n        size=\"lg\"\n        onClick={onAskClick}\n        className=\"flex items-center justify-center gap-2 rounded-full shadow-lg transition-shadow hover:shadow-xl\"\n        aria-label=\"Ask VALEO AI Assistant\"\n      >\n        <Sparkles className=\"h-5 w-5\" />\n        Ask VALEO\n        {pageContext?.hasSuggestions && (\n          <Badge variant=\"destructive\" className=\"ml-2 flex h-5 w-5 items-center justify-center rounded-full p-0\">\n            !\n          </Badge>\n        )}\n      </Button>\n    </div>\n  );\n}\n\n/**\n * Phase 3: MCP-Integration-Hooks\n *\n * Diese werden in Phase 3 implementiert:\n */\n\nexport function useAskValeo(context: AskValeoRuntimeContext) {\n  const ask = async (question: string): Promise<{ answer: string; suggestions: AISuggestion[] }> => {\n    // return await mcp.ask(question, context);\n    return { answer: 'Phase 3 Placeholder', suggestions: [] };\n  };\n\n  const getSuggestions = async (): Promise<AISuggestion[]> => {\n    // return await mcp.getSuggestions(context);\n    return [];\n  };\n\n  return { ask, getSuggestions };\n}\n\nexport function useContextualSuggestions(pageContext: AskValeoPageContext) {\n  const [suggestions, setSuggestions] = useState<AISuggestion[]>([]);\n\n  useEffect(() => {\n    // Phase 3: Echte MCP-Abfrage\n    // const result = await mcp.getContextualSuggestions(pageContext);\n\n    // Aktuell: Mock\n    if (pageContext) {\n      setSuggestions(DOMAIN_SUGGESTIONS[pageContext.domain] ?? []);\n    } else {\n      setSuggestions([]);\n    }\n  }, [pageContext]);\n\n  return suggestions;\n}\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\Jochen\\VALEO-NeuroERP-3.0\\packages\\frontend-web\\src\\components\\copilot\\SkillRegistry.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'createMCPMetadata' is defined but never used. Allowed unused vars must match /^_/u.","line":14,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":14,"endColumn":27},{"ruleId":"no-unused-vars","severity":1,"message":"'createMCPMetadata' is defined but never used. Allowed unused vars must match /^_/u.","line":14,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":14,"endColumn":27},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":37,"column":13,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":37,"endColumn":16,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[893,896],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[893,896],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":51,"column":22,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":51,"endColumn":25,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1171,1174],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1171,1174],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":51,"column":36,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":51,"endColumn":39,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1185,1188],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1185,1188],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":51,"column":52,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":51,"endColumn":55,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1201,1204],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1201,1204],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":66,"column":29,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":66,"endColumn":32,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1492,1495],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1492,1495],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Argument 'mcpClient' should be typed with a non-any type.","line":294,"column":32,"nodeType":"Identifier","messageId":"anyTypedArg","endLine":294,"endColumn":47},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":294,"column":44,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":294,"endColumn":47,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7803,7806],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7803,7806],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Argument 'params' should be typed with a non-any type.","line":296,"column":39,"nodeType":"Identifier","messageId":"anyTypedArg","endLine":296,"endColumn":50},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":296,"column":47,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":296,"endColumn":50,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7860,7863],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7860,7863],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Argument 'context' should be typed with a non-any type.","line":296,"column":52,"nodeType":"Identifier","messageId":"anyTypedArg","endLine":296,"endColumn":64},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":296,"column":61,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":296,"endColumn":64,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7874,7877],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7874,7877],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":296,"column":75,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":296,"endColumn":78,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7888,7891],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7888,7891],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":306,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":306,"endColumn":16,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[8189,8258],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Argument 'initialContext' should be typed with a non-any type.","line":310,"column":39,"nodeType":"Identifier","messageId":"anyTypedArg","endLine":310,"endColumn":58},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":310,"column":55,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":310,"endColumn":58,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8362,8365],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8362,8365],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":310,"column":69,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":310,"endColumn":72,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8376,8379],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8376,8379],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":317,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":317,"endColumn":16,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[8578,8626],"text":""},"desc":"Remove the console.log()."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":19,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * VALEO Skill Registry\r\n * Inspiriert von SAP Joule Studio\r\n * \r\n * Skills = Kleine, fokussierte AI-Funktionen\r\n * Agents = Orchestrieren mehrere Skills\r\n * \r\n * Architektur:\r\n * - Skills: Atomar, wiederverwendbar, testbar\r\n * - Agents: Workflows, Multi-Step, Decision-Making\r\n * - MCP-Integration: Skills = MCP-Tools, Agents = MCP-Prompts\r\n */\r\n\r\nimport { createMCPMetadata } from '@/design/mcp-schemas/component-metadata';\r\n\r\n/**\r\n * Skill-Definition (angelehnt an SAP Joule Studio)\r\n */\r\nexport interface ValeoSkill {\r\n  id: string;\r\n  name: string;\r\n  description: string;\r\n  category: 'data-retrieval' | 'data-modification' | 'analysis' | 'workflow';\r\n  \r\n  // Eingabe-Schema\r\n  input: {\r\n    parameters: Record<string, {\r\n      type: string;\r\n      required: boolean;\r\n      description: string;\r\n    }>;\r\n  };\r\n  \r\n  // Ausgabe-Schema\r\n  output: {\r\n    type: string;\r\n    schema: any;\r\n  };\r\n  \r\n  // Erforderliche Scopes\r\n  requiredScopes: string[];\r\n  \r\n  // MCP-Metadaten\r\n  mcp: {\r\n    toolName: string;\r\n    grounding: 'user-data' | 'system-data' | 'none';\r\n    explainable: boolean;\r\n  };\r\n  \r\n  // Ausf├╝hrungs-Funktion (Phase 3)\r\n  execute?: (params: any, context: any) => Promise<any>;\r\n}\r\n\r\n/**\r\n * Agent-Definition (Multi-Step-Workflows)\r\n */\r\nexport interface ValeoAgent {\r\n  id: string;\r\n  name: string;\r\n  description: string;\r\n  skills: string[];  // Referenz zu Skill-IDs\r\n  \r\n  workflow: {\r\n    steps: Array<{\r\n      skillId: string;\r\n      condition?: (context: any) => boolean;\r\n      onSuccess?: string;  // N├ñchster Step\r\n      onError?: string;    // Fehler-Handling\r\n    }>;\r\n  };\r\n  \r\n  // MCP-Integration\r\n  mcp: {\r\n    promptTemplate: string;\r\n    contextRequired: string[];\r\n  };\r\n}\r\n\r\n/**\r\n * Skill-Registry (vorkonfigurierte Skills)\r\n */\r\nexport const valeoSkills: ValeoSkill[] = [\r\n  // Skill 1: Kunden suchen\r\n  {\r\n    id: 'search-customer',\r\n    name: 'Kunde suchen',\r\n    description: 'Sucht Kunden nach Name, Nummer oder Ort',\r\n    category: 'data-retrieval',\r\n    input: {\r\n      parameters: {\r\n        query: {\r\n          type: 'string',\r\n          required: true,\r\n          description: 'Suchbegriff (Name, Nummer, Ort)',\r\n        },\r\n      },\r\n    },\r\n    output: {\r\n      type: 'array',\r\n      schema: { /* CustomerSchema */ },\r\n    },\r\n    requiredScopes: ['sales:read', 'crm:read'],\r\n    mcp: {\r\n      toolName: 'searchCustomer',\r\n      grounding: 'user-data',\r\n      explainable: true,\r\n    },\r\n  },\r\n\r\n  // Skill 2: Artikel-Preis abrufen\r\n  {\r\n    id: 'get-article-price',\r\n    name: 'Artikel-Preis abrufen',\r\n    description: 'Holt aktuellen Verkaufspreis f├╝r Artikel',\r\n    category: 'data-retrieval',\r\n    input: {\r\n      parameters: {\r\n        articleNumber: {\r\n          type: 'string',\r\n          required: true,\r\n          description: 'Artikel-Nummer',\r\n        },\r\n        customer: {\r\n          type: 'string',\r\n          required: false,\r\n          description: 'Kunde (f├╝r kundenspezifische Preise)',\r\n        },\r\n      },\r\n    },\r\n    output: {\r\n      type: 'object',\r\n      schema: { price: 'number', currency: 'string' },\r\n    },\r\n    requiredScopes: ['sales:read'],\r\n    mcp: {\r\n      toolName: 'getArticlePrice',\r\n      grounding: 'system-data',\r\n      explainable: true,\r\n    },\r\n  },\r\n\r\n  // Skill 3: Verkaufsauftrag erstellen\r\n  {\r\n    id: 'create-sales-order',\r\n    name: 'Verkaufsauftrag erstellen',\r\n    description: 'Erstellt einen neuen Verkaufsauftrag',\r\n    category: 'data-modification',\r\n    input: {\r\n      parameters: {\r\n        customer: { type: 'string', required: true, description: 'Kunden-ID' },\r\n        articles: { type: 'array', required: true, description: 'Artikel-Liste' },\r\n        deliveryDate: { type: 'date', required: false, description: 'Lieferdatum' },\r\n      },\r\n    },\r\n    output: {\r\n      type: 'object',\r\n      schema: { orderId: 'string', status: 'string' },\r\n    },\r\n    requiredScopes: ['sales:write'],\r\n    mcp: {\r\n      toolName: 'createSalesOrder',\r\n      grounding: 'user-data',\r\n      explainable: true,\r\n    },\r\n  },\r\n\r\n  // Skill 4: Policy-Check ausf├╝hren\r\n  {\r\n    id: 'check-policy',\r\n    name: 'Policy-Check',\r\n    description: 'Pr├╝ft ob Aktion gegen Policies verst├Â├ƒt',\r\n    category: 'analysis',\r\n    input: {\r\n      parameters: {\r\n        action: { type: 'string', required: true, description: 'Aktion (z.B. \"submit-order\")' },\r\n        data: { type: 'object', required: true, description: 'Zu pr├╝fende Daten' },\r\n      },\r\n    },\r\n    output: {\r\n      type: 'object',\r\n      schema: { violations: 'array', warnings: 'array', allowed: 'boolean' },\r\n    },\r\n    requiredScopes: ['policy:read'],\r\n    mcp: {\r\n      toolName: 'checkPolicy',\r\n      grounding: 'system-data',\r\n      explainable: true,\r\n    },\r\n  },\r\n\r\n  // Skill 5: Bestandspr├╝fung\r\n  {\r\n    id: 'check-stock',\r\n    name: 'Bestand pr├╝fen',\r\n    description: 'Pr├╝ft verf├╝gbaren Bestand f├╝r Artikel',\r\n    category: 'data-retrieval',\r\n    input: {\r\n      parameters: {\r\n        articleNumber: { type: 'string', required: true, description: 'Artikel-Nummer' },\r\n        warehouse: { type: 'string', required: false, description: 'Lager' },\r\n      },\r\n    },\r\n    output: {\r\n      type: 'object',\r\n      schema: { available: 'number', reserved: 'number', incoming: 'number' },\r\n    },\r\n    requiredScopes: ['inventory:read'],\r\n    mcp: {\r\n      toolName: 'checkStock',\r\n      grounding: 'system-data',\r\n      explainable: true,\r\n    },\r\n  },\r\n];\r\n\r\n/**\r\n * Agent-Registry (Workflow-Orchestrierung)\r\n */\r\nexport const valeoAgents: ValeoAgent[] = [\r\n  // Agent 1: Auftrags-Assistent\r\n  {\r\n    id: 'order-assistant',\r\n    name: 'Auftrags-Assistent',\r\n    description: 'Hilft beim Erstellen von Verkaufsauftr├ñgen mit Preis- und Bestandspr├╝fung',\r\n    skills: ['search-customer', 'get-article-price', 'check-stock', 'check-policy', 'create-sales-order'],\r\n    workflow: {\r\n      steps: [\r\n        {\r\n          skillId: 'search-customer',\r\n          onSuccess: 'get-article-price',\r\n        },\r\n        {\r\n          skillId: 'get-article-price',\r\n          onSuccess: 'check-stock',\r\n        },\r\n        {\r\n          skillId: 'check-stock',\r\n          condition: (ctx) => ctx.stock.available > 0,\r\n          onSuccess: 'check-policy',\r\n          onError: 'notify-out-of-stock',\r\n        },\r\n        {\r\n          skillId: 'check-policy',\r\n          condition: (ctx) => ctx.policy.allowed,\r\n          onSuccess: 'create-sales-order',\r\n          onError: 'notify-policy-violation',\r\n        },\r\n        {\r\n          skillId: 'create-sales-order',\r\n        },\r\n      ],\r\n    },\r\n    mcp: {\r\n      promptTemplate: `Du bist ein Verkaufsauftrag-Assistent f├╝r VALEO-ERP.\r\n        Hilf dem Benutzer beim Erstellen eines Auftrags:\r\n        1. Finde den Kunden\r\n        2. Pr├╝fe Artikel-Preise\r\n        3. Pr├╝fe Bestand\r\n        4. Pr├╝fe Policies\r\n        5. Erstelle Auftrag\r\n        \r\n        Sei pr├ñzise, freundlich und erkl├ñre jeden Schritt.`,\r\n      contextRequired: ['user-permissions', 'current-page'],\r\n    },\r\n  },\r\n\r\n  // Agent 2: Nachbestell-Assistent\r\n  {\r\n    id: 'reorder-assistant',\r\n    name: 'Nachbestell-Assistent',\r\n    description: 'Identifiziert Artikel unter Mindestbestand und schl├ñgt Nachbestellungen vor',\r\n    skills: ['check-stock'],\r\n    workflow: {\r\n      steps: [\r\n        {\r\n          skillId: 'check-stock',\r\n          condition: (ctx) => ctx.stock.available < ctx.stock.minLevel,\r\n          onSuccess: 'suggest-reorder',\r\n        },\r\n      ],\r\n    },\r\n    mcp: {\r\n      promptTemplate: `Analysiere Best├ñnde und schlage Nachbestellungen vor.\r\n        Ber├╝cksichtige: Mindestbestand, Lieferzeit, Lagerkosten.`,\r\n      contextRequired: ['inventory-data', 'supplier-data'],\r\n    },\r\n  },\r\n];\r\n\r\n/**\r\n * Skill-Executor (Phase 3)\r\n */\r\nexport class SkillExecutor {\r\n  constructor(private readonly mcpClient?: any) {}\r\n\r\n  async executeSkill(skillId: string, params: any, context: any): Promise<any> {\r\n    const skill = valeoSkills.find((s) => s.id === skillId);\r\n    if (!skill) {\r\n      throw new Error(`Skill not found: ${skillId}`);\r\n    }\r\n\r\n    // Phase 3: Echte MCP-Tool-Ausf├╝hrung\r\n    // return await this.mcpClient.executeTool(skill.mcp.toolName, params);\r\n\r\n    // Aktuell: Mock\r\n    console.log(`[Skill] Executing: ${skill.name}`, { params, context });\r\n    return { success: true, data: {} };\r\n  }\r\n\r\n  async executeAgent(agentId: string, initialContext: any): Promise<any> {\r\n    const agent = valeoAgents.find((a) => a.id === agentId);\r\n    if (!agent) {\r\n      throw new Error(`Agent not found: ${agentId}`);\r\n    }\r\n\r\n    // Phase 3: Multi-Step-Workflow mit MCP\r\n    console.log(`[Agent] Executing: ${agent.name}`);\r\n    \r\n    let context = { ...initialContext };\r\n    for (const step of agent.workflow.steps) {\r\n      const result = await this.executeSkill(step.skillId, {}, context);\r\n      context = { ...context, ...result.data };\r\n    }\r\n\r\n    return context;\r\n  }\r\n}\r\n\r\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\Jochen\\VALEO-NeuroERP-3.0\\packages\\frontend-web\\src\\components\\documents\\BatchPrintButton.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":12,"column":8,"nodeType":"FunctionDeclaration","messageId":"missingReturnType","endLine":12,"endColumn":33},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":12,"column":8,"nodeType":"FunctionDeclaration","messageId":"missingReturnType","endLine":12,"endColumn":33},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":16,"column":37,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":16,"endColumn":39}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState } from 'react'\r\nimport { Button } from '@/components/ui/button'\r\nimport { Download, Loader2 } from 'lucide-react'\r\nimport { useToast } from '@/hooks/use-toast'\r\n\r\ninterface BatchPrintButtonProps {\r\n  selectedIds: string[]\r\n  domain: 'sales' | 'purchase' | 'invoice' | 'delivery'\r\n  onComplete?: () => void\r\n}\r\n\r\nexport function BatchPrintButton({ selectedIds, domain, onComplete }: BatchPrintButtonProps) {\r\n  const [loading, setLoading] = useState(false)\r\n  const { toast } = useToast()\r\n\r\n  const handleBatchPrint = async () => {\r\n    if (selectedIds.length === 0) {\r\n      toast({\r\n        title: 'No documents selected',\r\n        description: 'Please select at least one document to print',\r\n        variant: 'destructive',\r\n      })\r\n      return\r\n    }\r\n\r\n    try {\r\n      setLoading(true)\r\n\r\n      const response = await fetch(`/api/print/batch/${domain}`, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        },\r\n        body: JSON.stringify({\r\n          ids: selectedIds,\r\n        }),\r\n      })\r\n\r\n      if (!response.ok) {\r\n        throw new Error('Batch print failed')\r\n      }\r\n\r\n      // Download ZIP file\r\n      const blob = await response.blob()\r\n      const url = window.URL.createObjectURL(blob)\r\n      const a = document.createElement('a')\r\n      a.href = url\r\n      a.download = `${domain}_batch_${new Date().toISOString().split('T')[0]}.zip`\r\n      document.body.appendChild(a)\r\n      a.click()\r\n      window.URL.revokeObjectURL(url)\r\n      document.body.removeChild(a)\r\n\r\n      toast({\r\n        title: 'Batch print completed',\r\n        description: `${selectedIds.length} documents printed successfully`,\r\n      })\r\n\r\n      onComplete?.()\r\n    } catch (error) {\r\n      toast({\r\n        title: 'Batch print failed',\r\n        description: error instanceof Error ? error.message : 'Unknown error',\r\n        variant: 'destructive',\r\n      })\r\n    } finally {\r\n      setLoading(false)\r\n    }\r\n  }\r\n\r\n  return (\r\n    <Button\r\n      onClick={handleBatchPrint}\r\n      disabled={loading || selectedIds.length === 0}\r\n      variant=\"outline\"\r\n    >\r\n      {loading ? (\r\n        <>\r\n          <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />\r\n          Printing...\r\n        </>\r\n      ) : (\r\n        <>\r\n          <Download className=\"mr-2 h-4 w-4\" />\r\n          Print Selected ({selectedIds.length})\r\n        </>\r\n      )}\r\n    </Button>\r\n  )\r\n}\r\n\r\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\Jochen\\VALEO-NeuroERP-3.0\\packages\\frontend-web\\src\\components\\layout\\AppShell.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\Jochen\\VALEO-NeuroERP-3.0\\packages\\frontend-web\\src\\components\\layout\\GlobalStatusIndicator.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":10,"column":8,"nodeType":"FunctionDeclaration","messageId":"missingReturnType","endLine":10,"endColumn":38},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":10,"column":8,"nodeType":"FunctionDeclaration","messageId":"missingReturnType","endLine":10,"endColumn":38},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":15,"column":34,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":15,"endColumn":36},{"ruleId":"@typescript-eslint/no-magic-numbers","severity":1,"message":"No magic number: 30000.","line":33,"column":47,"nodeType":"Literal","messageId":"noMagic","endLine":33,"endColumn":52},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":35,"column":15,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":35,"endColumn":17},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":38,"column":28,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":38,"endColumn":30},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":51,"column":28,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":51,"endColumn":30}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":7,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useEffect, useState } from 'react'\r\nimport { cn } from '@/lib/utils'\r\n\r\ntype SystemStatus = 'online' | 'degraded' | 'offline'\r\n\r\ninterface GlobalStatusIndicatorProps {\r\n  className?: string\r\n}\r\n\r\nexport function GlobalStatusIndicator({ className }: GlobalStatusIndicatorProps) {\r\n  const [status, setStatus] = useState<SystemStatus>('online')\r\n  const [lastChecked, setLastChecked] = useState<Date>(new Date())\r\n\r\n  useEffect(() => {\r\n    const checkHealth = async () => {\r\n      try {\r\n        const response = await fetch('/health')\r\n        if (response.ok) {\r\n          setStatus('online')\r\n        } else {\r\n          setStatus('degraded')\r\n        }\r\n      } catch {\r\n        setStatus('offline')\r\n      }\r\n      setLastChecked(new Date())\r\n    }\r\n\r\n    // Initial check\r\n    checkHealth()\r\n\r\n    // Check every 30 seconds\r\n    const interval = setInterval(checkHealth, 30000)\r\n\r\n    return () => clearInterval(interval)\r\n  }, [])\r\n\r\n  const getStatusIcon = () => {\r\n    switch (status) {\r\n      case 'online':\r\n        return '­ƒƒó'\r\n      case 'degraded':\r\n        return '­ƒƒá'\r\n      case 'offline':\r\n        return '­ƒö┤'\r\n      default:\r\n        return 'ÔÜ¬'\r\n    }\r\n  }\r\n\r\n  const getStatusText = () => {\r\n    switch (status) {\r\n      case 'online':\r\n        return 'System online'\r\n      case 'degraded':\r\n        return 'System eingeschr├ñnkt'\r\n      case 'offline':\r\n        return 'System offline'\r\n      default:\r\n        return 'Status unbekannt'\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div\r\n      className={cn(\r\n        \"flex items-center gap-2 px-3 py-1 rounded-full border bg-white\",\r\n        status === 'online' && \"border-green-200\",\r\n        status === 'degraded' && \"border-yellow-200\",\r\n        status === 'offline' && \"border-red-200\",\r\n        className\r\n      )}\r\n      title={`${getStatusText()} - Zuletzt gepr├╝ft: ${lastChecked.toLocaleTimeString('de-DE')}`}\r\n    >\r\n      <span className=\"text-sm\" aria-hidden=\"true\">\r\n        {getStatusIcon()}\r\n      </span>\r\n      <span className=\"text-xs font-medium text-slate-600 sr-only\">\r\n        {getStatusText()}\r\n      </span>\r\n    </div>\r\n  )\r\n}","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\Jochen\\VALEO-NeuroERP-3.0\\packages\\frontend-web\\src\\components\\layout\\SSEStatusIndicator.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":11,"column":8,"nodeType":"FunctionDeclaration","messageId":"missingReturnType","endLine":11,"endColumn":35},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":11,"column":8,"nodeType":"FunctionDeclaration","messageId":"missingReturnType","endLine":11,"endColumn":35},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":17,"column":90,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":17,"endColumn":92},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":23,"column":45,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":23,"endColumn":48,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[833,836],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[833,836],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":26,"column":32,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":26,"endColumn":34},{"ruleId":"@typescript-eslint/no-magic-numbers","severity":1,"message":"No magic number: 5000.","line":32,"column":51,"nodeType":"Literal","messageId":"noMagic","endLine":32,"endColumn":55},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":35,"column":15,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":35,"endColumn":17},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":36,"column":50,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":36,"endColumn":53,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1236,1239],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1236,1239],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":41,"column":30,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":41,"endColumn":32}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":9,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useEffect, useState } from 'react'\r\nimport { AlertCircle, Wifi, WifiOff } from 'lucide-react'\r\n\r\ntype SSEStatus = 'connected' | 'reconnecting' | 'disconnected' | 'error'\r\n\r\ninterface SSEStatusIndicatorProps {\r\n  channel?: string\r\n  'data-testid'?: string\r\n}\r\n\r\nexport function SSEStatusIndicator({ channel = 'all', 'data-testid': testId }: SSEStatusIndicatorProps) {\r\n  const [status, setStatus] = useState<SSEStatus>('disconnected')\r\n  const [connectionCount, setConnectionCount] = useState(0)\r\n\r\n  useEffect(() => {\r\n    // Listen to SSE connection events\r\n    const handleSSEStatus = (event: CustomEvent<{ status: SSEStatus; channel: string }>) => {\r\n      if (channel === 'all' || event.detail.channel === channel) {\r\n        setStatus(event.detail.status)\r\n      }\r\n    }\r\n\r\n    window.addEventListener('sse:status' as any, handleSSEStatus)\r\n\r\n    // Simulate connection check\r\n    const checkConnection = () => {\r\n      // In production, this would check actual SSE connection status\r\n      setStatus('connected')\r\n      setConnectionCount((prev) => prev + 1)\r\n    }\r\n\r\n    const interval = setInterval(checkConnection, 5000)\r\n    checkConnection()\r\n\r\n    return () => {\r\n      window.removeEventListener('sse:status' as any, handleSSEStatus)\r\n      clearInterval(interval)\r\n    }\r\n  }, [channel])\r\n\r\n  const getStatusConfig = () => {\r\n    switch (status) {\r\n      case 'connected':\r\n        return {\r\n          icon: Wifi,\r\n          color: 'text-green-600',\r\n          bgColor: 'bg-green-100',\r\n          label: 'Connected',\r\n        }\r\n      case 'reconnecting':\r\n        return {\r\n          icon: AlertCircle,\r\n          color: 'text-yellow-600',\r\n          bgColor: 'bg-yellow-100',\r\n          label: 'Reconnecting',\r\n        }\r\n      case 'error':\r\n        return {\r\n          icon: WifiOff,\r\n          color: 'text-red-600',\r\n          bgColor: 'bg-red-100',\r\n          label: 'Error',\r\n        }\r\n      default:\r\n        return {\r\n          icon: WifiOff,\r\n          color: 'text-gray-600',\r\n          bgColor: 'bg-gray-100',\r\n          label: 'Disconnected',\r\n        }\r\n    }\r\n  }\r\n\r\n  const config = getStatusConfig()\r\n  const Icon = config.icon\r\n\r\n  return (\r\n    <div\r\n      className=\"flex items-center gap-2 px-3 py-1.5 rounded-full text-sm\"\r\n      data-testid={testId}\r\n      data-status={status}\r\n    >\r\n      <div className={`rounded-full p-1 ${config.bgColor}`}>\r\n        <Icon className={`h-4 w-4 ${config.color}`} />\r\n      </div>\r\n      <span className={`font-medium ${config.color}`}>{config.label}</span>\r\n      {status === 'connected' && (\r\n        <span className=\"text-xs text-gray-500\">({connectionCount})</span>\r\n      )}\r\n    </div>\r\n  )\r\n}\r\n\r\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\Jochen\\VALEO-NeuroERP-3.0\\packages\\frontend-web\\src\\components\\navigation\\AppShell.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":43,"column":8,"nodeType":"FunctionDeclaration","messageId":"missingReturnType","endLine":43,"endColumn":25},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":43,"column":8,"nodeType":"FunctionDeclaration","messageId":"missingReturnType","endLine":43,"endColumn":25},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":49,"column":37,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":49,"endColumn":39},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":57,"column":15,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":57,"endColumn":17}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * AppShell - Moderne ERP-Navigation\r\n * Kein Ribbon - Hybrid-Ansatz mit:\r\n * - Sidebar (Dom├ñnen)\r\n * - Top-Header (Suche, User)\r\n * - Kontextuelle Page-Toolbar\r\n * - Command Palette (Ctrl+K)\r\n * \r\n * MCP-Ready: Alle Actions mit Metadaten f├╝r Phase 3\r\n */\r\n\r\nimport { ReactNode, useState } from 'react';\r\nimport { CommandPalette } from './CommandPalette';\r\nimport { Sidebar } from './Sidebar';\r\nimport { TopBar } from './TopBar';\r\nimport { createMCPMetadata } from '@/design/mcp-schemas/component-metadata';\r\n\r\ninterface AppShellProps {\r\n  children: ReactNode;\r\n}\r\n\r\n// MCP-Metadaten f├╝r AppShell (Phase 3 Vorbereitung)\r\nexport const appShellMCP = createMCPMetadata('AppShell', 'navigation', {\r\n  accessibility: {\r\n    role: 'application',\r\n    ariaLabel: 'VALEO NeuroERP Main Application',\r\n    focusable: false,\r\n    keyboardShortcuts: ['Ctrl+K', 'Ctrl+B', '/'],\r\n  },\r\n  intent: {\r\n    purpose: 'Main application navigation and layout',\r\n    userActions: ['navigate', 'search', 'command'],\r\n    businessDomain: 'core',\r\n  },\r\n  mcpHints: {\r\n    autoFillable: false,\r\n    explainable: true,\r\n    testable: true,\r\n    contextAware: true,\r\n  },\r\n});\r\n\r\nexport function AppShell({ children }: AppShellProps) {\r\n  const [commandOpen, setCommandOpen] = useState(false);\r\n  const [sidebarCollapsed, setSidebarCollapsed] = useState(false);\r\n\r\n  // Command Palette mit Ctrl/Cmd+K\r\n  useState(() => {\r\n    const down = (e: KeyboardEvent) => {\r\n      if (e.key === 'k' && (e.metaKey || e.ctrlKey)) {\r\n        e.preventDefault();\r\n        setCommandOpen((open) => !open);\r\n      }\r\n    };\r\n\r\n    document.addEventListener('keydown', down);\r\n    return () => document.removeEventListener('keydown', down);\r\n  });\r\n\r\n  return (\r\n    <div \r\n      className=\"flex h-screen overflow-hidden bg-background\"\r\n      data-mcp-component=\"app-shell\"\r\n      data-mcp-version=\"1.0.0\"\r\n    >\r\n      {/* Sidebar - Dom├ñnen-Navigation */}\r\n      <Sidebar \r\n        collapsed={sidebarCollapsed} \r\n        onToggle={() => setSidebarCollapsed(!sidebarCollapsed)}\r\n      />\r\n\r\n      {/* Main Content Area */}\r\n      <div className=\"flex flex-1 flex-col overflow-hidden\">\r\n        {/* Top-Bar - Suche, Ask VALEO, User */}\r\n        <TopBar onCommandOpen={() => setCommandOpen(true)} />\r\n\r\n        {/* Page Content (mit PageHeader + Toolbar) */}\r\n        <main \r\n          className=\"flex-1 overflow-y-auto overflow-x-hidden\"\r\n          role=\"main\"\r\n          aria-label=\"Main content\"\r\n        >\r\n          {children}\r\n        </main>\r\n      </div>\r\n\r\n      {/* Command Palette - Ctrl/Cmd+K */}\r\n      <CommandPalette \r\n        open={commandOpen}\r\n        onOpenChange={setCommandOpen}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n\r\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\Jochen\\VALEO-NeuroERP-3.0\\packages\\frontend-web\\src\\components\\navigation\\CommandPalette.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'useEffect' is defined but never used. Allowed unused vars must match /^_/u.","line":13,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":13,"endColumn":19},{"ruleId":"no-unused-vars","severity":1,"message":"'useEffect' is defined but never used. Allowed unused vars must match /^_/u.","line":13,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":13,"endColumn":19},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Search' is defined but never used. Allowed unused vars must match /^_/u.","line":30,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":30,"endColumn":9},{"ruleId":"no-unused-vars","severity":1,"message":"'Search' is defined but never used. Allowed unused vars must match /^_/u.","line":30,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":30,"endColumn":9},{"ruleId":"no-redeclare","severity":2,"message":"'Command' is already defined.","line":64,"column":11,"nodeType":"Identifier","messageId":"redeclared","endLine":64,"endColumn":18},{"ruleId":"no-undef","severity":2,"message":"'React' is not defined.","line":68,"column":9,"nodeType":"Identifier","messageId":"undef","endLine":68,"endColumn":14},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":79,"column":8,"nodeType":"FunctionDeclaration","messageId":"missingReturnType","endLine":79,"endColumn":31},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":79,"column":8,"nodeType":"FunctionDeclaration","messageId":"missingReturnType","endLine":79,"endColumn":31},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":190,"column":7,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":190,"endColumn":15},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":192,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":192,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[5090,5154],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"@typescript-eslint/strict-boolean-expressions","severity":1,"message":"Unexpected object value in conditional. The condition is always true.","line":212,"column":10,"nodeType":"MemberExpression","messageId":"conditionErrorObject","endLine":212,"endColumn":27}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":9,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * Command Palette - Herzst├╝ck der modernen Navigation\r\n * Ersetzt Ribbon-Overload durch beschreibbare Aktionen\r\n * \r\n * Features:\r\n * - Ctrl/Cmd+K zum ├ûffnen\r\n * - Fuzzy-Search ├╝ber alle Aktionen\r\n * - Kategorisiert nach Dom├ñne\r\n * - Keyboard-Navigation\r\n * - MCP-Ready f├╝r AI-Integration\r\n */\r\n\r\nimport { useEffect, useState } from 'react';\r\nimport {\r\n  Command,\r\n  CommandDialog,\r\n  CommandEmpty,\r\n  CommandGroup,\r\n  CommandInput,\r\n  CommandItem,\r\n  CommandList,\r\n  CommandSeparator,\r\n} from '@/components/ui/command';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport {\r\n  Calculator,\r\n  FileText,\r\n  HelpCircle,\r\n  Package,\r\n  Search,\r\n  Settings,\r\n  ShoppingCart,\r\n  Users,\r\n} from 'lucide-react';\r\nimport { createMCPMetadata } from '@/design/mcp-schemas/component-metadata';\r\n\r\ninterface CommandPaletteProps {\r\n  open: boolean;\r\n  onOpenChange: (open: boolean) => void;\r\n}\r\n\r\n// MCP-Metadaten f├╝r Command Palette\r\nexport const commandPaletteMCP = createMCPMetadata('CommandPalette', 'navigation', {\r\n  accessibility: {\r\n    role: 'dialog',\r\n    ariaLabel: 'Command palette for quick navigation',\r\n    keyboardShortcuts: ['Ctrl+K', 'Cmd+K', 'Escape'],\r\n    focusable: true,\r\n  },\r\n  intent: {\r\n    purpose: 'Quick access to all system functions via search',\r\n    userActions: ['search', 'select', 'navigate'],\r\n    businessDomain: 'core',\r\n  },\r\n  mcpHints: {\r\n    autoFillable: true,       // AI kann Suchbegriff vorschlagen\r\n    explainable: true,         // AI kann verf├╝gbare Commands erkl├ñren\r\n    testable: true,\r\n    contextAware: true,        // Kontext-abh├ñngige Vorschl├ñge\r\n  },\r\n});\r\n\r\n// Command-Registry (MCP-ready)\r\ninterface Command {\r\n  id: string;\r\n  label: string;\r\n  keywords: string[];\r\n  icon: React.ComponentType<{ className?: string }>;\r\n  action: () => void;\r\n  category: string;\r\n  // MCP-Metadaten\r\n  mcp?: {\r\n    intent: string;\r\n    businessDomain: string;\r\n    requiredScopes?: string[];\r\n  };\r\n}\r\n\r\nexport function CommandPalette({ open, onOpenChange }: CommandPaletteProps) {\r\n  const navigate = useNavigate();\r\n  const [search, setSearch] = useState('');\r\n\r\n  // Command-Registry mit MCP-Metadaten\r\n  const commands: Command[] = [\r\n    // Sales\r\n    {\r\n      id: 'sales-order-new',\r\n      label: 'Neuer Verkaufsauftrag',\r\n      keywords: ['sales', 'order', 'so', 'auftrag', 'neu'],\r\n      icon: ShoppingCart,\r\n      category: 'Sales',\r\n      action: () => navigate('/sales/orders/new'),\r\n      mcp: {\r\n        intent: 'create-sales-order',\r\n        businessDomain: 'sales',\r\n        requiredScopes: ['sales:write'],\r\n      },\r\n    },\r\n    {\r\n      id: 'sales-delivery-new',\r\n      label: 'Neue Lieferung',\r\n      keywords: ['sales', 'delivery', 'lieferung', 'versand'],\r\n      icon: Package,\r\n      category: 'Sales',\r\n      action: () => navigate('/sales/deliveries/new'),\r\n      mcp: {\r\n        intent: 'create-delivery',\r\n        businessDomain: 'sales',\r\n        requiredScopes: ['sales:write'],\r\n      },\r\n    },\r\n    {\r\n      id: 'sales-invoice-new',\r\n      label: 'Neue Rechnung',\r\n      keywords: ['sales', 'invoice', 'rechnung', 'faktura'],\r\n      icon: FileText,\r\n      category: 'Sales',\r\n      action: () => navigate('/sales/invoices/new'),\r\n      mcp: {\r\n        intent: 'create-invoice',\r\n        businessDomain: 'sales',\r\n        requiredScopes: ['sales:write'],\r\n      },\r\n    },\r\n\r\n    // Inventory\r\n    {\r\n      id: 'inventory-adjust',\r\n      label: 'Bestandskorrektur',\r\n      keywords: ['inventory', 'bestand', 'korrektur', 'adjust'],\r\n      icon: Package,\r\n      category: 'Lager',\r\n      action: () => navigate('/inventory/adjust'),\r\n      mcp: {\r\n        intent: 'adjust-inventory',\r\n        businessDomain: 'inventory',\r\n      },\r\n    },\r\n\r\n    // Finance\r\n    {\r\n      id: 'finance-booking',\r\n      label: 'Buchung erfassen',\r\n      keywords: ['finance', 'buchung', 'fibu', 'booking'],\r\n      icon: Calculator,\r\n      category: 'Finanzen',\r\n      action: () => navigate('/finance/bookings/new'),\r\n      mcp: {\r\n        intent: 'create-booking',\r\n        businessDomain: 'finance',\r\n      },\r\n    },\r\n\r\n    // Customers\r\n    {\r\n      id: 'customers-list',\r\n      label: 'Kunden anzeigen',\r\n      keywords: ['customers', 'kunden', 'debitor'],\r\n      icon: Users,\r\n      category: 'Stammdaten',\r\n      action: () => navigate('/customers'),\r\n      mcp: {\r\n        intent: 'view-customers',\r\n        businessDomain: 'master-data',\r\n      },\r\n    },\r\n\r\n    // Settings\r\n    {\r\n      id: 'settings',\r\n      label: 'Einstellungen',\r\n      keywords: ['settings', 'einstellungen', 'config'],\r\n      icon: Settings,\r\n      category: 'System',\r\n      action: () => navigate('/settings'),\r\n      mcp: {\r\n        intent: 'configure-system',\r\n        businessDomain: 'admin',\r\n        requiredScopes: ['admin:all'],\r\n      },\r\n    },\r\n\r\n    // Help (MCP-Integration Beispiel)\r\n    {\r\n      id: 'help-ai',\r\n      label: 'Ask VALEO (AI-Hilfe)',\r\n      keywords: ['help', 'hilfe', 'ai', 'ask', 'frage'],\r\n      icon: HelpCircle,\r\n      category: 'Hilfe',\r\n      action: () => {\r\n        // Phase 3: ├ûffnet AI-Chat-Interface\r\n        console.log('AI-Hilfe wird in Phase 3 aktiviert (MCP-Browser)');\r\n      },\r\n      mcp: {\r\n        intent: 'ai-assistance',\r\n        businessDomain: 'help',\r\n      },\r\n    },\r\n  ];\r\n\r\n  // Fuzzy-Search (einfache Implementation)\r\n  const filteredCommands = commands.filter((cmd) => {\r\n    const searchLower = search.toLowerCase();\r\n    return (\r\n      cmd.label.toLowerCase().includes(searchLower) ||\r\n      cmd.keywords.some((kw) => kw.includes(searchLower))\r\n    );\r\n  });\r\n\r\n  // Gruppiere nach Kategorie\r\n  const groupedCommands = filteredCommands.reduce((acc, cmd) => {\r\n    if (!acc[cmd.category]) {\r\n      acc[cmd.category] = [];\r\n    }\r\n    acc[cmd.category].push(cmd);\r\n    return acc;\r\n  }, {} as Record<string, Command[]>);\r\n\r\n  return (\r\n    <CommandDialog \r\n      open={open} \r\n      onOpenChange={onOpenChange}\r\n      // MCP-Metadaten\r\n      aria-label=\"Command palette\"\r\n      data-mcp-component=\"command-palette\"\r\n    >\r\n      <CommandInput \r\n        placeholder=\"Aktion suchen... (z.B. 'Auftrag', 'Buchung')\" \r\n        value={search}\r\n        onValueChange={setSearch}\r\n      />\r\n      <CommandList>\r\n        <CommandEmpty>\r\n          Keine Aktionen gefunden.\r\n          <div className=\"mt-2 text-xs text-muted-foreground\">\r\n            Tipp: Versuche allgemeinere Begriffe wie \"Auftrag\" oder \"Kunde\"\r\n          </div>\r\n        </CommandEmpty>\r\n\r\n        {Object.entries(groupedCommands).map(([category, cmds], idx) => (\r\n          <div key={category}>\r\n            {idx > 0 && <CommandSeparator />}\r\n            <CommandGroup heading={category}>\r\n              {cmds.map((cmd) => {\r\n                const Icon = cmd.icon;\r\n                return (\r\n                  <CommandItem\r\n                    key={cmd.id}\r\n                    value={cmd.label}\r\n                    keywords={cmd.keywords}\r\n                    onSelect={() => {\r\n                      cmd.action();\r\n                      onOpenChange(false);\r\n                    }}\r\n                    // MCP-Metadaten f├╝r einzelne Actions\r\n                    data-mcp-action={cmd.id}\r\n                    data-mcp-intent={cmd.mcp?.intent}\r\n                    data-mcp-domain={cmd.mcp?.businessDomain}\r\n                  >\r\n                    <Icon className=\"mr-2 h-4 w-4\" />\r\n                    <span>{cmd.label}</span>\r\n                    {cmd.mcp?.requiredScopes && (\r\n                      <span className=\"ml-auto text-xs text-muted-foreground\">\r\n                        {cmd.mcp.requiredScopes[0]}\r\n                      </span>\r\n                    )}\r\n                  </CommandItem>\r\n                );\r\n              })}\r\n            </CommandGroup>\r\n          </div>\r\n        ))}\r\n\r\n        {/* MCP-Integration Hinweis (Phase 3) */}\r\n        {search.includes('ai') || search.includes('help') && (\r\n          <>\r\n            <CommandSeparator />\r\n            <CommandGroup heading=\"­ƒÆí Tipp\">\r\n              <CommandItem disabled>\r\n                <HelpCircle className=\"mr-2 h-4 w-4\" />\r\n                <span className=\"text-xs\">\r\n                  AI-Assistenz kommt in Phase 3 (MCP-Browser)\r\n                </span>\r\n              </CommandItem>\r\n            </CommandGroup>\r\n          </>\r\n        )}\r\n      </CommandList>\r\n    </CommandDialog>\r\n  );\r\n}\r\n\r\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\Jochen\\VALEO-NeuroERP-3.0\\packages\\frontend-web\\src\\components\\navigation\\PageToolbar.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":78,"column":8,"nodeType":"FunctionDeclaration","messageId":"missingReturnType","endLine":78,"endColumn":28},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":78,"column":8,"nodeType":"FunctionDeclaration","messageId":"missingReturnType","endLine":78,"endColumn":28},{"ruleId":"@typescript-eslint/strict-boolean-expressions","severity":1,"message":"Unexpected nullable string value in conditional. Please handle the nullish/empty cases explicitly.","line":100,"column":12,"nodeType":"Identifier","messageId":"conditionErrorNullableString","endLine":100,"endColumn":20,"suggestions":[{"messageId":"conditionFixCompareNullish","fix":{"range":[2700,2708],"text":"(subtitle != null)"},"desc":"Change condition to check for null/undefined (`value != null`)"},{"messageId":"conditionFixDefaultEmptyString","fix":{"range":[2700,2708],"text":"(subtitle ?? \"\")"},"desc":"Explicitly treat nullish value the same as an empty string (`value ?? \"\"`)"},{"messageId":"conditionFixCastBoolean","fix":{"range":[2700,2708],"text":"(Boolean(subtitle))"},"desc":"Explicitly cast value to a boolean (`Boolean(value)`)"}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":113,"column":41,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":113,"endColumn":43,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[3133,3135],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/strict-boolean-expressions","severity":1,"message":"Unexpected nullable string value in conditional. Please handle the nullish/empty cases explicitly.","line":121,"column":24,"nodeType":"MemberExpression","messageId":"conditionErrorNullableString","endLine":121,"endColumn":39,"suggestions":[{"messageId":"conditionFixCompareNullish","fix":{"range":[3460,3475],"text":"(action.shortcut != null)"},"desc":"Change condition to check for null/undefined (`value != null`)"},{"messageId":"conditionFixDefaultEmptyString","fix":{"range":[3460,3475],"text":"(action.shortcut ?? \"\")"},"desc":"Explicitly treat nullish value the same as an empty string (`value ?? \"\"`)"},{"messageId":"conditionFixCastBoolean","fix":{"range":[3460,3475],"text":"(Boolean(action.shortcut))"},"desc":"Explicitly cast value to a boolean (`Boolean(value)`)"}]},{"ruleId":"@typescript-eslint/strict-boolean-expressions","severity":1,"message":"Unexpected nullable string value in conditional. Please handle the nullish/empty cases explicitly.","line":125,"column":18,"nodeType":"MemberExpression","messageId":"conditionErrorNullableString","endLine":125,"endColumn":33,"suggestions":[{"messageId":"conditionFixCompareNullish","fix":{"range":[3661,3676],"text":"(action.shortcut != null)"},"desc":"Change condition to check for null/undefined (`value != null`)"},{"messageId":"conditionFixDefaultEmptyString","fix":{"range":[3661,3676],"text":"(action.shortcut ?? \"\")"},"desc":"Explicitly treat nullish value the same as an empty string (`value ?? \"\"`)"},{"messageId":"conditionFixCastBoolean","fix":{"range":[3661,3676],"text":"(Boolean(action.shortcut))"},"desc":"Explicitly cast value to a boolean (`Boolean(value)`)"}]},{"ruleId":"@typescript-eslint/strict-boolean-expressions","severity":1,"message":"Unexpected nullable string value in conditional. Please handle the nullish/empty cases explicitly.","line":163,"column":22,"nodeType":"MemberExpression","messageId":"conditionErrorNullableString","endLine":163,"endColumn":37,"suggestions":[{"messageId":"conditionFixCompareNullish","fix":{"range":[5148,5163],"text":"(action.shortcut != null)"},"desc":"Change condition to check for null/undefined (`value != null`)"},{"messageId":"conditionFixDefaultEmptyString","fix":{"range":[5148,5163],"text":"(action.shortcut ?? \"\")"},"desc":"Explicitly treat nullish value the same as an empty string (`value ?? \"\"`)"},{"messageId":"conditionFixCastBoolean","fix":{"range":[5148,5163],"text":"(Boolean(action.shortcut))"},"desc":"Explicitly cast value to a boolean (`Boolean(value)`)"}]},{"ruleId":"@typescript-eslint/strict-boolean-expressions","severity":1,"message":"Unexpected value in conditional. A boolean expression is required.","line":176,"column":10,"nodeType":"Identifier","messageId":"conditionErrorOther","endLine":176,"endColumn":19}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":8,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * PageToolbar - Kontextuelle Toolbar (kein Ribbon!)\r\n * Zeigt nur relevante Aktionen f├╝r aktuelle Seite\r\n * \r\n * Features:\r\n * - Prim├ñraktionen (2-4) direkt sichtbar\r\n * - Rest im Overflow-Menu (Ôï»)\r\n * - Responsive (stacked auf Mobile)\r\n * - Keyboard-Shortcuts\r\n * - MCP-Metadaten f├╝r AI-Assistenz\r\n */\r\n\r\nimport { ReactNode } from 'react';\r\nimport { Button } from '@/components/ui/button';\r\nimport {\r\n  DropdownMenu,\r\n  DropdownMenuContent,\r\n  DropdownMenuItem,\r\n  DropdownMenuSeparator,\r\n  DropdownMenuTrigger,\r\n} from '@/components/ui/dropdown-menu';\r\nimport { MoreHorizontal } from 'lucide-react';\r\nimport { createMCPMetadata } from '@/design/mcp-schemas/component-metadata';\r\n\r\nexport interface ToolbarAction {\r\n  id: string;\r\n  label: string;\r\n  icon?: ReactNode;\r\n  onClick: () => void;\r\n  variant?: 'default' | 'destructive' | 'outline' | 'secondary';\r\n  disabled?: boolean;\r\n  shortcut?: string;\r\n  // MCP-Metadaten\r\n  mcp?: {\r\n    intent: string;\r\n    requiresConfirmation?: boolean;\r\n    requiredData?: string[];\r\n  };\r\n}\r\n\r\ninterface PageToolbarProps {\r\n  title: string;\r\n  subtitle?: string;\r\n  // Prim├ñraktionen (max 3-4)\r\n  primaryActions?: ToolbarAction[];\r\n  // Overflow-Aktionen (Ôï»-Menu)\r\n  overflowActions?: ToolbarAction[];\r\n  // Rechts-Slot (z.B. Status-Badge)\r\n  rightSlot?: ReactNode;\r\n  // MCP-Context f├╝r Page\r\n  mcpContext?: {\r\n    pageDomain: string;\r\n    currentDocument?: string;\r\n    availableActions: string[];\r\n  };\r\n}\r\n\r\n// MCP-Metadaten f├╝r PageToolbar\r\nexport const pageToolbarMCP = createMCPMetadata('PageToolbar', 'navigation', {\r\n  accessibility: {\r\n    role: 'toolbar',\r\n    ariaLabel: 'Page actions toolbar',\r\n    focusable: true,\r\n  },\r\n  intent: {\r\n    purpose: 'Provide contextual actions for current page',\r\n    userActions: ['click-action', 'open-overflow'],\r\n    dataContext: ['current-page', 'user-permissions'],\r\n  },\r\n  mcpHints: {\r\n    autoFillable: false,\r\n    explainable: true,\r\n    testable: true,\r\n    contextAware: true,\r\n  },\r\n});\r\n\r\nexport function PageToolbar({\r\n  title,\r\n  subtitle,\r\n  primaryActions = [],\r\n  overflowActions = [],\r\n  rightSlot,\r\n  mcpContext,\r\n}: PageToolbarProps) {\r\n  return (\r\n    <div \r\n      className=\"sticky top-0 z-10 border-b bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60\"\r\n      role=\"toolbar\"\r\n      aria-label={`${title} toolbar`}\r\n      data-mcp-component=\"page-toolbar\"\r\n      data-mcp-page-domain={mcpContext?.pageDomain}\r\n    >\r\n      <div className=\"flex h-16 items-center gap-4 px-6\">\r\n        {/* Titel & Subtitle */}\r\n        <div className=\"flex-1\">\r\n          <h1 className=\"text-xl font-semibold tracking-tight\">\r\n            {title}\r\n          </h1>\r\n          {subtitle && (\r\n            <p className=\"text-sm text-muted-foreground\">\r\n              {subtitle}\r\n            </p>\r\n          )}\r\n        </div>\r\n\r\n        {/* Prim├ñraktionen (2-4 Buttons) */}\r\n        {primaryActions.length > 0 && (\r\n          <div className=\"flex items-center gap-2\">\r\n            {primaryActions.map((action) => (\r\n              <Button\r\n                key={action.id}\r\n                variant={action.variant || 'default'}\r\n                onClick={action.onClick}\r\n                disabled={action.disabled}\r\n                size=\"sm\"\r\n                // MCP-Metadaten\r\n                data-mcp-action={action.id}\r\n                data-mcp-intent={action.mcp?.intent}\r\n                aria-label={action.label}\r\n                title={action.shortcut ? `${action.label} (${action.shortcut})` : action.label}\r\n              >\r\n                {action.icon}\r\n                <span className=\"ml-2\">{action.label}</span>\r\n                {action.shortcut && (\r\n                  <kbd className=\"ml-2 hidden rounded bg-muted px-1 text-xs lg:inline\">\r\n                    {action.shortcut}\r\n                  </kbd>\r\n                )}\r\n              </Button>\r\n            ))}\r\n          </div>\r\n        )}\r\n\r\n        {/* Overflow-Menu (Ôï») */}\r\n        {overflowActions.length > 0 && (\r\n          <DropdownMenu>\r\n            <DropdownMenuTrigger asChild>\r\n              <Button \r\n                variant=\"ghost\" \r\n                size=\"icon\"\r\n                aria-label=\"More actions\"\r\n              >\r\n                <MoreHorizontal className=\"h-4 w-4\" />\r\n              </Button>\r\n            </DropdownMenuTrigger>\r\n            <DropdownMenuContent align=\"end\" className=\"w-56\">\r\n              {overflowActions.map((action, idx) => (\r\n                <div key={action.id}>\r\n                  {idx > 0 && action.variant === 'destructive' && (\r\n                    <DropdownMenuSeparator />\r\n                  )}\r\n                  <DropdownMenuItem\r\n                    onClick={action.onClick}\r\n                    disabled={action.disabled}\r\n                    className={action.variant === 'destructive' ? 'text-destructive' : ''}\r\n                    // MCP-Metadaten\r\n                    data-mcp-action={action.id}\r\n                    data-mcp-intent={action.mcp?.intent}\r\n                  >\r\n                    {action.icon}\r\n                    <span className=\"ml-2\">{action.label}</span>\r\n                    {action.shortcut && (\r\n                      <kbd className=\"ml-auto text-xs\">\r\n                        {action.shortcut}\r\n                      </kbd>\r\n                    )}\r\n                  </DropdownMenuItem>\r\n                </div>\r\n              ))}\r\n            </DropdownMenuContent>\r\n          </DropdownMenu>\r\n        )}\r\n\r\n        {/* Rechts-Slot (z.B. Status-Badge) */}\r\n        {rightSlot && (\r\n          <div className=\"flex items-center\">\r\n            {rightSlot}\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n/**\r\n * Beispiel-Usage:\r\n * \r\n * <PageToolbar\r\n *   title=\"Verkaufsauftr├ñge\"\r\n *   subtitle=\"Alle offenen Auftr├ñge\"\r\n *   primaryActions={[\r\n *     {\r\n *       id: 'new-order',\r\n *       label: 'Neuer Auftrag',\r\n *       icon: <Plus />,\r\n *       onClick: () => navigate('/sales/orders/new'),\r\n *       variant: 'default',\r\n *       shortcut: 'Ctrl+N',\r\n *       mcp: {\r\n *         intent: 'create-sales-order',\r\n *       },\r\n *     },\r\n *     {\r\n *       id: 'export',\r\n *       label: 'Exportieren',\r\n *       icon: <Download />,\r\n *       onClick: handleExport,\r\n *       variant: 'outline',\r\n *       mcp: {\r\n *         intent: 'export-data',\r\n *         requiredData: ['selection'],\r\n *       },\r\n *     },\r\n *   ]}\r\n *   overflowActions={[\r\n *     {\r\n *       id: 'import',\r\n *       label: 'Importieren',\r\n *       onClick: handleImport,\r\n *     },\r\n *     {\r\n *       id: 'archive',\r\n *       label: 'Archivieren',\r\n *       onClick: handleArchive,\r\n *       variant: 'destructive',\r\n *     },\r\n *   ]}\r\n *   mcpContext={{\r\n *     pageDomain: 'sales',\r\n *     availableActions: ['create', 'export', 'import'],\r\n *   }}\r\n * />\r\n */\r\n\r\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\Jochen\\VALEO-NeuroERP-3.0\\packages\\frontend-web\\src\\components\\navigation\\Sidebar.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":121,"column":8,"nodeType":"FunctionDeclaration","messageId":"missingReturnType","endLine":121,"endColumn":24},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":121,"column":8,"nodeType":"FunctionDeclaration","messageId":"missingReturnType","endLine":121,"endColumn":24}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * Sidebar - Dom├ñnen-Navigation (kein Ribbon!)\r\n * Zeigt Hauptbereiche des ERP-Systems\r\n * \r\n * Features:\r\n * - Collapsible (Platz sparen)\r\n * - Icon + Label (oder nur Icon wenn collapsed)\r\n * - Aktive Page hervorgehoben\r\n * - Keyboard-Navigation\r\n * - MCP-Metadaten\r\n */\r\n\r\nimport { NavLink } from 'react-router-dom';\r\nimport { cn } from '@/lib/utils';\r\nimport {\n  BarChart3,\n  Calculator,\n  ChevronLeft,\n  ChevronRight,\n  FileText,\n  LayoutDashboard,\n  Package,\n  Scale,\n  ScrollText,\n  Settings,\n  ShieldCheck,\n  ShoppingCart,\n} from 'lucide-react';\nimport { Button } from '@/components/ui/button';\r\nimport { createMCPMetadata } from '@/design/mcp-schemas/component-metadata';\r\n\r\ninterface SidebarProps {\r\n  collapsed: boolean;\r\n  onToggle: () => void;\r\n}\r\n\r\n// Navigation-Items mit MCP-Metadaten\r\nconst navItems = [\n  {\n    id: 'dashboard',\n    label: 'Dashboard',\n    icon: LayoutDashboard,\n    path: '/',\n    mcp: { businessDomain: 'core', scope: 'core:read' },\n  },\n  {\n    id: 'analytics',\n    label: 'Analytics',\n    icon: BarChart3,\n    path: '/analytics',\n    mcp: { businessDomain: 'analytics', scope: 'analytics:read' },\n  },\n  {\n    id: 'sales',\n    label: 'Verkauf',\n    icon: ShoppingCart,\n    path: '/sales',\n    mcp: { businessDomain: 'sales', scope: 'sales:read' },\n  },\n  {\n    id: 'inventory',\n    label: 'Lager',\n    icon: Package,\n    path: '/inventory',\n    mcp: { businessDomain: 'inventory', scope: 'inventory:read' },\n  },\n  {\n    id: 'weighing',\n    label: 'Waagen & Annahme',\n    icon: Scale,\n    path: '/weighing',\n    mcp: { businessDomain: 'logistics', scope: 'logistics:read' },\n  },\n  {\n    id: 'contracts',\n    label: 'Kontrakte',\n    icon: ScrollText,\n    path: '/contracts',\n    mcp: { businessDomain: 'procurement', scope: 'procurement:read' },\n  },\n  {\n    id: 'pricing',\n    label: 'Pricing',\n    icon: Calculator,\n    path: '/pricing',\n    mcp: { businessDomain: 'pricing', scope: 'pricing:read' },\n  },\n  {\n    id: 'documents',\n    label: 'Dokumente',\n    icon: FileText,\n    path: '/document',\n    mcp: { businessDomain: 'documents', scope: 'docs:read' },\n  },\n  {\n    id: 'policies',\n    label: 'Policies',\n    icon: ShieldCheck,\n    path: '/policies',\n    mcp: { businessDomain: 'compliance', scope: 'compliance:read' },\n  },\n];\n\r\nexport const sidebarMCP = createMCPMetadata('Sidebar', 'navigation', {\r\n  accessibility: {\r\n    role: 'navigation',\r\n    ariaLabel: 'Main navigation',\r\n    focusable: true,\r\n  },\r\n  intent: {\r\n    purpose: 'Navigate between ERP domains',\r\n    userActions: ['navigate', 'collapse', 'expand'],\r\n    businessDomain: 'core',\r\n  },\r\n  mcpHints: {\r\n    explainable: true,\r\n    contextAware: true,\r\n  },\r\n});\r\n\r\nexport function Sidebar({ collapsed, onToggle }: SidebarProps) {\r\n  return (\r\n    <aside\r\n      className={cn(\r\n        'relative flex flex-col border-r bg-background transition-all duration-300',\r\n        collapsed ? 'w-16' : 'w-64'\r\n      )}\r\n      role=\"navigation\"\r\n      aria-label=\"Main navigation\"\r\n      data-mcp-component=\"sidebar\"\r\n      data-mcp-collapsed={collapsed}\r\n    >\r\n      {/* Header with Logo */}\r\n      <div className=\"flex h-16 items-center border-b px-4\">\r\n        {!collapsed && (\r\n          <h2 className=\"text-lg font-semibold\">\r\n            VALEO ERP\r\n          </h2>\r\n        )}\r\n        {collapsed && (\r\n          <span className=\"text-lg font-bold\">V</span>\r\n        )}\r\n      </div>\r\n\r\n      {/* Navigation Items */}\r\n      <nav className=\"flex-1 space-y-1 p-2\">\r\n        {navItems.map((item) => {\r\n          const Icon = item.icon;\r\n          return (\r\n            <NavLink\r\n              key={item.id}\r\n              to={item.path}\r\n              className={({ isActive }) =>\r\n                cn(\r\n                  'flex items-center gap-3 rounded-md px-3 py-2 text-sm font-medium transition-colors',\r\n                  'hover:bg-accent hover:text-accent-foreground',\r\n                  'focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring',\r\n                  isActive\r\n                    ? 'bg-accent text-accent-foreground'\r\n                    : 'text-muted-foreground'\r\n                )\r\n              }\r\n              title={collapsed ? item.label : undefined}\r\n              data-mcp-nav-item={item.id}\r\n              data-mcp-domain={item.mcp.businessDomain}\r\n            >\r\n              <Icon className=\"h-5 w-5 flex-shrink-0\" />\r\n              {!collapsed && <span>{item.label}</span>}\r\n            </NavLink>\r\n          );\r\n        })}\r\n      </nav>\r\n\r\n      {/* Footer with Settings + Collapse-Toggle */}\r\n      <div className=\"border-t p-2\">\r\n        {/* Settings */}\r\n        <NavLink\r\n          to=\"/settings\"\r\n          className={({ isActive }) =>\r\n            cn(\r\n              'flex items-center gap-3 rounded-md px-3 py-2 text-sm font-medium transition-colors',\r\n              'hover:bg-accent hover:text-accent-foreground',\r\n              isActive ? 'bg-accent' : 'text-muted-foreground'\r\n            )\r\n          }\r\n          title={collapsed ? 'Einstellungen' : undefined}\r\n        >\r\n          <Settings className=\"h-5 w-5\" />\r\n          {!collapsed && <span>Einstellungen</span>}\r\n        </NavLink>\r\n\r\n        {/* Collapse-Toggle */}\r\n        <Button\r\n          variant=\"ghost\"\r\n          size={collapsed ? 'icon' : 'sm'}\r\n          onClick={onToggle}\r\n          className=\"mt-2 w-full\"\r\n          aria-label={collapsed ? 'Sidebar erweitern' : 'Sidebar einklappen'}\r\n        >\r\n          {collapsed ? (\r\n            <ChevronRight className=\"h-4 w-4\" />\r\n          ) : (\r\n            <>\r\n              <ChevronLeft className=\"h-4 w-4\" />\r\n              <span className=\"ml-2\">Einklappen</span>\r\n            </>\r\n          )}\r\n        </Button>\r\n      </div>\r\n    </aside>\r\n  );\r\n}\r\n\r\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\Jochen\\VALEO-NeuroERP-3.0\\packages\\frontend-web\\src\\components\\navigation\\TopBar.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":43,"column":8,"nodeType":"FunctionDeclaration","messageId":"missingReturnType","endLine":43,"endColumn":23},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":43,"column":8,"nodeType":"FunctionDeclaration","messageId":"missingReturnType","endLine":43,"endColumn":23}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * TopBar - Globale Header-Leiste\r\n * Kein Ribbon! Nur Essentials:\r\n * - Global-Search\r\n * - Command-Palette-Trigger\r\n * - Ask VALEO (AI) - Phase 3\r\n * - User-Menu\r\n */\r\n\r\nimport { Button } from '@/components/ui/button';\r\nimport {\r\n  DropdownMenu,\r\n  DropdownMenuContent,\r\n  DropdownMenuItem,\r\n  DropdownMenuLabel,\r\n  DropdownMenuSeparator,\r\n  DropdownMenuTrigger,\r\n} from '@/components/ui/dropdown-menu';\r\nimport { Command as CommandIcon, HelpCircle, LogOut, Search, Settings, Sparkles, User } from 'lucide-react';\nimport { createMCPMetadata } from '@/design/mcp-schemas/component-metadata';\r\n\r\ninterface TopBarProps {\r\n  onCommandOpen: () => void;\r\n}\r\n\r\nexport const topBarMCP = createMCPMetadata('TopBar', 'navigation', {\r\n  accessibility: {\r\n    role: 'banner',\r\n    ariaLabel: 'Top navigation bar',\r\n    keyboardShortcuts: ['Ctrl+K', '/'],\r\n  },\r\n  intent: {\r\n    purpose: 'Global search and user actions',\r\n    userActions: ['search', 'open-command-palette', 'user-menu'],\r\n    businessDomain: 'core',\r\n  },\r\n  mcpHints: {\r\n    explainable: true,\r\n    contextAware: true,\r\n  },\r\n});\r\n\r\nexport function TopBar({ onCommandOpen }: TopBarProps) {\r\n  // Simulated user (replace with useAuth())\r\n  const user = {\r\n    name: 'Test Admin',\r\n    email: 'test-admin@valeo.local',\r\n  };\r\n\r\n  return (\r\n    <header\r\n      className=\"flex h-16 items-center gap-4 border-b bg-background px-6\"\r\n      role=\"banner\"\r\n      data-mcp-component=\"top-bar\"\r\n    >\r\n      {/* Global Search (├Âffnet Command Palette) */}\r\n      <div className=\"flex-1 max-w-md\">\r\n        <Button\r\n          variant=\"outline\"\r\n          className=\"w-full justify-start text-muted-foreground\"\r\n          onClick={onCommandOpen}\r\n        >\r\n          <Search className=\"mr-2 h-4 w-4\" />\r\n          <span>Suche... (Ctrl+K)</span>\r\n          <kbd className=\"ml-auto hidden rounded bg-muted px-2 py-0.5 text-xs lg:inline\">\r\n            <CommandIcon className=\"h-3 w-3\" />K\r\n          </kbd>\r\n        </Button>\r\n      </div>\r\n\r\n      {/* Ask VALEO - AI-Assistenz (Phase 3) */}\r\n      <Button\r\n        variant=\"ghost\"\r\n        size=\"icon\"\r\n        title=\"Ask VALEO - AI-Hilfe (Phase 3)\"\r\n        data-mcp-action=\"ask-valeo\"\r\n        data-mcp-intent=\"ai-assistance\"\r\n      >\r\n        <Sparkles className=\"h-5 w-5 text-primary\" />\r\n        <span className=\"sr-only\">AI-Hilfe</span>\r\n      </Button>\r\n\r\n      {/* Help */}\r\n      <Button\r\n        variant=\"ghost\"\r\n        size=\"icon\"\r\n        title=\"Hilfe\"\r\n      >\r\n        <HelpCircle className=\"h-5 w-5\" />\r\n        <span className=\"sr-only\">Hilfe</span>\r\n      </Button>\r\n\r\n      {/* User-Menu */}\r\n      <DropdownMenu>\r\n        <DropdownMenuTrigger asChild>\r\n          <Button \r\n            variant=\"ghost\" \r\n            size=\"icon\"\r\n            className=\"rounded-full\"\r\n          >\r\n            <User className=\"h-5 w-5\" />\r\n            <span className=\"sr-only\">User menu</span>\r\n          </Button>\r\n        </DropdownMenuTrigger>\r\n        <DropdownMenuContent align=\"end\" className=\"w-56\">\r\n          <DropdownMenuLabel>\r\n            <div className=\"flex flex-col space-y-1\">\r\n              <p className=\"text-sm font-medium\">{user.name}</p>\r\n              <p className=\"text-xs text-muted-foreground\">{user.email}</p>\r\n            </div>\r\n          </DropdownMenuLabel>\r\n          <DropdownMenuSeparator />\r\n          <DropdownMenuItem>\r\n            <User className=\"mr-2 h-4 w-4\" />\r\n            <span>Profil</span>\r\n          </DropdownMenuItem>\r\n          <DropdownMenuItem>\r\n            <Settings className=\"mr-2 h-4 w-4\" />\r\n            <span>Einstellungen</span>\r\n          </DropdownMenuItem>\r\n          <DropdownMenuSeparator />\r\n          <DropdownMenuItem className=\"text-destructive\">\r\n            <LogOut className=\"mr-2 h-4 w-4\" />\r\n            <span>Abmelden</span>\r\n          </DropdownMenuItem>\r\n        </DropdownMenuContent>\r\n      </DropdownMenu>\r\n    </header>\r\n  );\r\n}\r\n\r\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\Jochen\\VALEO-NeuroERP-3.0\\packages\\frontend-web\\src\\components\\patterns\\ListReport.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":80,"column":8,"nodeType":"FunctionDeclaration","messageId":"missingReturnType","endLine":80,"endColumn":30},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":80,"column":8,"nodeType":"FunctionDeclaration","messageId":"missingReturnType","endLine":80,"endColumn":30},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'selectedRows' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":99,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":99,"endColumn":22},{"ruleId":"no-unused-vars","severity":1,"message":"'selectedRows' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":99,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":99,"endColumn":22},{"ruleId":"@typescript-eslint/strict-boolean-expressions","severity":1,"message":"Unexpected nullable string value in conditional. Please handle the nullish/empty cases explicitly.","line":101,"column":24,"nodeType":"Identifier","messageId":"conditionErrorNullableString","endLine":101,"endColumn":32,"suggestions":[{"messageId":"conditionFixCompareNullish","fix":{"range":[2536,2544],"text":"(titleKey != null)"},"desc":"Change condition to check for null/undefined (`value != null`)"},{"messageId":"conditionFixDefaultEmptyString","fix":{"range":[2536,2544],"text":"(titleKey ?? \"\")"},"desc":"Explicitly treat nullish value the same as an empty string (`value ?? \"\"`)"},{"messageId":"conditionFixCastBoolean","fix":{"range":[2536,2544],"text":"(Boolean(titleKey))"},"desc":"Explicitly cast value to a boolean (`Boolean(value)`)"}]},{"ruleId":"@typescript-eslint/strict-boolean-expressions","severity":1,"message":"Unexpected nullable string value in conditional. Please handle the nullish/empty cases explicitly.","line":102,"column":27,"nodeType":"Identifier","messageId":"conditionErrorNullableString","endLine":102,"endColumn":38,"suggestions":[{"messageId":"conditionFixCompareNullish","fix":{"range":[2595,2606],"text":"(subtitleKey != null)"},"desc":"Change condition to check for null/undefined (`value != null`)"},{"messageId":"conditionFixDefaultEmptyString","fix":{"range":[2595,2606],"text":"(subtitleKey ?? \"\")"},"desc":"Explicitly treat nullish value the same as an empty string (`value ?? \"\"`)"},{"messageId":"conditionFixCastBoolean","fix":{"range":[2595,2606],"text":"(Boolean(subtitleKey))"},"desc":"Explicitly cast value to a boolean (`Boolean(value)`)"}]},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":104,"column":40,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":104,"endColumn":42},{"ruleId":"@typescript-eslint/strict-boolean-expressions","severity":1,"message":"Unexpected nullable string value in conditional. Please handle the nullish/empty cases explicitly.","line":132,"column":30,"nodeType":"Identifier","messageId":"conditionErrorNullableString","endLine":132,"endColumn":47,"suggestions":[{"messageId":"conditionFixCompareNullish","fix":{"range":[3590,3607],"text":"(searchPlaceholder != null)"},"desc":"Change condition to check for null/undefined (`value != null`)"},{"messageId":"conditionFixDefaultEmptyString","fix":{"range":[3590,3607],"text":"(searchPlaceholder ?? \"\")"},"desc":"Explicitly treat nullish value the same as an empty string (`value ?? \"\"`)"},{"messageId":"conditionFixCastBoolean","fix":{"range":[3590,3607],"text":"(Boolean(searchPlaceholder))"},"desc":"Explicitly cast value to a boolean (`Boolean(value)`)"}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":132,"column":48,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":132,"endColumn":50,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[3608,3610],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/strict-boolean-expressions","severity":1,"message":"Unexpected nullable string value in conditional. Please handle the nullish/empty cases explicitly.","line":159,"column":22,"nodeType":"MemberExpression","messageId":"conditionErrorNullableString","endLine":159,"endColumn":37,"suggestions":[{"messageId":"conditionFixCompareNullish","fix":{"range":[4621,4636],"text":"(filter.labelKey != null)"},"desc":"Change condition to check for null/undefined (`value != null`)"},{"messageId":"conditionFixDefaultEmptyString","fix":{"range":[4621,4636],"text":"(filter.labelKey ?? \"\")"},"desc":"Explicitly treat nullish value the same as an empty string (`value ?? \"\"`)"},{"messageId":"conditionFixCastBoolean","fix":{"range":[4621,4636],"text":"(Boolean(filter.labelKey))"},"desc":"Explicitly cast value to a boolean (`Boolean(value)`)"}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":10,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * ListReport - SAP Fiori Pattern\r\n * Use-Case: Liste + Filter + Suche + Actions\r\n * \r\n * Features:\r\n * - DataTable mit Pagination\r\n * - Filter-Bar\r\n * - Toolbar mit Actions\r\n * - Multi-Select\r\n * - Export-Funktion\r\n * - i18n-Support\r\n * - MCP-Metadaten\r\n */\r\n\r\nimport { useState } from 'react';\r\nimport { useTranslation } from 'react-i18next';\r\nimport { PageToolbar, ToolbarAction } from '@/components/navigation/PageToolbar';\r\nimport { ColumnDef, DataTable } from '@/components/ui/data-table';\r\nimport { Input } from '@/components/ui/input';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Search, SlidersHorizontal } from 'lucide-react';\r\nimport { createMCPMetadata } from '@/design/mcp-schemas/component-metadata';\r\n\r\nexport interface ListReportProps<T> {\r\n  // Titel & Beschreibung\r\n  title: string;\r\n  titleKey?: string; // i18n-Key\r\n  subtitle?: string;\r\n  subtitleKey?: string;\r\n  \r\n  // Daten\r\n  data: T[];\r\n  columns: ColumnDef<T>[];\r\n  \r\n  // Actions\r\n  primaryActions?: ToolbarAction[];\r\n  overflowActions?: ToolbarAction[];\r\n  \r\n  // Filter & Suche\r\n  searchPlaceholder?: string;\r\n  onSearch?: (query: string) => void;\r\n  filterOptions?: FilterOption[];\r\n  \r\n  // Features\r\n  selectable?: boolean;\r\n  onSelectionChange?: (selected: T[]) => void;\r\n  \r\n  // MCP\r\n  mcpContext?: {\r\n    domain: string;\r\n    entityType: string;\r\n  };\r\n}\r\n\r\nexport interface FilterOption {\r\n  field: string;\r\n  label: string;\r\n  labelKey?: string;\r\n  type: 'select' | 'date' | 'number' | 'text';\r\n  options?: Array<{ value: string; label: string }>;\r\n}\r\n\r\nexport const listReportMCP = createMCPMetadata('ListReport', 'list', {\r\n  accessibility: {\r\n    role: 'region',\r\n    ariaLabel: 'List report with filters and actions',\r\n  },\r\n  intent: {\r\n    purpose: 'Display and manage list of entities with filters',\r\n    userActions: ['search', 'filter', 'select', 'export', 'create'],\r\n  },\r\n  mcpHints: {\r\n    autoFillable: true,\r\n    explainable: true,\r\n    testable: true,\r\n    contextAware: true,\r\n  },\r\n});\r\n\r\nexport function ListReport<T>({\r\n  title,\r\n  titleKey,\r\n  subtitle,\r\n  subtitleKey,\r\n  data,\r\n  columns,\r\n  primaryActions,\r\n  overflowActions,\r\n  searchPlaceholder,\r\n  onSearch,\r\n  filterOptions,\r\n  selectable = false,\r\n  onSelectionChange,\r\n  mcpContext,\r\n}: ListReportProps<T>) {\r\n  const { t } = useTranslation();\r\n  const [searchQuery, setSearchQuery] = useState('');\r\n  const [showFilters, setShowFilters] = useState(false);\r\n  const [selectedRows, setSelectedRows] = useState<T[]>([]);\r\n\r\n  const displayTitle = titleKey ? t(titleKey) : title;\r\n  const displaySubtitle = subtitleKey ? t(subtitleKey) : subtitle;\r\n\r\n  const handleSearch = (query: string) => {\r\n    setSearchQuery(query);\r\n    onSearch?.(query);\r\n  };\r\n\r\n  return (\r\n    <div\r\n      className=\"flex flex-col h-full\"\r\n      data-mcp-pattern=\"list-report\"\r\n      data-mcp-entity={mcpContext?.entityType}\r\n    >\r\n      {/* Toolbar (SAP Fiori Pattern) */}\r\n      <PageToolbar\r\n        title={displayTitle}\r\n        subtitle={displaySubtitle}\r\n        primaryActions={primaryActions}\r\n        overflowActions={overflowActions}\r\n        mcpContext={mcpContext}\r\n      />\r\n\r\n      <div className=\"flex-1 p-6 space-y-4 overflow-auto\">\r\n        {/* Search & Filter-Bar (SAP Fiori Pattern) */}\r\n        <div className=\"flex gap-4\">\r\n          {/* Search */}\r\n          {onSearch && (\r\n            <div className=\"flex-1 max-w-md relative\">\r\n              <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground\" />\r\n              <Input\r\n                placeholder={searchPlaceholder || t('common.search')}\r\n                value={searchQuery}\r\n                onChange={(e) => handleSearch(e.target.value)}\r\n                className=\"pl-10\"\r\n              />\r\n            </div>\r\n          )}\r\n\r\n          {/* Filter-Toggle */}\r\n          {filterOptions && filterOptions.length > 0 && (\r\n            <Button\r\n              variant=\"outline\"\r\n              onClick={() => setShowFilters(!showFilters)}\r\n            >\r\n              <SlidersHorizontal className=\"mr-2 h-4 w-4\" />\r\n              {t('common.filter')}\r\n            </Button>\r\n          )}\r\n        </div>\r\n\r\n        {/* Filter-Panel (SAP Fiori Pattern - collapsible) */}\r\n        {showFilters && filterOptions && (\r\n          <div className=\"p-4 border rounded-lg bg-muted/50\">\r\n            <div className=\"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-4\">\r\n              {filterOptions.map((filter) => (\r\n                <div key={filter.field}>\r\n                  <label className=\"text-sm font-medium\">\r\n                    {filter.labelKey ? t(filter.labelKey) : filter.label}\r\n                  </label>\r\n                  {/* Filter-Input basierend auf type */}\r\n                  <Input type={filter.type === 'text' ? 'text' : filter.type} />\r\n                </div>\r\n              ))}\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* DataTable (SAP Fiori Pattern) */}\r\n        <DataTable\r\n          columns={columns}\r\n          data={data}\r\n          selectable={selectable}\r\n          onSelectionChange={(rows) => {\r\n            setSelectedRows(rows);\r\n            onSelectionChange?.(rows);\r\n          }}\r\n        />\r\n\r\n        {/* Footer mit Item-Count (SAP Fiori Pattern) */}\r\n        <div className=\"text-sm text-muted-foreground\">\r\n          {t('pattern.listreport.items_count', { count: data.length })}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\Jochen\\VALEO-NeuroERP-3.0\\packages\\frontend-web\\src\\components\\ui\\alert-dialog.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\Jochen\\VALEO-NeuroERP-3.0\\packages\\frontend-web\\src\\components\\ui\\alert.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\Jochen\\VALEO-NeuroERP-3.0\\packages\\frontend-web\\src\\components\\ui\\badge.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":28,"column":1,"nodeType":"FunctionDeclaration","messageId":"missingReturnType","endLine":28,"endColumn":15},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":28,"column":1,"nodeType":"FunctionDeclaration","messageId":"missingReturnType","endLine":28,"endColumn":15},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'className' is defined but never used. Allowed unused args must match /^_/u.","line":28,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":28,"endColumn":27},{"ruleId":"no-unused-vars","severity":1,"message":"'className' is defined but never used. Allowed unused args must match /^_/u.","line":28,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":28,"endColumn":27}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import * as React from \"react\"\r\nimport { type VariantProps, cva } from \"class-variance-authority\"\r\n\r\nconst badgeVariants = cva(\r\n  \"inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2\",\r\n  {\r\n    variants: {\r\n      variant: {\r\n        default:\r\n          \"border-transparent bg-primary text-primary-foreground hover:bg-primary/80\",\r\n        secondary:\r\n          \"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80\",\r\n        destructive:\r\n          \"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80\",\r\n        outline: \"text-foreground\",\r\n      },\r\n    },\r\n    defaultVariants: {\r\n      variant: \"default\",\r\n    },\r\n  }\r\n)\r\n\r\nexport interface BadgeProps\r\n  extends React.HTMLAttributes<HTMLDivElement>,\r\n    VariantProps<typeof badgeVariants> {}\r\n\r\nfunction Badge({ className, variant, ...props }: BadgeProps) {\r\n  return (\r\n    <div className={badgeVariants({ variant })} {...props} />\r\n  )\r\n}\r\n\r\nexport { Badge, badgeVariants }\r\n\r\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\Jochen\\VALEO-NeuroERP-3.0\\packages\\frontend-web\\src\\components\\ui\\button.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\Jochen\\VALEO-NeuroERP-3.0\\packages\\frontend-web\\src\\components\\ui\\card.tsx","messages":[{"ruleId":"@typescript-eslint/strict-boolean-expressions","severity":1,"message":"Unexpected nullable string value in conditional. Please handle the nullish/empty cases explicitly.","line":9,"column":76,"nodeType":"Identifier","messageId":"conditionErrorNullableString","endLine":9,"endColumn":85,"suggestions":[{"messageId":"conditionFixCompareNullish","fix":{"range":[262,271],"text":"(className != null)"},"desc":"Change condition to check for null/undefined (`value != null`)"},{"messageId":"conditionFixDefaultEmptyString","fix":{"range":[262,271],"text":"(className ?? \"\")"},"desc":"Explicitly treat nullish value the same as an empty string (`value ?? \"\"`)"},{"messageId":"conditionFixCastBoolean","fix":{"range":[262,271],"text":"(Boolean(className))"},"desc":"Explicitly cast value to a boolean (`Boolean(value)`)"}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":9,"column":86,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":9,"endColumn":88,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[272,274],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/strict-boolean-expressions","severity":1,"message":"Unexpected nullable string value in conditional. Please handle the nullish/empty cases explicitly.","line":21,"column":49,"nodeType":"Identifier","messageId":"conditionErrorNullableString","endLine":21,"endColumn":58,"suggestions":[{"messageId":"conditionFixCompareNullish","fix":{"range":[544,553],"text":"(className != null)"},"desc":"Change condition to check for null/undefined (`value != null`)"},{"messageId":"conditionFixDefaultEmptyString","fix":{"range":[544,553],"text":"(className ?? \"\")"},"desc":"Explicitly treat nullish value the same as an empty string (`value ?? \"\"`)"},{"messageId":"conditionFixCastBoolean","fix":{"range":[544,553],"text":"(Boolean(className))"},"desc":"Explicitly cast value to a boolean (`Boolean(value)`)"}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":21,"column":59,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":21,"endColumn":61,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[554,556],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/strict-boolean-expressions","severity":1,"message":"Unexpected nullable string value in conditional. Please handle the nullish/empty cases explicitly.","line":33,"column":70,"nodeType":"Identifier","messageId":"conditionErrorNullableString","endLine":33,"endColumn":79,"suggestions":[{"messageId":"conditionFixCompareNullish","fix":{"range":[867,876],"text":"(className != null)"},"desc":"Change condition to check for null/undefined (`value != null`)"},{"messageId":"conditionFixDefaultEmptyString","fix":{"range":[867,876],"text":"(className ?? \"\")"},"desc":"Explicitly treat nullish value the same as an empty string (`value ?? \"\"`)"},{"messageId":"conditionFixCastBoolean","fix":{"range":[867,876],"text":"(Boolean(className))"},"desc":"Explicitly cast value to a boolean (`Boolean(value)`)"}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":33,"column":80,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":33,"endColumn":82,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[877,879],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/strict-boolean-expressions","severity":1,"message":"Unexpected nullable string value in conditional. Please handle the nullish/empty cases explicitly.","line":45,"column":49,"nodeType":"Identifier","messageId":"conditionErrorNullableString","endLine":45,"endColumn":58,"suggestions":[{"messageId":"conditionFixCompareNullish","fix":{"range":[1174,1183],"text":"(className != null)"},"desc":"Change condition to check for null/undefined (`value != null`)"},{"messageId":"conditionFixDefaultEmptyString","fix":{"range":[1174,1183],"text":"(className ?? \"\")"},"desc":"Explicitly treat nullish value the same as an empty string (`value ?? \"\"`)"},{"messageId":"conditionFixCastBoolean","fix":{"range":[1174,1183],"text":"(Boolean(className))"},"desc":"Explicitly cast value to a boolean (`Boolean(value)`)"}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":45,"column":59,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":45,"endColumn":61,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[1184,1186],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/strict-boolean-expressions","severity":1,"message":"Unexpected nullable string value in conditional. Please handle the nullish/empty cases explicitly.","line":55,"column":41,"nodeType":"Identifier","messageId":"conditionErrorNullableString","endLine":55,"endColumn":50,"suggestions":[{"messageId":"conditionFixCompareNullish","fix":{"range":[1448,1457],"text":"(className != null)"},"desc":"Change condition to check for null/undefined (`value != null`)"},{"messageId":"conditionFixDefaultEmptyString","fix":{"range":[1448,1457],"text":"(className ?? \"\")"},"desc":"Explicitly treat nullish value the same as an empty string (`value ?? \"\"`)"},{"messageId":"conditionFixCastBoolean","fix":{"range":[1448,1457],"text":"(Boolean(className))"},"desc":"Explicitly cast value to a boolean (`Boolean(value)`)"}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":55,"column":51,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":55,"endColumn":53,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[1458,1460],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/strict-boolean-expressions","severity":1,"message":"Unexpected nullable string value in conditional. Please handle the nullish/empty cases explicitly.","line":65,"column":46,"nodeType":"Identifier","messageId":"conditionErrorNullableString","endLine":65,"endColumn":55,"suggestions":[{"messageId":"conditionFixCompareNullish","fix":{"range":[1733,1742],"text":"(className != null)"},"desc":"Change condition to check for null/undefined (`value != null`)"},{"messageId":"conditionFixDefaultEmptyString","fix":{"range":[1733,1742],"text":"(className ?? \"\")"},"desc":"Explicitly treat nullish value the same as an empty string (`value ?? \"\"`)"},{"messageId":"conditionFixCastBoolean","fix":{"range":[1733,1742],"text":"(Boolean(className))"},"desc":"Explicitly cast value to a boolean (`Boolean(value)`)"}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":65,"column":56,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":65,"endColumn":58,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[1743,1745],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":12,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import * as React from \"react\"\r\n\r\nconst Card = React.forwardRef<\r\n  HTMLDivElement,\r\n  React.HTMLAttributes<HTMLDivElement>\r\n>(({ className, ...props }, ref) => (\r\n  <div\r\n    ref={ref}\r\n    className={`rounded-lg border bg-card text-card-foreground shadow-sm ${className || ''}`}\r\n    {...props}\r\n  />\r\n))\r\nCard.displayName = \"Card\"\r\n\r\nconst CardHeader = React.forwardRef<\r\n  HTMLDivElement,\r\n  React.HTMLAttributes<HTMLDivElement>\r\n>(({ className, ...props }, ref) => (\r\n  <div\r\n    ref={ref}\r\n    className={`flex flex-col space-y-1.5 p-6 ${className || ''}`}\r\n    {...props}\r\n  />\r\n))\r\nCardHeader.displayName = \"CardHeader\"\r\n\r\nconst CardTitle = React.forwardRef<\r\n  HTMLParagraphElement,\r\n  React.HTMLAttributes<HTMLHeadingElement>\r\n>(({ className, ...props }, ref) => (\r\n  <h3\r\n    ref={ref}\r\n    className={`text-2xl font-semibold leading-none tracking-tight ${className || ''}`}\r\n    {...props}\r\n  />\r\n))\r\nCardTitle.displayName = \"CardTitle\"\r\n\r\nconst CardDescription = React.forwardRef<\r\n  HTMLParagraphElement,\r\n  React.HTMLAttributes<HTMLParagraphElement>\r\n>(({ className, ...props }, ref) => (\r\n  <p\r\n    ref={ref}\r\n    className={`text-sm text-muted-foreground ${className || ''}`}\r\n    {...props}\r\n  />\r\n))\r\nCardDescription.displayName = \"CardDescription\"\r\n\r\nconst CardContent = React.forwardRef<\r\n  HTMLDivElement,\r\n  React.HTMLAttributes<HTMLDivElement>\r\n>(({ className, ...props }, ref) => (\r\n  <div ref={ref} className={`p-6 pt-0 ${className || ''}`} {...props} />\r\n))\r\nCardContent.displayName = \"CardContent\"\r\n\r\nconst CardFooter = React.forwardRef<\r\n  HTMLDivElement,\r\n  React.HTMLAttributes<HTMLDivElement>\r\n>(({ className, ...props }, ref) => (\r\n  <div\r\n    ref={ref}\r\n    className={`flex items-center p-6 pt-0 ${className || ''}`}\r\n    {...props}\r\n  />\r\n))\r\nCardFooter.displayName = \"CardFooter\"\r\n\r\nexport { Card, CardHeader, CardFooter, CardTitle, CardDescription, CardContent }\r\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\Jochen\\VALEO-NeuroERP-3.0\\packages\\frontend-web\\src\\components\\ui\\command.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\Jochen\\VALEO-NeuroERP-3.0\\packages\\frontend-web\\src\\components\\ui\\detail-drawer.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\Jochen\\VALEO-NeuroERP-3.0\\packages\\frontend-web\\src\\components\\ui\\dialog.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\Jochen\\VALEO-NeuroERP-3.0\\packages\\frontend-web\\src\\components\\ui\\dropdown-menu.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\Jochen\\VALEO-NeuroERP-3.0\\packages\\frontend-web\\src\\components\\ui\\input.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\Jochen\\VALEO-NeuroERP-3.0\\packages\\frontend-web\\src\\components\\ui\\label.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\Jochen\\VALEO-NeuroERP-3.0\\packages\\frontend-web\\src\\components\\ui\\popover.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\Jochen\\VALEO-NeuroERP-3.0\\packages\\frontend-web\\src\\components\\ui\\select.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\Jochen\\VALEO-NeuroERP-3.0\\packages\\frontend-web\\src\\components\\ui\\skeleton.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\Jochen\\VALEO-NeuroERP-3.0\\packages\\frontend-web\\src\\components\\ui\\table.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\Jochen\\VALEO-NeuroERP-3.0\\packages\\frontend-web\\src\\components\\ui\\textarea.tsx","messages":[{"ruleId":"@typescript-eslint/strict-boolean-expressions","severity":1,"message":"Unexpected nullable string value in conditional. Please handle the nullish/empty cases explicitly.","line":9,"column":316,"nodeType":"Identifier","messageId":"conditionErrorNullableString","endLine":9,"endColumn":325,"suggestions":[{"messageId":"conditionFixCompareNullish","fix":{"range":[572,581],"text":"(className != null)"},"desc":"Change condition to check for null/undefined (`value != null`)"},{"messageId":"conditionFixDefaultEmptyString","fix":{"range":[572,581],"text":"(className ?? \"\")"},"desc":"Explicitly treat nullish value the same as an empty string (`value ?? \"\"`)"},{"messageId":"conditionFixCastBoolean","fix":{"range":[572,581],"text":"(Boolean(className))"},"desc":"Explicitly cast value to a boolean (`Boolean(value)`)"}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":9,"column":326,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":9,"endColumn":328,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[582,584],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import * as React from \"react\"\r\n\r\nexport type TextareaProps = React.TextareaHTMLAttributes<HTMLTextAreaElement>\r\n\r\nconst Textarea = React.forwardRef<HTMLTextAreaElement, TextareaProps>(\r\n  ({ className, ...props }, ref) => {\r\n    return (\r\n      <textarea\r\n        className={`flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 ${className || ''}`}\r\n        ref={ref}\r\n        {...props}\r\n      />\r\n    )\r\n  }\r\n)\r\nTextarea.displayName = \"Textarea\"\r\n\r\nexport { Textarea }","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\Jochen\\VALEO-NeuroERP-3.0\\packages\\frontend-web\\src\\components\\ui\\toast-provider.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\Jochen\\VALEO-NeuroERP-3.0\\packages\\frontend-web\\src\\components\\ui\\toast.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\Jochen\\VALEO-NeuroERP-3.0\\packages\\frontend-web\\src\\components\\ui\\toaster.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\Jochen\\VALEO-NeuroERP-3.0\\packages\\frontend-web\\src\\components\\ui\\toolbar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\Jochen\\VALEO-NeuroERP-3.0\\packages\\frontend-web\\src\\components\\workflow\\StatusBadge.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":9,"column":8,"nodeType":"FunctionDeclaration","messageId":"missingReturnType","endLine":9,"endColumn":28},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":9,"column":8,"nodeType":"FunctionDeclaration","messageId":"missingReturnType","endLine":9,"endColumn":28}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { Badge } from '@/components/ui/badge'\r\nimport type { WorkflowState } from '@/hooks/useWorkflow'\r\n\r\ninterface StatusBadgeProps {\r\n  status: WorkflowState\r\n  'data-testid'?: string\r\n}\r\n\r\nexport function StatusBadge({ status, 'data-testid': testId }: StatusBadgeProps) {\r\n  const variants: Record<WorkflowState, 'default' | 'secondary' | 'destructive' | 'outline'> = {\r\n    draft: 'outline',\r\n    pending: 'secondary',\r\n    approved: 'default',\r\n    posted: 'default',\r\n    rejected: 'destructive',\r\n  }\r\n\r\n  return (\r\n    <Badge variant={variants[status]} data-testid={testId}>\r\n      {status.toUpperCase()}\r\n    </Badge>\r\n  )\r\n}\r\n\r\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\Jochen\\VALEO-NeuroERP-3.0\\packages\\frontend-web\\src\\features\\alerts\\AlertActions.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\Jochen\\VALEO-NeuroERP-3.0\\packages\\frontend-web\\src\\features\\alerts\\AlertBanner.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\Jochen\\VALEO-NeuroERP-3.0\\packages\\frontend-web\\src\\features\\alerts\\KpiHeatmap.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\Jochen\\VALEO-NeuroERP-3.0\\packages\\frontend-web\\src\\features\\alerts\\actions.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\Jochen\\VALEO-NeuroERP-3.0\\packages\\frontend-web\\src\\features\\alerts\\color.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\Jochen\\VALEO-NeuroERP-3.0\\packages\\frontend-web\\src\\features\\alerts\\rules.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\Jochen\\VALEO-NeuroERP-3.0\\packages\\frontend-web\\src\\features\\alerts\\useKpiAlerts.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\Jochen\\VALEO-NeuroERP-3.0\\packages\\frontend-web\\src\\features\\analytics\\useForecast.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\Jochen\\VALEO-NeuroERP-3.0\\packages\\frontend-web\\src\\features\\contracts\\Contracts.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\Jochen\\VALEO-NeuroERP-3.0\\packages\\frontend-web\\src\\features\\copilot\\AdvisorDock.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\Jochen\\VALEO-NeuroERP-3.0\\packages\\frontend-web\\src\\features\\copilot\\CopilotInsights.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\Jochen\\VALEO-NeuroERP-3.0\\packages\\frontend-web\\src\\features\\copilot\\useCopilotChat.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\Jochen\\VALEO-NeuroERP-3.0\\packages\\frontend-web\\src\\features\\copilot\\useCopilotInsight.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\Jochen\\VALEO-NeuroERP-3.0\\packages\\frontend-web\\src\\features\\dashboard\\Dashboard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\Jochen\\VALEO-NeuroERP-3.0\\packages\\frontend-web\\src\\features\\document\\DropUpload.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\Jochen\\VALEO-NeuroERP-3.0\\packages\\frontend-web\\src\\features\\document\\schema.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\Jochen\\VALEO-NeuroERP-3.0\\packages\\frontend-web\\src\\features\\documents\\ArchivePanel.tsx","messages":[{"ruleId":"@typescript-eslint/no-magic-numbers","severity":1,"message":"No magic number: 10.","line":54,"column":81,"nodeType":"Literal","messageId":"noMagic","endLine":54,"endColumn":83}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import * as React from \"react\"\r\nimport { useEffect, useState } from \"react\"\r\nimport { Card } from \"@/components/ui/card\"\r\n\r\ntype ArchiveEntry = {\r\n  timestamp: string\r\n  ts: number\r\n  user: string\r\n  path: string\r\n  sha256: string\r\n  domain: string\r\n}\r\n\r\ntype Props = {\r\n  domain: string\r\n  number: string\r\n}\r\n\r\n/**\r\n * ArchivePanel - Zeigt Archiv-Historie f├╝r Beleg\r\n */\r\nexport default function ArchivePanel({ domain, number }: Props): JSX.Element {\r\n  const [items, setItems] = useState<ArchiveEntry[]>([])\r\n  const [loading, setLoading] = useState<boolean>(true)\r\n\r\n  useEffect(() => {\r\n    void loadHistory()\r\n  }, [domain, number])\r\n\r\n  async function loadHistory(): Promise<void> {\r\n    try {\r\n      const response = await fetch(`/api/documents/${domain}/${number}/history`)\r\n      const data = (await response.json()) as { ok: boolean; items: ArchiveEntry[] }\r\n      setItems(data.items ?? [])\r\n    } catch {\r\n      setItems([])\r\n    } finally {\r\n      setLoading(false)\r\n    }\r\n  }\r\n\r\n  return (\r\n    <Card className=\"p-4 space-y-2\">\r\n      <div className=\"font-semibold\">Archiv</div>\r\n      {loading && <div className=\"text-sm opacity-70\">L├ñdt...</div>}\r\n      {!loading && items.length === 0 && (\r\n        <div className=\"text-sm opacity-70\">Keine Archiv-Eintr├ñge</div>\r\n      )}\r\n      <ul className=\"text-sm space-y-1\">\r\n        {items.map(\r\n          (it, i): JSX.Element => (\r\n            <li key={i} className=\"flex items-center justify-between\">\r\n              <span>\r\n                {new Date(it.ts * 1000).toLocaleString()} ┬À {it.sha256.slice(0, 10)}\r\n                ÔÇª\r\n              </span>\r\n              <a\r\n                className=\"underline\"\r\n                href={`/api/documents/${domain}/${number}/print`}\r\n                target=\"_blank\"\r\n                rel=\"noreferrer\"\r\n              >\r\n                Neu drucken\r\n              </a>\r\n            </li>\r\n          )\r\n        )}\r\n      </ul>\r\n    </Card>\r\n  )\r\n}\r\n\r\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\Jochen\\VALEO-NeuroERP-3.0\\packages\\frontend-web\\src\\features\\documents\\ExportButton.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\Jochen\\VALEO-NeuroERP-3.0\\packages\\frontend-web\\src\\features\\documents\\PrintButton.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\Jochen\\VALEO-NeuroERP-3.0\\packages\\frontend-web\\src\\features\\flows\\BelegFlowPanel.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\Jochen\\VALEO-NeuroERP-3.0\\packages\\frontend-web\\src\\features\\forms\\FormBuilder.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\Jochen\\VALEO-NeuroERP-3.0\\packages\\frontend-web\\src\\features\\forms\\LinesEditor.withLookup.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":8,"column":8,"nodeType":"FunctionDeclaration","messageId":"missingReturnType","endLine":8,"endColumn":38},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":8,"column":8,"nodeType":"FunctionDeclaration","messageId":"missingReturnType","endLine":8,"endColumn":38},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":14,"column":10,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":14,"endColumn":13,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[411,414],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[411,414],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":15,"column":20,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":15,"endColumn":23,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[437,440],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[437,440],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/strict-boolean-expressions","severity":1,"message":"Unexpected object value in conditional. The condition is always true.","line":17,"column":16,"nodeType":"Identifier","messageId":"conditionErrorObject","endLine":17,"endColumn":21},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":19,"column":3,"nodeType":"FunctionDeclaration","messageId":"missingReturnType","endLine":19,"endColumn":19},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":24,"column":3,"nodeType":"FunctionDeclaration","messageId":"missingReturnType","endLine":24,"endColumn":18},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":28,"column":3,"nodeType":"FunctionDeclaration","messageId":"missingReturnType","endLine":28,"endColumn":18},{"ruleId":"@typescript-eslint/no-magic-numbers","severity":1,"message":"No magic number: 1.2.","line":49,"column":126,"nodeType":"Literal","messageId":"noMagic","endLine":49,"endColumn":129}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":9,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from \"react\"\r\nimport { Input } from \"@/components/ui/input\"\r\nimport { Button } from \"@/components/ui/button\"\r\nimport { InlineArticleLookup } from \"@/features/forms/fields/inline-lookup\"\r\n\r\ntype LineCol = { name: string; label: string; type: \"string\" | \"number\"; required?: boolean }\r\n\r\nexport function LinesEditorWithLookup({\r\n  columns,\r\n  value,\r\n  onChange\r\n}: {\r\n  columns: LineCol[]\r\n  value: any[]\r\n  onChange: (rows: any[]) => void\r\n}) {\r\n  const rows = value || []\r\n\r\n  function setCell(i: number, name: string, v: unknown) {\r\n    const next = rows.map((r, idx) => (idx === i ? { ...r, [name]: v } : r))\r\n    onChange(next)\r\n  }\r\n\r\n  function addRow() {\r\n    onChange([...(rows ?? []), Object.fromEntries(columns.map((c) => [c.name, c.type === \"number\" ? 0 : \"\"]))])\r\n  }\r\n\r\n  function delRow(i: number) {\r\n    onChange((rows ?? []).filter((_, idx) => idx !== i))\r\n  }\r\n\r\n  return (\r\n    <div className=\"grid gap-2\" style={{ gridTemplateColumns: `40px repeat(${columns.length}, 1fr) 80px` }}>\r\n      <div className=\"font-medium\">#</div>\r\n      {columns.map((c) => (\r\n        <div key={c.name} className=\"font-medium\">{c.label}</div>\r\n      ))}\r\n      <div></div>\r\n\r\n      {(rows ?? []).map((r, i) => (\r\n        <React.Fragment key={i}>\r\n          <div className=\"text-sm text-muted-foreground\">{i + 1}</div>\r\n          {columns.map((c) => (\r\n            <div key={c.name}>\r\n              {c.name === 'article' ? (\r\n                <InlineArticleLookup\r\n                  value={String(r[c.name] ?? '')}\r\n                  onPick={(it) => {\r\n                    const price = typeof it.price === 'number' ? it.price : (typeof it.cost === 'number' ? Number((it.cost * 1.2).toFixed(2)) : 0)\r\n                    const next = rows.map((row, idx) =>\r\n                      idx === i ? { ...row, article: it.id, cost: it.cost ?? row.cost, price: row.price ?? price } : row\r\n                    )\r\n                    onChange(next)\r\n                  }}\r\n                />\r\n              ) : c.type === \"number\" ? (\r\n                <Input\r\n                  type=\"number\"\r\n                  value={Number(r[c.name] ?? 0)}\r\n                  onChange={(e) => setCell(i, c.name, Number(e.target.value))}\r\n                />\r\n              ) : (\r\n                <Input\r\n                  value={String(r[c.name] ?? \"\")}\r\n                  onChange={(e) => setCell(i, c.name, e.target.value)}\r\n                />\r\n              )}\r\n            </div>\r\n          ))}\r\n          <Button type=\"button\" variant=\"ghost\" size=\"sm\" onClick={() => delRow(i)}>\r\n            L├Âschen\r\n          </Button>\r\n        </React.Fragment>\r\n      ))}\r\n\r\n      <div className=\"col-span-full mt-2\">\r\n        <Button type=\"button\" variant=\"outline\" onClick={addRow}>\r\n          Position hinzuf├╝gen\r\n        </Button>\r\n      </div>\r\n    </div>\r\n  )\r\n}","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\Jochen\\VALEO-NeuroERP-3.0\\packages\\frontend-web\\src\\features\\forms\\PolicyWarningBanner.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\Jochen\\VALEO-NeuroERP-3.0\\packages\\frontend-web\\src\\features\\forms\\fields\\index.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'id' is defined but never used. Allowed unused args must match /^_/u.","line":173,"column":24,"nodeType":"Identifier","messageId":"unusedVar","endLine":173,"endColumn":26},{"ruleId":"no-unused-vars","severity":1,"message":"'id' is defined but never used. Allowed unused args must match /^_/u.","line":173,"column":24,"nodeType":"Identifier","messageId":"unusedVar","endLine":173,"endColumn":26},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'lookupUrl' is defined but never used. Allowed unused args must match /^_/u.","line":173,"column":45,"nodeType":"Identifier","messageId":"unusedVar","endLine":173,"endColumn":54},{"ruleId":"no-unused-vars","severity":1,"message":"'lookupUrl' is defined but never used. Allowed unused args must match /^_/u.","line":173,"column":45,"nodeType":"Identifier","messageId":"unusedVar","endLine":173,"endColumn":54},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'placeholder' is defined but never used. Allowed unused args must match /^_/u.","line":173,"column":56,"nodeType":"Identifier","messageId":"unusedVar","endLine":173,"endColumn":67},{"ruleId":"no-unused-vars","severity":1,"message":"'placeholder' is defined but never used. Allowed unused args must match /^_/u.","line":173,"column":56,"nodeType":"Identifier","messageId":"unusedVar","endLine":173,"endColumn":67}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import * as React from \"react\"\r\nimport { useEffect, useState } from \"react\"\r\nimport { Input } from \"@/components/ui/input\"\r\nimport { Textarea } from \"@/components/ui/textarea\"\r\nimport {\r\n  Select,\r\n  SelectContent,\r\n  SelectItem,\r\n  SelectTrigger,\r\n  SelectValue,\r\n} from \"@/components/ui/select\"\r\nimport {\r\n  Popover,\r\n  PopoverContent,\r\n  PopoverTrigger,\r\n} from \"@/components/ui/popover\"\r\nimport {\r\n  Command,\r\n  CommandEmpty,\r\n  CommandGroup,\r\n  CommandInput,\r\n  CommandItem,\r\n  CommandList,\r\n} from \"@/components/ui/command\"\r\n\r\ntype Field = {\r\n  name: string\r\n  label: string\r\n  type: \"string\" | \"number\" | \"date\" | \"text\" | \"select\" | \"lookup\" | \"lines\"\r\n  required?: boolean\r\n  options?: Array<{ value: string; label: string }>\r\n  placeholder?: string\r\n  min?: number\r\n  max?: number\r\n  lookup?: string\r\n}\r\n\r\ntype Props = {\r\n  field: Field\r\n  value: unknown\r\n  onChange: (v: unknown) => void\r\n}\r\n\r\nexport function FieldRenderer({ field, value, onChange }: Props): JSX.Element {\r\n  // Textarea\r\n  if (field.type === \"text\") {\r\n    return (\r\n      <Textarea\r\n        id={field.name}\r\n        value={String(value ?? \"\")}\r\n        onChange={(e): void => {\r\n          onChange(e.target.value)\r\n        }}\r\n        placeholder={field.placeholder}\r\n      />\r\n    )\r\n  }\r\n\r\n  // Number\r\n  if (field.type === \"number\") {\r\n    return (\r\n      <Input\r\n        id={field.name}\r\n        type=\"number\"\r\n        value={Number(value ?? 0)}\r\n        onChange={(e): void => {\r\n          onChange(Number(e.target.value))\r\n        }}\r\n        placeholder={field.placeholder}\r\n        min={field.min}\r\n        max={field.max}\r\n      />\r\n    )\r\n  }\r\n\r\n  // Date\r\n  if (field.type === \"date\") {\r\n    return (\r\n      <Input\r\n        id={field.name}\r\n        type=\"date\"\r\n        value={String(value ?? \"\")}\r\n        onChange={(e): void => {\r\n          onChange(e.target.value)\r\n        }}\r\n      />\r\n    )\r\n  }\r\n\r\n  // Select (Dropdown)\r\n  if (field.type === \"select\") {\r\n    return (\r\n      <Select\r\n        value={String(value ?? \"\")}\r\n        onValueChange={(v): void => {\r\n          onChange(v)\r\n        }}\r\n      >\r\n        <SelectTrigger id={field.name}>\r\n          <SelectValue placeholder={field.placeholder ?? \"Bitte w├ñhlen\"} />\r\n        </SelectTrigger>\r\n        <SelectContent>\r\n          {field.options?.map(\r\n            (o): JSX.Element => (\r\n              <SelectItem key={o.value} value={o.value}>\r\n                {o.label}\r\n              </SelectItem>\r\n            )\r\n          )}\r\n        </SelectContent>\r\n      </Select>\r\n    )\r\n  }\r\n\r\n  // Lookup (mit Debounce-Suche)\r\n  if (field.type === \"lookup\") {\r\n    return (\r\n      <LookupField\r\n        id={field.name}\r\n        value={String(value ?? \"\")}\r\n        onChange={onChange}\r\n        lookupUrl={field.lookup ?? \"\"}\r\n        placeholder={field.placeholder}\r\n        field={field}\r\n      />\r\n    )\r\n  }\r\n\r\n  // Default: String\r\n  return (\r\n    <Input\r\n      id={field.name}\r\n      value={String(value ?? \"\")}\r\n      onChange={(e: React.ChangeEvent<HTMLInputElement>): void => {\r\n        onChange(e.target.value)\r\n      }}\r\n      placeholder={field.placeholder}\r\n    />\r\n  )\r\n}\r\n\r\nconst DEFAULT_DEBOUNCE_MS = 500\r\nconst LOOKUP_DEBOUNCE_MS = 400\r\n\r\n/**\r\n * Debounce Hook\r\n */\r\nfunction useDebounced<T>(val: T, delay = DEFAULT_DEBOUNCE_MS): T {\r\n  const [v, setV] = useState(val)\r\n  useEffect(() => {\r\n    const t = setTimeout(() => {\r\n      setV(val)\r\n    }, delay)\r\n    return (): void => {\r\n      clearTimeout(t)\r\n    }\r\n  }, [val, delay])\r\n  return v\r\n}\r\n\r\n/**\r\n * Lookup-Field mit Command/Popover und Debounce\r\n */\r\ntype LookupProps = {\r\n  id: string\r\n  value: string\r\n  onChange: (v: unknown) => void\r\n  lookupUrl: string\r\n  placeholder?: string\r\n  field: Field\r\n}\r\n\r\nfunction LookupField({ id, value, onChange, lookupUrl, placeholder, field }: LookupProps): JSX.Element {\r\n  const [open, setOpen] = useState(false)\r\n  const [q, setQ] = useState(\"\")\r\n  const dq = useDebounced(q, LOOKUP_DEBOUNCE_MS)\r\n  const [items, setItems] = useState<\r\n    Array<{ id: string; label?: string; name?: string; hint?: string }>\r\n  >([])\r\n\r\n  const entity =\r\n    field.lookup?.split(\"/\").pop() ??\r\n    (field.name?.toLowerCase().includes(\"customer\") ? \"customers\" : \"articles\")\r\n\r\n  useEffect(() => {\r\n    let ignore = false\r\n    async function run(): Promise<void> {\r\n      if (dq.length === 0) {\r\n        setItems([])\r\n        return\r\n      }\r\n      try {\r\n        const res = await fetch(\r\n          `/api/mcp/lookup/${entity}?q=${encodeURIComponent(dq)}`\r\n        )\r\n        const js = (await res.json()) as {\r\n          ok: boolean\r\n          data: Array<{ id: string; label?: string; name?: string; hint?: string }>\r\n        }\r\n        if (!ignore) {\r\n          setItems(js?.data ?? [])\r\n        }\r\n      } catch {\r\n        if (!ignore) {\r\n          setItems([])\r\n        }\r\n      }\r\n    }\r\n    void run()\r\n    return (): void => {\r\n      ignore = true\r\n    }\r\n  }, [dq, entity])\r\n\r\n  return (\r\n    <Popover open={open} onOpenChange={setOpen}>\r\n      <PopoverTrigger asChild>\r\n        <div className=\"flex gap-2\">\r\n          <Input\r\n            id={field.name}\r\n            value={String(value ?? \"\")}\r\n            onChange={(e): void => {\r\n              onChange(e.target.value)\r\n            }}\r\n            placeholder={field.placeholder ?? `Suche ${entity}ÔÇª`}\r\n          />\r\n          <Input\r\n            className=\"max-w-[40%]\"\r\n            placeholder=\"SucheÔÇª\"\r\n            value={q}\r\n            onChange={(e): void => {\r\n              setQ(e.target.value)\r\n            }}\r\n          />\r\n        </div>\r\n      </PopoverTrigger>\r\n      <PopoverContent className=\"p-0 w-[var(--radix-popover-trigger-width)]\">\r\n        <Command>\r\n          <CommandInput placeholder={`Suchen in ${entity}ÔÇª`} />\r\n          <CommandList>\r\n            <CommandEmpty>Nichts gefunden</CommandEmpty>\r\n            <CommandGroup>\r\n              {items.map(\r\n                (it): JSX.Element => (\r\n                  <CommandItem\r\n                    key={it.id}\r\n                    value={it.id}\r\n                    onSelect={(): void => {\r\n                      onChange(it.id)\r\n                      setOpen(false)\r\n                    }}\r\n                  >\r\n                    <div className=\"flex flex-col\">\r\n                      <span className=\"font-medium\">\r\n                        {it.label ?? it.name ?? it.id}\r\n                      </span>\r\n                      {it.hint !== undefined && (\r\n                        <span className=\"text-xs opacity-70\">{it.hint}</span>\r\n                      )}\r\n                    </div>\r\n                  </CommandItem>\r\n                )\r\n              )}\r\n            </CommandGroup>\r\n          </CommandList>\r\n        </Command>\r\n      </PopoverContent>\r\n    </Popover>\r\n  )\r\n}\r\n\r\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\Jochen\\VALEO-NeuroERP-3.0\\packages\\frontend-web\\src\\features\\forms\\fields\\inline-lookup.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":15,"column":8,"nodeType":"FunctionDeclaration","messageId":"missingReturnType","endLine":15,"endColumn":36},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":15,"column":8,"nodeType":"FunctionDeclaration","messageId":"missingReturnType","endLine":15,"endColumn":36},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":15,"column":86,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":15,"endColumn":89,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[636,639],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[636,639],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":19,"column":38,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":19,"endColumn":41,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[799,802],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[799,802],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":23,"column":16,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":23,"endColumn":18},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":32,"column":15,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":32,"endColumn":17},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":50,"column":31,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":50,"endColumn":34,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1716,1719],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1716,1719],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/strict-boolean-expressions","severity":1,"message":"Unexpected any value in conditional. An explicit comparison or type cast is required.","line":64,"column":36,"nodeType":"MemberExpression","messageId":"conditionErrorAny","endLine":64,"endColumn":44,"suggestions":[{"messageId":"conditionFixCastBoolean","fix":{"range":[2236,2244],"text":"(Boolean(it.price))"},"desc":"Explicitly cast value to a boolean (`Boolean(value)`)"}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":8,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useEffect, useState } from \"react\"\r\nimport { Input } from \"@/components/ui/input\"\r\nimport { Popover, PopoverContent, PopoverTrigger } from \"@/components/ui/popover\"\r\nimport { Command, CommandEmpty, CommandGroup, CommandInput, CommandItem, CommandList } from \"@/components/ui/command\"\r\n\r\nexport function useDebounced<T>(val: T, delay = 350): T {\r\n  const [v, setV] = React.useState(val)\r\n  React.useEffect(() => {\r\n    const t = setTimeout(() => setV(val), delay)\r\n    return () => clearTimeout(t)\r\n  }, [val, delay])\r\n  return v\r\n}\r\n\r\nexport function InlineArticleLookup({ value, onPick }: { value: string; onPick: (it: any) => void }) {\r\n  const [open, setOpen] = useState(false)\r\n  const [q, setQ] = useState(\"\")\r\n  const dq = useDebounced(q)\r\n  const [items, setItems] = useState<any[]>([])\r\n\r\n  useEffect(() => {\r\n    let ig = false\r\n    ;(async () => {\r\n      if (!dq) {\r\n        setItems([])\r\n        return\r\n      }\r\n      const r = await fetch(`/api/mcp/lookup/articles?q=${encodeURIComponent(dq)}`)\r\n      const j = await r.json()\r\n      if (!ig) setItems(j?.data ?? [])\r\n    })()\r\n    return () => { ig = true }\r\n  }, [dq])\r\n\r\n  return (\r\n    <Popover open={open} onOpenChange={setOpen}>\r\n      <PopoverTrigger asChild>\r\n        <Input\r\n          value={q || value || \"\"}\r\n          onChange={(e) => setQ(e.target.value)}\r\n          placeholder=\"Artikel suchenÔÇª\"\r\n        />\r\n      </PopoverTrigger>\r\n      <PopoverContent className=\"p-0 w-[var(--radix-popover-trigger-width)]\">\r\n        <Command>\r\n          <CommandInput placeholder=\"SuchenÔÇª\" />\r\n          <CommandList>\r\n            <CommandEmpty>Nichts gefunden</CommandEmpty>\r\n            <CommandGroup>\r\n              {items.map((it: any) => (\r\n                <CommandItem\r\n                  key={it.id}\r\n                  value={it.id}\r\n                  onSelect={() => {\r\n                    onPick(it)\r\n                    setOpen(false)\r\n                  }}\r\n                >\r\n                  <div className=\"flex flex-col\">\r\n                    <span className=\"font-medium\">\r\n                      {it.label ?? it.id}\r\n                    </span>\r\n                    <span className=\"text-xs opacity-70\">\r\n                      EK {it.cost}{it.price ? ` ┬À Preis ${it.price}` : ''}\r\n                    </span>\r\n                  </div>\r\n                </CommandItem>\r\n              ))}\r\n            </CommandGroup>\r\n          </CommandList>\r\n        </Command>\r\n      </PopoverContent>\r\n    </Popover>\r\n  )\r\n}","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\Jochen\\VALEO-NeuroERP-3.0\\packages\\frontend-web\\src\\features\\forms\\validator.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\Jochen\\VALEO-NeuroERP-3.0\\packages\\frontend-web\\src\\features\\global-search\\index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\Jochen\\VALEO-NeuroERP-3.0\\packages\\frontend-web\\src\\features\\global-search\\performGlobalSearch.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\Jochen\\VALEO-NeuroERP-3.0\\packages\\frontend-web\\src\\features\\inventory\\AdjustForm.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\Jochen\\VALEO-NeuroERP-3.0\\packages\\frontend-web\\src\\features\\inventory\\Inventory.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\Jochen\\VALEO-NeuroERP-3.0\\packages\\frontend-web\\src\\features\\inventory\\PutawayForm.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\Jochen\\VALEO-NeuroERP-3.0\\packages\\frontend-web\\src\\features\\inventory\\schema.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\Jochen\\VALEO-NeuroERP-3.0\\packages\\frontend-web\\src\\features\\pricing\\PricingForm.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\Jochen\\VALEO-NeuroERP-3.0\\packages\\frontend-web\\src\\features\\pricing\\TierRow.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\Jochen\\VALEO-NeuroERP-3.0\\packages\\frontend-web\\src\\features\\pricing\\schema.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\Jochen\\VALEO-NeuroERP-3.0\\packages\\frontend-web\\src\\features\\sales\\Sales.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\Jochen\\VALEO-NeuroERP-3.0\\packages\\frontend-web\\src\\features\\weighing\\TicketForm.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\Jochen\\VALEO-NeuroERP-3.0\\packages\\frontend-web\\src\\features\\weighing\\Weighing.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\Jochen\\VALEO-NeuroERP-3.0\\packages\\frontend-web\\src\\features\\weighing\\schema.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\Jochen\\VALEO-NeuroERP-3.0\\packages\\frontend-web\\src\\features\\workflow\\ApprovalPanel.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":17,"column":20,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":17,"endColumn":23,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[456,459],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[456,459],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":21,"column":16,"nodeType":"FunctionDeclaration","messageId":"missingReturnType","endLine":21,"endColumn":38},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":21,"column":16,"nodeType":"FunctionDeclaration","messageId":"missingReturnType","endLine":21,"endColumn":38},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":32,"column":33,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":32,"endColumn":35},{"ruleId":"@typescript-eslint/strict-boolean-expressions","severity":1,"message":"Unexpected any value in conditional. An explicit comparison or type cast is required.","line":34,"column":10,"nodeType":"MemberExpression","messageId":"conditionErrorAny","endLine":34,"endColumn":19,"suggestions":[{"messageId":"conditionFixCastBoolean","fix":{"range":[935,944],"text":"(Boolean(result.ok))"},"desc":"Explicitly cast value to a boolean (`Boolean(value)`)"}]},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":39,"column":34,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":39,"endColumn":36},{"ruleId":"@typescript-eslint/strict-boolean-expressions","severity":1,"message":"Unexpected any value in conditional. An explicit comparison or type cast is required.","line":41,"column":10,"nodeType":"MemberExpression","messageId":"conditionErrorAny","endLine":41,"endColumn":19,"suggestions":[{"messageId":"conditionFixCastBoolean","fix":{"range":[1117,1126],"text":"(Boolean(result.ok))"},"desc":"Explicitly cast value to a boolean (`Boolean(value)`)"}]},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":46,"column":33,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":46,"endColumn":35},{"ruleId":"@typescript-eslint/strict-boolean-expressions","severity":1,"message":"Unexpected nullable string value in conditional. Please handle the nullish/empty cases explicitly.","line":49,"column":10,"nodeType":"Identifier","messageId":"conditionErrorNullableString","endLine":49,"endColumn":16,"suggestions":[{"messageId":"conditionFixCompareNullish","fix":{"range":[1342,1349],"text":"reason == null"},"desc":"Change condition to check for null/undefined (`value != null`)"},{"messageId":"conditionFixDefaultEmptyString","fix":{"range":[1343,1349],"text":"(reason ?? \"\")"},"desc":"Explicitly treat nullish value the same as an empty string (`value ?? \"\"`)"},{"messageId":"conditionFixCastBoolean","fix":{"range":[1342,1349],"text":"!Boolean(reason)"},"desc":"Explicitly cast value to a boolean (`Boolean(value)`)"}]},{"ruleId":"@typescript-eslint/strict-boolean-expressions","severity":1,"message":"Unexpected any value in conditional. An explicit comparison or type cast is required.","line":52,"column":10,"nodeType":"MemberExpression","messageId":"conditionErrorAny","endLine":52,"endColumn":19,"suggestions":[{"messageId":"conditionFixCastBoolean","fix":{"range":[1437,1446],"text":"(Boolean(result.ok))"},"desc":"Explicitly cast value to a boolean (`Boolean(value)`)"}]},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":57,"column":31,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":57,"endColumn":33},{"ruleId":"@typescript-eslint/strict-boolean-expressions","severity":1,"message":"Unexpected any value in conditional. An explicit comparison or type cast is required.","line":64,"column":10,"nodeType":"MemberExpression","messageId":"conditionErrorAny","endLine":64,"endColumn":19,"suggestions":[{"messageId":"conditionFixCastBoolean","fix":{"range":[1781,1790],"text":"(Boolean(result.ok))"},"desc":"Explicitly cast value to a boolean (`Boolean(value)`)"}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":12,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { Button } from '@/components/ui/button'\r\nimport { useWorkflow } from '@/hooks/useWorkflow'\r\nimport { StatusBadge } from '@/components/workflow/StatusBadge'\r\nimport { Loader2 } from 'lucide-react'\r\n\r\ninterface ApprovalPanelProps {\r\n  domain: 'sales' | 'purchase'\r\n  doc: {\r\n    number: string\r\n    lines?: Array<{\r\n      article?: string\r\n      qty?: number\r\n      price?: number\r\n      cost?: number\r\n    }>\r\n    total?: number\r\n    [key: string]: any\r\n  }\r\n}\r\n\r\nexport default function ApprovalPanel({ domain, doc }: ApprovalPanelProps) {\r\n  const { state, transition, loading } = useWorkflow(domain, doc.number)\r\n\r\n  // Berechne erlaubte Aktionen basierend auf State\r\n  const can = {\r\n    submit: state === 'draft',\r\n    approve: state === 'pending',\r\n    reject: state === 'pending',\r\n    post: state === 'approved',\r\n  }\r\n\r\n  const handleSubmit = async () => {\r\n    const result = await transition('submit', doc)\r\n    if (!result.ok) {\r\n      console.error('Submit failed:', result.error)\r\n    }\r\n  }\r\n\r\n  const handleApprove = async () => {\r\n    const result = await transition('approve', doc)\r\n    if (!result.ok) {\r\n      console.error('Approve failed:', result.error)\r\n    }\r\n  }\r\n\r\n  const handleReject = async () => {\r\n    // In Production: Dialog f├╝r Ablehnungsgrund\r\n    const reason = prompt('Ablehnungsgrund:')\r\n    if (!reason) return\r\n\r\n    const result = await transition('reject', { ...doc, reason })\r\n    if (!result.ok) {\r\n      console.error('Reject failed:', result.error)\r\n    }\r\n  }\r\n\r\n  const handlePost = async () => {\r\n    // Confirmation-Dialog f├╝r finale Buchung\r\n    if (!confirm('Beleg wirklich buchen? Diese Aktion kann nicht r├╝ckg├ñngig gemacht werden.')) {\r\n      return\r\n    }\r\n\r\n    const result = await transition('post', doc)\r\n    if (!result.ok) {\r\n      console.error('Post failed:', result.error)\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"flex items-center gap-3 p-4 bg-gray-50 rounded-lg border\">\r\n      <StatusBadge status={state} data-testid=\"approval-status-badge\" />\r\n\r\n      <div className=\"flex-1\" />\r\n\r\n      <div className=\"flex items-center gap-2\">\r\n        {loading && (\r\n          <Loader2 className=\"h-4 w-4 animate-spin text-gray-500\" />\r\n        )}\r\n\r\n        {can.submit && (\r\n          <Button\r\n            disabled={loading}\r\n            onClick={handleSubmit}\r\n            variant=\"outline\"\r\n            data-testid=\"btn-submit\"\r\n          >\r\n            Einreichen\r\n          </Button>\r\n        )}\r\n\r\n        {can.approve && (\r\n          <Button\r\n            disabled={loading}\r\n            onClick={handleApprove}\r\n            variant=\"default\"\r\n            data-testid=\"btn-approve\"\r\n          >\r\n            Freigeben\r\n          </Button>\r\n        )}\r\n\r\n        {can.reject && (\r\n          <Button\r\n            disabled={loading}\r\n            onClick={handleReject}\r\n            variant=\"destructive\"\r\n            data-testid=\"btn-reject\"\r\n          >\r\n            Ablehnen\r\n          </Button>\r\n        )}\r\n\r\n        {can.post && (\r\n          <Button\r\n            disabled={loading}\r\n            onClick={handlePost}\r\n            variant=\"default\"\r\n            className=\"bg-green-600 hover:bg-green-700\"\r\n            data-testid=\"btn-post\"\r\n          >\r\n            Buchen\r\n          </Button>\r\n        )}\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\Jochen\\VALEO-NeuroERP-3.0\\packages\\frontend-web\\src\\hooks\\live-hooks.ts","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":5,"column":8,"nodeType":"FunctionDeclaration","messageId":"missingReturnType","endLine":5,"endColumn":29},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":5,"column":8,"nodeType":"FunctionDeclaration","messageId":"missingReturnType","endLine":5,"endColumn":29},{"ruleId":"@typescript-eslint/strict-boolean-expressions","severity":1,"message":"Unexpected any value in conditional. An explicit comparison or type cast is required.","line":10,"column":9,"nodeType":"Identifier","messageId":"conditionErrorAny","endLine":10,"endColumn":12,"suggestions":[{"messageId":"conditionFixCastBoolean","fix":{"range":[382,385],"text":"(Boolean(msg))"},"desc":"Explicitly cast value to a boolean (`Boolean(value)`)"}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":10,"column":51,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":10,"endColumn":54,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[424,427],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[424,427],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":11,"column":24,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":11,"endColumn":27,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[471,474],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[471,474],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":18,"column":8,"nodeType":"FunctionDeclaration","messageId":"missingReturnType","endLine":18,"endColumn":33},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":18,"column":8,"nodeType":"FunctionDeclaration","messageId":"missingReturnType","endLine":18,"endColumn":33},{"ruleId":"@typescript-eslint/strict-boolean-expressions","severity":1,"message":"Unexpected any value in conditional. An explicit comparison or type cast is required.","line":23,"column":9,"nodeType":"Identifier","messageId":"conditionErrorAny","endLine":23,"endColumn":12,"suggestions":[{"messageId":"conditionFixCastBoolean","fix":{"range":[919,922],"text":"(Boolean(msg))"},"desc":"Explicitly cast value to a boolean (`Boolean(value)`)"}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":23,"column":51,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":23,"endColumn":54,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[961,964],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[961,964],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":24,"column":24,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":24,"endColumn":27,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1010,1013],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1010,1013],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":31,"column":8,"nodeType":"FunctionDeclaration","messageId":"missingReturnType","endLine":31,"endColumn":32},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":31,"column":8,"nodeType":"FunctionDeclaration","messageId":"missingReturnType","endLine":31,"endColumn":32},{"ruleId":"@typescript-eslint/strict-boolean-expressions","severity":1,"message":"Unexpected any value in conditional. An explicit comparison or type cast is required.","line":36,"column":9,"nodeType":"Identifier","messageId":"conditionErrorAny","endLine":36,"endColumn":12,"suggestions":[{"messageId":"conditionFixCastBoolean","fix":{"range":[1451,1454],"text":"(Boolean(msg))"},"desc":"Explicitly cast value to a boolean (`Boolean(value)`)"}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":36,"column":51,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":36,"endColumn":54,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1493,1496],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1493,1496],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":37,"column":24,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":37,"endColumn":27,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1542,1545],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1542,1545],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-magic-numbers","severity":1,"message":"No magic number: 10.","line":43,"column":61,"nodeType":"Literal","messageId":"noMagic","endLine":43,"endColumn":63},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":44,"column":15,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":44,"endColumn":17}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":17,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useEffect, useState } from 'react'\r\nimport { useSSE } from '@/lib/sse'\r\nimport { useLive } from '@/state/live'\r\n\r\nexport function useLiveSales() {\r\n  const { setSalesDoc } = useLive()\r\n  const [status, setStatus] = useState<'open' | 'closed' | 'error'>('closed')\r\n  useSSE('sales', (msg) => {\r\n    // erwartet: { type:'doc', id, number, status, total, updatedAt }\r\n    if (msg && typeof msg === 'object' && (msg as any).type === 'doc') {\r\n      const d = msg as any\r\n      setSalesDoc({ id: d.id, number: d.number, status: d.status, total: d.total, updatedAt: d.updatedAt ?? Date.now() })\r\n    }\r\n  }, { onStatus: setStatus })\r\n  return { status }\r\n}\r\n\r\nexport function useLiveInventory() {\r\n  const { setInventoryEvt } = useLive()\r\n  const [status, setStatus] = useState<'open' | 'closed' | 'error'>('closed')\r\n  useSSE('inventory', (msg) => {\r\n    // erwartet: { type:'stock', sku, delta, qty, ts }\r\n    if (msg && typeof msg === 'object' && (msg as any).type === 'stock') {\r\n      const e = msg as any\r\n      setInventoryEvt({ sku: e.sku, delta: e.delta, qty: e.qty, ts: e.ts ?? Date.now() })\r\n    }\r\n  }, { onStatus: setStatus })\r\n  return { status }\r\n}\r\n\r\nexport function usePolicyAlerts() {\r\n  const { pushPolicy, sweepPolicy, policy } = useLive()\r\n  const [status, setStatus] = useState<'open' | 'closed' | 'error'>('closed')\r\n  useSSE('policy', (msg) => {\r\n    // erwartet: { type:'alert', id, title, message, severity, ts }\r\n    if (msg && typeof msg === 'object' && (msg as any).type === 'alert') {\r\n      const a = msg as any\r\n      pushPolicy({ id: a.id, title: a.title, message: a.message, severity: a.severity, ts: a.ts ?? Date.now() })\r\n    }\r\n  }, { onStatus: setStatus })\r\n\r\n  useEffect(() => {\r\n    const t = setInterval(() => sweepPolicy(5 * 60 * 1000), 10 * 1000)\r\n    return () => clearInterval(t)\r\n  }, [sweepPolicy])\r\n\r\n  return { status, policy }\r\n}","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\Jochen\\VALEO-NeuroERP-3.0\\packages\\frontend-web\\src\\hooks\\use-toast.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\Jochen\\VALEO-NeuroERP-3.0\\packages\\frontend-web\\src\\hooks\\useAuth.ts","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":9,"column":8,"nodeType":"FunctionDeclaration","messageId":"missingReturnType","endLine":9,"endColumn":24},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":9,"column":8,"nodeType":"FunctionDeclaration","messageId":"missingReturnType","endLine":9,"endColumn":24},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":18,"column":26,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":18,"endColumn":28},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":29,"column":21,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":29,"endColumn":23},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":36,"column":62,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":36,"endColumn":64},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":57,"column":5,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":57,"endColumn":15},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":58,"column":5,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":58,"endColumn":14}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":7,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * useAuth Hook\r\n * React-Hook f├╝r Authentication\r\n */\r\n\r\nimport { useEffect, useState } from 'react'\r\nimport { type User, auth } from '@/lib/auth'\r\n\r\nexport function useAuth() {\r\n  const [user, setUser] = useState<User | null>(auth.getUser())\r\n  const [loading, setLoading] = useState(false)\r\n\r\n  useEffect(() => {\r\n    // Check auth status on mount\r\n    setUser(auth.getUser())\r\n  }, [])\r\n\r\n  const login = async () => {\r\n    setLoading(true)\r\n    try {\r\n      await auth.login()\r\n      // Will redirect to OIDC provider\r\n    } catch (e) {\r\n      console.error('Login failed:', e)\r\n      setLoading(false)\r\n    }\r\n  }\r\n\r\n  const logout = () => {\r\n    auth.logout()\r\n    setUser(null)\r\n    // Redirect to login page\r\n    window.location.href = '/login'\r\n  }\r\n\r\n  const handleCallback = async (code: string, state: string) => {\r\n    setLoading(true)\r\n    try {\r\n      await auth.handleCallback(code, state)\r\n      setUser(auth.getUser())\r\n      // Redirect to dashboard\r\n      window.location.href = '/dashboard'\r\n    } catch (e) {\r\n      console.error('Callback failed:', e)\r\n      setLoading(false)\r\n      throw e\r\n    }\r\n  }\r\n\r\n  return {\r\n    user,\r\n    loading,\r\n    isAuthenticated: auth.isAuthenticated(),\r\n    login,\r\n    logout,\r\n    handleCallback,\r\n    hasScope: (scope: string) => auth.hasScope(scope),\r\n    hasRole: (role: string) => auth.hasRole(role),\r\n  }\r\n}\r\n\r\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\Jochen\\VALEO-NeuroERP-3.0\\packages\\frontend-web\\src\\hooks\\useI18n.ts","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":4,"column":8,"nodeType":"FunctionDeclaration","messageId":"missingReturnType","endLine":4,"endColumn":24},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":4,"column":8,"nodeType":"FunctionDeclaration","messageId":"missingReturnType","endLine":4,"endColumn":24},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":11,"column":44,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":11,"endColumn":46}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useEffect, useState } from 'react'\r\nimport { type Locale, getLocale, setLocale, t } from '@/lib/i18n'\r\n\r\nexport function useI18n() {\r\n  const [locale, setLocaleState] = useState<Locale>(getLocale())\r\n\r\n  useEffect(() => {\r\n    setLocaleState(getLocale())\r\n  }, [])\r\n\r\n  const changeLocale = (newLocale: Locale) => {\r\n    setLocale(newLocale)\r\n    setLocaleState(newLocale)\r\n  }\r\n\r\n  return {\r\n    t,\r\n    locale,\r\n    setLocale: changeLocale,\r\n  }\r\n}\r\n\r\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\Jochen\\VALEO-NeuroERP-3.0\\packages\\frontend-web\\src\\hooks\\useSSE.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\Jochen\\VALEO-NeuroERP-3.0\\packages\\frontend-web\\src\\hooks\\useWorkflow.ts","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":8,"column":8,"nodeType":"FunctionDeclaration","messageId":"missingReturnType","endLine":8,"endColumn":28},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":8,"column":8,"nodeType":"FunctionDeclaration","messageId":"missingReturnType","endLine":8,"endColumn":28},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":14,"column":30,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":14,"endColumn":33,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[603,606],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[603,606],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":21,"column":3,"nodeType":"FunctionDeclaration","messageId":"missingReturnType","endLine":21,"endColumn":28},{"ruleId":"@typescript-eslint/strict-boolean-expressions","severity":1,"message":"Unexpected any value in conditional. An explicit comparison or type cast is required.","line":25,"column":11,"nodeType":"MemberExpression","messageId":"conditionErrorAny","endLine":25,"endColumn":15,"suggestions":[{"messageId":"conditionFixCastBoolean","fix":{"range":[918,922],"text":"Boolean(j.ok)"},"desc":"Explicitly cast value to a boolean (`Boolean(value)`)"}]},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":31,"column":3,"nodeType":"FunctionDeclaration","messageId":"missingReturnType","endLine":31,"endColumn":28},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":31,"column":62,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":31,"endColumn":65,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1059,1062],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1059,1062],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/strict-boolean-expressions","severity":1,"message":"Unexpected any value in conditional. An explicit comparison or type cast is required.","line":40,"column":11,"nodeType":"MemberExpression","messageId":"conditionErrorAny","endLine":40,"endColumn":15,"suggestions":[{"messageId":"conditionFixCastBoolean","fix":{"range":[1368,1372],"text":"Boolean(j.ok)"},"desc":"Explicitly cast value to a boolean (`Boolean(value)`)"}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":8,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useEffect, useState } from 'react'\r\nimport { useSSE } from '@/lib/sse'\r\nimport { useLive } from '@/state/live'\r\n\r\nexport type WorkflowState = 'draft' | 'pending' | 'approved' | 'posted' | 'rejected'\r\nexport type WorkflowAction = 'submit' | 'approve' | 'reject' | 'post'\r\n\r\nexport function useWorkflow(domain: 'sales' | 'purchase', number: string) {\r\n  const [state, setState] = useState<WorkflowState>('draft')\r\n  const [loading, setLoading] = useState(false)\r\n  const setWorkflowEvent = useLive((s) => s.setWorkflowEvent)\r\n\r\n  // SSE-Listener f├╝r Workflow-Events\r\n  useSSE('workflow', (event: any) => {\r\n    if (event.domain === domain && event.number === number) {\r\n      setState(event.to as WorkflowState)\r\n      setWorkflowEvent(event)\r\n    }\r\n  })\r\n\r\n  async function fetchState() {\r\n    try {\r\n      const r = await fetch(`/api/workflow/${domain}/${number}`)\r\n      const j = await r.json()\r\n      if (j.ok) setState(j.state)\r\n    } catch (e) {\r\n      // Silent fail\r\n    }\r\n  }\r\n\r\n  async function transition(action: WorkflowAction, payload: any) {\r\n    setLoading(true)\r\n    try {\r\n      const r = await fetch(`/api/workflow/${domain}/${number}/transition`, {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({ action, ...payload })\r\n      })\r\n      const j = await r.json()\r\n      if (j.ok) setState(j.state)\r\n      return j\r\n    } catch (e) {\r\n      console.error('Failed to transition workflow:', e)\r\n      return { ok: false, error: e instanceof Error ? e.message : 'Unknown error' }\r\n    } finally {\r\n      setLoading(false)\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (number) fetchState()\r\n  }, [domain, number])\r\n\r\n  return { state, transition, loading, refresh: fetchState }\r\n}","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\Jochen\\VALEO-NeuroERP-3.0\\packages\\frontend-web\\src\\hooks\\useWorkflowEvents.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":13,"column":34,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":13,"endColumn":37,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[393,396],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[393,396],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":29,"column":39,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":29,"endColumn":42,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[897,900],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[897,900],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":62,"column":36,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":62,"endColumn":39,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1757,1760],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1757,1760],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/strict-boolean-expressions","severity":1,"message":"Unexpected any value in conditional. An explicit comparison or type cast is required.","line":73,"column":13,"nodeType":"Identifier","messageId":"conditionErrorAny","endLine":73,"endColumn":18,"suggestions":[{"messageId":"conditionFixCastBoolean","fix":{"range":[2076,2081],"text":"(Boolean(count))"},"desc":"Explicitly cast value to a boolean (`Boolean(value)`)"}]},{"ruleId":"@typescript-eslint/no-magic-numbers","severity":1,"message":"No magic number: 10.","line":73,"column":30,"nodeType":"Literal","messageId":"noMagic","endLine":73,"endColumn":32},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":81,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":81,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[2286,2320],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":90,"column":8,"nodeType":"FunctionDeclaration","messageId":"missingReturnType","endLine":90,"endColumn":34},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":90,"column":8,"nodeType":"FunctionDeclaration","messageId":"missingReturnType","endLine":90,"endColumn":34},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":91,"column":51,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":91,"endColumn":54,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2522,2525],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2522,2525],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/strict-boolean-expressions","severity":1,"message":"Unexpected any value in conditional. An explicit comparison or type cast is required.","line":96,"column":11,"nodeType":"MemberExpression","messageId":"conditionErrorAny","endLine":96,"endColumn":18,"suggestions":[{"messageId":"conditionFixCastBoolean","fix":{"range":[2684,2691],"text":"Boolean(data.ok)"},"desc":"Explicitly cast value to a boolean (`Boolean(value)`)"}]},{"ruleId":"@typescript-eslint/strict-boolean-expressions","severity":1,"message":"Unexpected any value in conditional. An explicit comparison or type cast is required.","line":97,"column":16,"nodeType":"MemberExpression","messageId":"conditionErrorAny","endLine":97,"endColumn":27,"suggestions":[{"messageId":"conditionFixCastBoolean","fix":{"range":[2711,2722],"text":"(Boolean(data.events))"},"desc":"Explicitly cast value to a boolean (`Boolean(value)`)"}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":11,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useSSE } from '@/lib/sse'\r\nimport { useToast } from '@/hooks/use-toast'\r\n\r\n/**\r\n * Workflow Events Hook\r\n * Listens to workflow SSE events and shows appropriate toasts\r\n * Handles audit events, replay, and status notifications\r\n */\r\nexport function useWorkflowEvents(): void {\r\n  const { toast } = useToast()\r\n\r\n  // SSE listener for workflow events\r\n  useSSE('workflow', (eventData: any) => {\r\n    try {\r\n      // Handle workflow state transition events\r\n      if (eventData.topic === 'workflow') {\r\n        handleWorkflowEvent(eventData)\r\n      }\r\n      // Handle audit events (exports, access logs, etc.)\r\n      else if (eventData.topic === 'audit') {\r\n        handleAuditEvent(eventData)\r\n      }\r\n    } catch (error) {\r\n      console.error('Error processing workflow event:', error)\r\n    }\r\n  })\r\n\r\n  // Handle workflow state transition events\r\n  const handleWorkflowEvent = (event: any): void => {\r\n    const { domain, number, action, type } = event\r\n\r\n    if (type === 'replay') {\r\n      // Skip toasts for replay events to avoid spam\r\n      return\r\n    }\r\n\r\n    // German action labels\r\n    const actionLabels: Record<string, string> = {\r\n      submit: 'eingereicht',\r\n      approve: 'freigegeben',\r\n      reject: 'abgelehnt',\r\n      post: 'gebucht'\r\n    }\r\n\r\n    const actionLabel = actionLabels[action] || action\r\n    const message = `${domain?.toUpperCase()} ${number}: ${actionLabel}`\r\n\r\n    // Different toast styles based on action\r\n    if (action === 'reject') {\r\n      toast({\r\n        title: `ÔØî ${  message}`,\r\n        variant: 'destructive',\r\n      })\r\n    } else {\r\n      toast({\r\n        title: `Ô£à ${  message}`,\r\n      })\r\n    }\r\n  }\r\n\r\n  // Handle audit events (exports, access logs, etc.)\r\n  const handleAuditEvent = (event: any): void => {\r\n    const { type, user, domain, count } = event\r\n\r\n    switch (type) {\r\n      case 'export':\r\n        toast({\r\n          title: `­ƒôè Export: ${count} ${domain}-Datens├ñtze von ${user}`,\r\n        })\r\n        break\r\n      case 'audit_access':\r\n        // Only show for unusual access patterns\r\n        if (count && count > 10) {\r\n          toast({\r\n            title: `­ƒöì H├ñufiger Audit-Zugriff: ${domain} ${count}x`,\r\n            variant: 'default',\r\n          })\r\n        }\r\n        break\r\n      default:\r\n        console.log('Audit event:', event)\r\n    }\r\n  }\r\n}\r\n\r\n/**\r\n * Workflow Replay Hook\r\n * Can fetch and replay workflow events since a timestamp\r\n */\r\nexport function useWorkflowReplay() {\r\n  const replayEvents = async (since = 0): Promise<any[]> => {\r\n    try {\r\n      const response = await fetch(`/api/workflow/replay/workflow?since=${since}`)\r\n      const data = await response.json()\r\n\r\n      if (data.ok) {\r\n        return data.events || []\r\n      }\r\n\r\n      console.warn('Replay failed:', data)\r\n      return []\r\n    } catch (error) {\r\n      console.error('Error replaying workflow events:', error)\r\n      return []\r\n    }\r\n  }\r\n\r\n  return { replayEvents }\r\n}","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\Jochen\\VALEO-NeuroERP-3.0\\packages\\frontend-web\\src\\i18n\\config.ts","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":66,"column":49,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":66,"endColumn":51},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":66,"column":49,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":66,"endColumn":51}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * i18n Configuration f├╝r VALEO NeuroERP\r\n * \r\n * Aktuell verf├╝gbar: DE (Deutsch)\r\n * Geplant f├╝r Lazy-Loading: EN, FR, ES, PT, ZH\r\n */\r\n\r\nimport i18n from 'i18next';\r\nimport { initReactI18next } from 'react-i18next';\r\nimport LanguageDetector from 'i18next-browser-languagedetector';\r\nimport Backend from 'i18next-http-backend';\r\n\r\nimport de from './locales/de/translation.json';\r\n\r\ni18n\r\n  .use(Backend) // F├╝r zuk├╝nftiges Nachladen\r\n  .use(LanguageDetector)\r\n  .use(initReactI18next)\r\n  .init({\r\n    resources: {\r\n      de: { translation: de },\r\n      // EN, FR, ES, PT, ZH werden sp├ñter nachgeladen\r\n    },\r\n    \r\n    lng: 'de', // Standard: Deutsch\r\n    fallbackLng: 'de',\r\n    debug: false,\r\n    \r\n    // Alle geplanten Sprachen (f├╝r UI-Auswahl)\r\n    supportedLngs: ['de', 'en', 'fr', 'es', 'pt', 'zh'],\r\n    \r\n    detection: {\r\n      order: ['localStorage', 'navigator'],\r\n      caches: ['localStorage'],\r\n      lookupLocalStorage: 'valeo-language',\r\n    },\r\n    \r\n    interpolation: {\r\n      escapeValue: false,\r\n    },\r\n    \r\n    // Backend f├╝r Lazy-Loading\r\n    backend: {\r\n      loadPath: '/locales/{{lng}}/{{ns}}.json',\r\n      addPath: '/locales/{{lng}}/{{ns}}.json',\r\n    },\r\n    \r\n    react: {\r\n      useSuspense: false, // Wichtig f├╝r lazy-loading\r\n    },\r\n  });\r\n\r\nexport default i18n;\r\n\r\n// Verf├╝gbare Sprachen\r\nexport const availableLanguages = [\r\n  { code: 'de', name: 'Deutsch', flag: '­ƒç®­ƒç¬', available: true },\r\n  { code: 'en', name: 'English', flag: '­ƒç¼­ƒçº', available: false },\r\n  { code: 'fr', name: 'Fran├ºais', flag: '­ƒç½­ƒçÀ', available: false },\r\n  { code: 'es', name: 'Espa├▒ol', flag: '­ƒç¬­ƒç©', available: false },\r\n  { code: 'pt', name: 'Portugu├¬s', flag: '­ƒçÁ­ƒç╣', available: false },\r\n  { code: 'zh', name: 'õ©¡µûç', flag: '­ƒç¿­ƒç│', available: false },\r\n] as const;\r\n\r\n// Helper: Sprache dynamisch nachladen\r\nexport const loadLanguage = async (lng: string) => {\r\n  if (!i18n.hasResourceBundle(lng, 'translation')) {\r\n    await i18n.loadLanguages(lng);\r\n  }\r\n  await i18n.changeLanguage(lng);\r\n};\r\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\Jochen\\VALEO-NeuroERP-3.0\\packages\\frontend-web\\src\\layouts\\DashboardLayout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\Jochen\\VALEO-NeuroERP-3.0\\packages\\frontend-web\\src\\lib\\api-client.ts","messages":[{"ruleId":"@typescript-eslint/strict-boolean-expressions","severity":1,"message":"Unexpected nullable string value in conditional. Please handle the nullish/empty cases explicitly.","line":12,"column":20,"nodeType":"Identifier","messageId":"conditionErrorNullableString","endLine":12,"endColumn":27,"suggestions":[{"messageId":"conditionFixCompareNullish","fix":{"range":[253,260],"text":"(baseUrl != null)"},"desc":"Change condition to check for null/undefined (`value != null`)"},{"messageId":"conditionFixDefaultEmptyString","fix":{"range":[253,260],"text":"(baseUrl ?? \"\")"},"desc":"Explicitly treat nullish value the same as an empty string (`value ?? \"\"`)"},{"messageId":"conditionFixCastBoolean","fix":{"range":[253,260],"text":"(Boolean(baseUrl))"},"desc":"Explicitly cast value to a boolean (`Boolean(value)`)"}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":12,"column":28,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":12,"endColumn":30,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[253,297],"text":"(baseUrl ?? import.meta.env.VITE_API_BASE_URL)"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":21,"column":49,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":21,"endColumn":51,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[565,567],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/strict-boolean-expressions","severity":1,"message":"Unexpected nullable string value in conditional. Please handle the nullish/empty cases explicitly.","line":24,"column":9,"nodeType":"Identifier","messageId":"conditionErrorNullableString","endLine":24,"endColumn":14,"suggestions":[{"messageId":"conditionFixCompareNullish","fix":{"range":[620,625],"text":"token != null"},"desc":"Change condition to check for null/undefined (`value != null`)"},{"messageId":"conditionFixDefaultEmptyString","fix":{"range":[620,625],"text":"token ?? \"\""},"desc":"Explicitly treat nullish value the same as an empty string (`value ?? \"\"`)"},{"messageId":"conditionFixCastBoolean","fix":{"range":[620,625],"text":"Boolean(token)"},"desc":"Explicitly cast value to a boolean (`Boolean(value)`)"}]},{"ruleId":"@typescript-eslint/strict-boolean-expressions","severity":1,"message":"Unexpected value in conditional. A boolean expression is required.","line":29,"column":9,"nodeType":"MemberExpression","messageId":"conditionErrorOther","endLine":29,"endColumn":21},{"ruleId":"@typescript-eslint/no-magic-numbers","severity":1,"message":"No magic number: 401.","line":39,"column":29,"nodeType":"Literal","messageId":"noMagic","endLine":39,"endColumn":32},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":65,"column":17,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":65,"endColumn":20,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1674,1677],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1674,1677],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":78,"column":18,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":78,"endColumn":21,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1978,1981],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1978,1981],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Argument 'data' should be typed with a non-any type.","line":78,"column":41,"nodeType":"Identifier","messageId":"anyTypedArg","endLine":78,"endColumn":51},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":78,"column":48,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":78,"endColumn":51,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2008,2011],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2008,2011],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/strict-boolean-expressions","severity":1,"message":"Unexpected any value in conditional. An explicit comparison or type cast is required.","line":81,"column":13,"nodeType":"Identifier","messageId":"conditionErrorAny","endLine":81,"endColumn":17,"suggestions":[{"messageId":"conditionFixCastBoolean","fix":{"range":[2114,2118],"text":"(Boolean(data))"},"desc":"Explicitly cast value to a boolean (`Boolean(value)`)"}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":94,"column":17,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":94,"endColumn":20,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2361,2364],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2361,2364],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Argument 'data' should be typed with a non-any type.","line":94,"column":40,"nodeType":"Identifier","messageId":"anyTypedArg","endLine":94,"endColumn":50},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":94,"column":47,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":94,"endColumn":50,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2391,2394],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2391,2394],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/strict-boolean-expressions","severity":1,"message":"Unexpected any value in conditional. An explicit comparison or type cast is required.","line":97,"column":13,"nodeType":"Identifier","messageId":"conditionErrorAny","endLine":97,"endColumn":17,"suggestions":[{"messageId":"conditionFixCastBoolean","fix":{"range":[2496,2500],"text":"(Boolean(data))"},"desc":"Explicitly cast value to a boolean (`Boolean(value)`)"}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":110,"column":20,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":110,"endColumn":23,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2748,2751],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2748,2751],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":16,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * API-Client mit automatischer Token-Injection\r\n * Handles token refresh und 401-Errors\r\n */\r\n\r\nimport { auth } from './auth'\r\n\r\nexport class APIClient {\r\n  private readonly baseUrl: string\r\n\r\n  constructor(baseUrl?: string) {\r\n    this.baseUrl = baseUrl || import.meta.env.VITE_API_BASE_URL || 'http://localhost:8000'\r\n  }\r\n\r\n  /**\r\n   * Fetch mit automatischer Token-Injection\r\n   */\r\n  async fetch(endpoint: string, options: RequestInit = {}): Promise<Response> {\r\n    const token = auth.getAccessToken()\r\n\r\n    const headers = new Headers(options.headers || {})\r\n    \r\n    // Add Authorization header\r\n    if (token) {\r\n      headers.set('Authorization', `Bearer ${token}`)\r\n    }\r\n\r\n    // Add Content-Type if body present\r\n    if (options.body && !headers.has('Content-Type')) {\r\n      headers.set('Content-Type', 'application/json')\r\n    }\r\n\r\n    const response = await fetch(`${this.baseUrl}${endpoint}`, {\r\n      ...options,\r\n      headers,\r\n    })\r\n\r\n    // Handle 401 - Try token refresh\r\n    if (response.status === 401) {\r\n      const refreshed = await auth.refreshAccessToken()\r\n      \r\n      if (refreshed) {\r\n        // Retry request with new token\r\n        const newToken = auth.getAccessToken()\r\n        headers.set('Authorization', `Bearer ${newToken}`)\r\n        \r\n        return fetch(`${this.baseUrl}${endpoint}`, {\r\n          ...options,\r\n          headers,\r\n        })\r\n      } else {\r\n        // Refresh failed ÔåÆ Logout\r\n        auth.logout()\r\n        window.location.href = '/login'\r\n        throw new Error('Session expired. Please login again.')\r\n      }\r\n    }\r\n\r\n    return response\r\n  }\r\n\r\n  /**\r\n   * GET request\r\n   */\r\n  async get<T = any>(endpoint: string): Promise<T> {\r\n    const response = await this.fetch(endpoint, { method: 'GET' })\r\n    \r\n    if (!response.ok) {\r\n      throw new Error(`GET ${endpoint} failed: ${response.status}`)\r\n    }\r\n    \r\n    return response.json()\r\n  }\r\n\r\n  /**\r\n   * POST request\r\n   */\r\n  async post<T = any>(endpoint: string, data?: any): Promise<T> {\r\n    const response = await this.fetch(endpoint, {\r\n      method: 'POST',\r\n      body: data ? JSON.stringify(data) : undefined,\r\n    })\r\n    \r\n    if (!response.ok) {\r\n      throw new Error(`POST ${endpoint} failed: ${response.status}`)\r\n    }\r\n    \r\n    return response.json()\r\n  }\r\n\r\n  /**\r\n   * PUT request\r\n   */\r\n  async put<T = any>(endpoint: string, data?: any): Promise<T> {\r\n    const response = await this.fetch(endpoint, {\r\n      method: 'PUT',\r\n      body: data ? JSON.stringify(data) : undefined,\r\n    })\r\n    \r\n    if (!response.ok) {\r\n      throw new Error(`PUT ${endpoint} failed: ${response.status}`)\r\n    }\r\n    \r\n    return response.json()\r\n  }\r\n\r\n  /**\r\n   * DELETE request\r\n   */\r\n  async delete<T = any>(endpoint: string): Promise<T> {\r\n    const response = await this.fetch(endpoint, { method: 'DELETE' })\r\n    \r\n    if (!response.ok) {\r\n      throw new Error(`DELETE ${endpoint} failed: ${response.status}`)\r\n    }\r\n    \r\n    return response.json()\r\n  }\r\n}\r\n\r\n// Singleton\r\nexport const apiClient = new APIClient()\r\n\r\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\Jochen\\VALEO-NeuroERP-3.0\\packages\\frontend-web\\src\\lib\\auth.ts","messages":[{"ruleId":"@typescript-eslint/strict-boolean-expressions","severity":1,"message":"Unexpected any value in conditional. An explicit comparison or type cast is required.","line":29,"column":19,"nodeType":"MemberExpression","messageId":"conditionErrorAny","endLine":29,"endColumn":58,"suggestions":[{"messageId":"conditionFixCastBoolean","fix":{"range":[479,518],"text":"(Boolean(import.meta.env.VITE_OIDC_DISCOVERY_URL))"},"desc":"Explicitly cast value to a boolean (`Boolean(value)`)"}]},{"ruleId":"@typescript-eslint/strict-boolean-expressions","severity":1,"message":"Unexpected any value in conditional. An explicit comparison or type cast is required.","line":31,"column":18,"nodeType":"MemberExpression","messageId":"conditionErrorAny","endLine":31,"endColumn":56,"suggestions":[{"messageId":"conditionFixCastBoolean","fix":{"range":[602,640],"text":"(Boolean(import.meta.env.VITE_OIDC_REDIRECT_URI))"},"desc":"Explicitly cast value to a boolean (`Boolean(value)`)"}]},{"ruleId":"@typescript-eslint/strict-boolean-expressions","severity":1,"message":"Unexpected nullable string value in conditional. Please handle the nullish/empty cases explicitly.","line":46,"column":9,"nodeType":"MemberExpression","messageId":"conditionErrorNullableString","endLine":46,"endColumn":25,"suggestions":[{"messageId":"conditionFixCompareNullish","fix":{"range":[1095,1111],"text":"this.accessToken != null"},"desc":"Change condition to check for null/undefined (`value != null`)"},{"messageId":"conditionFixDefaultEmptyString","fix":{"range":[1095,1111],"text":"this.accessToken ?? \"\""},"desc":"Explicitly treat nullish value the same as an empty string (`value ?? \"\"`)"},{"messageId":"conditionFixCastBoolean","fix":{"range":[1095,1111],"text":"Boolean(this.accessToken)"},"desc":"Explicitly cast value to a boolean (`Boolean(value)`)"}]},{"ruleId":"@typescript-eslint/no-magic-numbers","severity":1,"message":"No magic number: 32.","line":73,"column":45,"nodeType":"Literal","messageId":"noMagic","endLine":73,"endColumn":47},{"ruleId":"@typescript-eslint/no-magic-numbers","severity":1,"message":"No magic number: 32.","line":74,"column":45,"nodeType":"Literal","messageId":"noMagic","endLine":74,"endColumn":47},{"ruleId":"@typescript-eslint/strict-boolean-expressions","severity":1,"message":"Unexpected nullable string value in conditional. Please handle the nullish/empty cases explicitly.","line":141,"column":25,"nodeType":"Identifier","messageId":"conditionErrorNullableString","endLine":141,"endColumn":37,"suggestions":[{"messageId":"conditionFixCompareNullish","fix":{"range":[3778,3790],"text":"(refreshToken != null)"},"desc":"Change condition to check for null/undefined (`value != null`)"},{"messageId":"conditionFixDefaultEmptyString","fix":{"range":[3778,3790],"text":"(refreshToken ?? \"\")"},"desc":"Explicitly treat nullish value the same as an empty string (`value ?? \"\"`)"},{"messageId":"conditionFixCastBoolean","fix":{"range":[3778,3790],"text":"(Boolean(refreshToken))"},"desc":"Explicitly cast value to a boolean (`Boolean(value)`)"}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":141,"column":38,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":141,"endColumn":40,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[3791,3793],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/strict-boolean-expressions","severity":1,"message":"Unexpected nullable string value in conditional. Please handle the nullish/empty cases explicitly.","line":144,"column":9,"nodeType":"Identifier","messageId":"conditionErrorNullableString","endLine":144,"endColumn":21,"suggestions":[{"messageId":"conditionFixCompareNullish","fix":{"range":[3865,3877],"text":"refreshToken != null"},"desc":"Change condition to check for null/undefined (`value != null`)"},{"messageId":"conditionFixDefaultEmptyString","fix":{"range":[3865,3877],"text":"refreshToken ?? \"\""},"desc":"Explicitly treat nullish value the same as an empty string (`value ?? \"\"`)"},{"messageId":"conditionFixCastBoolean","fix":{"range":[3865,3877],"text":"Boolean(refreshToken)"},"desc":"Explicitly cast value to a boolean (`Boolean(value)`)"}]},{"ruleId":"@typescript-eslint/strict-boolean-expressions","severity":1,"message":"Unexpected nullable string value in conditional. Please handle the nullish/empty cases explicitly.","line":161,"column":10,"nodeType":"MemberExpression","messageId":"conditionErrorNullableString","endLine":161,"endColumn":27,"suggestions":[{"messageId":"conditionFixCompareNullish","fix":{"range":[4248,4266],"text":"this.refreshToken == null"},"desc":"Change condition to check for null/undefined (`value != null`)"},{"messageId":"conditionFixDefaultEmptyString","fix":{"range":[4249,4266],"text":"(this.refreshToken ?? \"\")"},"desc":"Explicitly treat nullish value the same as an empty string (`value ?? \"\"`)"},{"messageId":"conditionFixCastBoolean","fix":{"range":[4248,4266],"text":"!Boolean(this.refreshToken)"},"desc":"Explicitly cast value to a boolean (`Boolean(value)`)"}]},{"ruleId":"@typescript-eslint/strict-boolean-expressions","severity":1,"message":"Unexpected nullable boolean value in conditional. Please handle the nullish case explicitly.","line":235,"column":12,"nodeType":"ChainExpression","messageId":"conditionErrorNullableBoolean","endLine":235,"endColumn":46,"suggestions":[{"messageId":"conditionFixDefaultFalse","fix":{"range":[5954,5988],"text":"((this.user?.scopes?.includes(scope)) ?? false)"},"desc":"Explicitly treat nullish value the same as false (`value ?? false`)"},{"messageId":"conditionFixCompareTrue","fix":{"range":[5954,5988],"text":"((this.user?.scopes?.includes(scope)) === true)"},"desc":"Change condition to check if true (`value === true`)"}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":235,"column":47,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":235,"endColumn":49,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[5989,5991],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/strict-boolean-expressions","severity":1,"message":"Unexpected nullable boolean value in conditional. Please handle the nullish case explicitly.","line":242,"column":12,"nodeType":"ChainExpression","messageId":"conditionErrorNullableBoolean","endLine":242,"endColumn":44,"suggestions":[{"messageId":"conditionFixDefaultFalse","fix":{"range":[6107,6139],"text":"((this.user?.roles?.includes(role)) ?? false)"},"desc":"Explicitly treat nullish value the same as false (`value ?? false`)"},{"messageId":"conditionFixCompareTrue","fix":{"range":[6107,6139],"text":"((this.user?.roles?.includes(role)) === true)"},"desc":"Change condition to check if true (`value === true`)"}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":242,"column":45,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":242,"endColumn":47,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[6107,6183],"text":"(this.user?.roles?.includes(role) ?? this.user?.scopes?.includes('admin:all'))"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/strict-boolean-expressions","severity":1,"message":"Unexpected nullable boolean value in conditional. Please handle the nullish case explicitly.","line":242,"column":48,"nodeType":"ChainExpression","messageId":"conditionErrorNullableBoolean","endLine":242,"endColumn":88,"suggestions":[{"messageId":"conditionFixDefaultFalse","fix":{"range":[6143,6183],"text":"((this.user?.scopes?.includes('admin:all')) ?? false)"},"desc":"Explicitly treat nullish value the same as false (`value ?? false`)"},{"messageId":"conditionFixCompareTrue","fix":{"range":[6143,6183],"text":"((this.user?.scopes?.includes('admin:all')) === true)"},"desc":"Change condition to check if true (`value === true`)"}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":242,"column":89,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":242,"endColumn":91,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[6184,6186],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":15,"fixableErrorCount":0,"fixableWarningCount":0,"source":"´╗┐/**\r\n * Authentication Library\r\n * OIDC/OAuth2 Flow f├╝r Production\r\n */\r\n\r\nimport { jwtDecode } from 'jwt-decode'\r\n\r\nexport interface User {\r\n  sub: string\r\n  email: string\r\n  name: string\r\n  scopes: string[]\r\n  roles: string[]\r\n  exp: number\r\n}\r\n\r\nexport interface AuthConfig {\r\n  oidc: {\r\n    discoveryUrl: string\r\n    clientId: string\r\n    redirectUri: string\r\n    scopes: string[]\r\n  }\r\n}\r\n\r\n// Auth-Config aus ENV\r\nconst config: AuthConfig = {\r\n  oidc: {\r\n    discoveryUrl: import.meta.env.VITE_OIDC_DISCOVERY_URL || '',\r\n    clientId: import.meta.env.VITE_OIDC_CLIENT_ID || '',\r\n    redirectUri: import.meta.env.VITE_OIDC_REDIRECT_URI || `${window.location.origin}/callback`,\r\n    scopes: ['openid', 'profile', 'email', 'offline_access'],\r\n  },\r\n}\r\n\r\nclass AuthService {\r\n  private accessToken: string | null = null\r\n  private refreshToken: string | null = null\r\n  private user: User | null = null\r\n\r\n  constructor() {\r\n    // Load from localStorage\r\n    this.accessToken = localStorage.getItem('access_token')\r\n    this.refreshToken = localStorage.getItem('refresh_token')\r\n    \r\n    if (this.accessToken) {\r\n      try {\r\n        this.user = jwtDecode<User>(this.accessToken)\r\n        \r\n        // Check if expired\r\n        if (this.user.exp * 1000 < Date.now()) {\r\n          this.logout()\r\n        }\r\n      } catch (e) {\r\n        this.logout()\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Startet OIDC-Login-Flow\r\n   */\r\n  async login(): Promise<void> {\r\n    if (!config.oidc.discoveryUrl) {\r\n      throw new Error('OIDC not configured. Set VITE_OIDC_DISCOVERY_URL')\r\n    }\r\n\r\n    // Fetch OIDC discovery document\r\n    const discoveryResponse = await fetch(config.oidc.discoveryUrl)\r\n    const discovery = await discoveryResponse.json()\r\n\r\n    // Generate state & nonce\r\n    const state = this.generateRandomString(32)\r\n    const nonce = this.generateRandomString(32)\r\n\r\n    sessionStorage.setItem('auth_state', state)\r\n    sessionStorage.setItem('auth_nonce', nonce)\r\n\r\n    // Build authorization URL\r\n    const params = new URLSearchParams({\r\n      client_id: config.oidc.clientId,\r\n      redirect_uri: config.oidc.redirectUri,\r\n      response_type: 'code',\r\n      scope: config.oidc.scopes.join(' '),\r\n      state,\r\n      nonce,\r\n    })\r\n\r\n    const authUrl = `${discovery.authorization_endpoint}?${params.toString()}`\r\n\r\n    // Redirect to OIDC provider\r\n    window.location.href = authUrl\r\n  }\r\n\r\n  /**\r\n   * Callback-Handler nach OIDC-Redirect\r\n   */\r\n  async handleCallback(code: string, state: string): Promise<void> {\r\n    // Verify state\r\n    const savedState = sessionStorage.getItem('auth_state')\r\n    if (state !== savedState) {\r\n      throw new Error('Invalid state parameter')\r\n    }\r\n\r\n    // Exchange code for tokens\r\n    const discoveryResponse = await fetch(config.oidc.discoveryUrl)\r\n    const discovery = await discoveryResponse.json()\r\n\r\n    const tokenResponse = await fetch(discovery.token_endpoint, {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/x-www-form-urlencoded',\r\n      },\r\n      body: new URLSearchParams({\r\n        grant_type: 'authorization_code',\r\n        code,\r\n        redirect_uri: config.oidc.redirectUri,\r\n        client_id: config.oidc.clientId,\r\n      }),\r\n    })\r\n\r\n    if (!tokenResponse.ok) {\r\n      throw new Error('Token exchange failed')\r\n    }\r\n\r\n    const tokens = await tokenResponse.json()\r\n\r\n    // Save tokens\r\n    this.setTokens(tokens.access_token, tokens.refresh_token)\r\n\r\n    // Clear session storage\r\n    sessionStorage.removeItem('auth_state')\r\n    sessionStorage.removeItem('auth_nonce')\r\n  }\r\n\r\n  /**\r\n   * Speichert Tokens und decoded User\r\n   */\r\n  private setTokens(accessToken: string, refreshToken?: string): void {\r\n    this.accessToken = accessToken\r\n    this.refreshToken = refreshToken || null\r\n\r\n    localStorage.setItem('access_token', accessToken)\r\n    if (refreshToken) {\r\n      localStorage.setItem('refresh_token', refreshToken)\r\n    }\r\n\r\n    // Decode JWT\r\n    try {\r\n      this.user = jwtDecode<User>(accessToken)\r\n    } catch (e) {\r\n      console.error('Failed to decode JWT:', e)\r\n      this.logout()\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Refresh Access-Token mit Refresh-Token\r\n   */\r\n  async refreshAccessToken(): Promise<boolean> {\r\n    if (!this.refreshToken) {\r\n      return false\r\n    }\r\n\r\n    try {\r\n      const discoveryResponse = await fetch(config.oidc.discoveryUrl)\r\n      const discovery = await discoveryResponse.json()\r\n\r\n      const tokenResponse = await fetch(discovery.token_endpoint, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/x-www-form-urlencoded',\r\n        },\r\n        body: new URLSearchParams({\r\n          grant_type: 'refresh_token',\r\n          refresh_token: this.refreshToken,\r\n          client_id: config.oidc.clientId,\r\n        }),\r\n      })\r\n\r\n      if (!tokenResponse.ok) {\r\n        return false\r\n      }\r\n\r\n      const tokens = await tokenResponse.json()\r\n      this.setTokens(tokens.access_token, tokens.refresh_token)\r\n\r\n      return true\r\n    } catch (e) {\r\n      console.error('Token refresh failed:', e)\r\n      return false\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Logout (lokale Tokens l├Âschen)\r\n   */\r\n  logout(): void {\r\n    this.accessToken = null\r\n    this.refreshToken = null\r\n    this.user = null\r\n\r\n    localStorage.removeItem('access_token')\r\n    localStorage.removeItem('refresh_token')\r\n\r\n    // Optional: OIDC-Logout\r\n    // window.location.href = `${discovery.end_session_endpoint}?...`\r\n  }\r\n\r\n  /**\r\n   * Gibt aktuellen User zur├╝ck\r\n   */\r\n  getUser(): User | null {\r\n    return this.user\r\n  }\r\n\r\n  /**\r\n   * Gibt Access-Token zur├╝ck\r\n   */\r\n  getAccessToken(): string | null {\r\n    return this.accessToken\r\n  }\r\n\r\n  /**\r\n   * Pr├╝ft ob User authenticated ist\r\n   */\r\n  isAuthenticated(): boolean {\r\n    return this.accessToken !== null && this.user !== null\r\n  }\r\n\r\n  /**\r\n   * Pr├╝ft ob User bestimmte Scope hat\r\n   */\r\n  hasScope(scope: string): boolean {\r\n    return this.user?.scopes?.includes(scope) || false\r\n  }\r\n\r\n  /**\r\n   * Pr├╝ft ob User bestimmte Rolle hat\r\n   */\r\n  hasRole(role: string): boolean {\r\n    return this.user?.roles?.includes(role) || this.user?.scopes?.includes('admin:all') || false\r\n  }\r\n\r\n  /**\r\n   * Helper: Generate random string\r\n   */\r\n  private generateRandomString(length: number): string {\r\n    const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789'\r\n    let result = ''\r\n    const randomArray = new Uint8Array(length)\r\n    crypto.getRandomValues(randomArray)\r\n    \r\n    for (let i = 0; i < length; i++) {\r\n      result += chars[randomArray[i] % chars.length]\r\n    }\r\n    \r\n    return result\r\n  }\r\n}\r\n\r\n// Singleton\r\nexport const auth = new AuthService()\r\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\Jochen\\VALEO-NeuroERP-3.0\\packages\\frontend-web\\src\\lib\\axios.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\Jochen\\VALEO-NeuroERP-3.0\\packages\\frontend-web\\src\\lib\\event-router.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'WorkflowEvent' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":37,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":50},{"ruleId":"no-unused-vars","severity":1,"message":"'WorkflowEvent' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":37,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":50}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"´╗┐import { toast } from \"@/hooks/use-toast\";\nimport type { MCPEvent, ToastEvent, WorkflowEvent } from \"@/lib/mcp-events\";\n\nfunction mapVariant(variant: ToastEvent[\"variant\"]): \"default\" | \"destructive\" {\n  return variant === \"destructive\" ? \"destructive\" : \"default\";\n}\n\nexport function routeMCPEvent(event: MCPEvent): void {\n  switch (event.topic) {\n    case \"toast\": {\n      toast({\n        title: event.title,\n        description: event.description,\n        variant: mapVariant(event.variant),\n      });\n      break;\n    }\n    case \"notif\": {\n      // Placeholder for future notification center integration\n      // e.g. notificationStore.add(event)\n      break;\n    }\n    case \"log\": {\n      if (import.meta.env.DEV) {\n        const scope = (typeof event.scope === 'string' && event.scope.length > 0) ? `[${event.scope}] ` : \"\";\n        console.info(`${scope}${event.text}`);\n      }\n      break;\n    }\n    case \"workflow\": {\n      const workflowEvent = event;\n      const actionLabels = {\n        submit: \"eingereicht\",\n        approve: \"freigegeben\",\n        reject: \"abgelehnt\",\n        post: \"gebucht\"\n      };\n      const domainLabels = {\n        sales: \"Verkauf\",\n        purchase: \"Einkauf\"\n      };\n\n      toast({\n        title: `Beleg ${actionLabels[workflowEvent.action]}`,\n        description: `${domainLabels[workflowEvent.domain]} ${workflowEvent.number}: ${workflowEvent.fromState} ÔåÆ ${workflowEvent.toState}`,\n        variant: workflowEvent.action === \"reject\" ? \"destructive\" : \"default\",\n      });\n      break;\n    }\n    case \"job\":\n    case \"agent\":\n    case \"task\":\n    default:\n      break;\n  }\n}\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\Jochen\\VALEO-NeuroERP-3.0\\packages\\frontend-web\\src\\lib\\i18n.ts","messages":[{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":91,"column":17,"nodeType":"Punctuator","messageId":"preferNullishOverOr","endLine":91,"endColumn":19,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[2123,2125],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":96,"column":14,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":96,"endColumn":17,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2232,2235],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2232,2235],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/strict-boolean-expressions","severity":1,"message":"Unexpected any value in conditional. An explicit comparison or type cast is required.","line":99,"column":9,"nodeType":"Identifier","messageId":"conditionErrorAny","endLine":99,"endColumn":14,"suggestions":[{"messageId":"conditionFixCastBoolean","fix":{"range":[2304,2309],"text":"(Boolean(value))"},"desc":"Explicitly cast value to a boolean (`Boolean(value)`)"}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * i18n (Internationalization) Support\r\n * Simple translation system for DE/EN\r\n */\r\n\r\ntype Locale = 'de' | 'en'\r\n\r\ninterface Translations {\r\n  [key: string]: string | Translations\r\n}\r\n\r\nconst translations: Record<Locale, Translations> = {\r\n  de: {\r\n    common: {\r\n      save: 'Speichern',\r\n      cancel: 'Abbrechen',\r\n      delete: 'L├Âschen',\r\n      edit: 'Bearbeiten',\r\n      close: 'Schlie├ƒen',\r\n      search: 'Suchen',\r\n      loading: 'L├ñdt...',\r\n      error: 'Fehler',\r\n      success: 'Erfolgreich',\r\n    },\r\n    workflow: {\r\n      draft: 'Entwurf',\r\n      pending: 'Ausstehend',\r\n      approved: 'Freigegeben',\r\n      posted: 'Gebucht',\r\n      rejected: 'Abgelehnt',\r\n      submit: 'Einreichen',\r\n      approve: 'Freigeben',\r\n      reject: 'Ablehnen',\r\n      post: 'Buchen',\r\n    },\r\n    documents: {\r\n      sales_order: 'Kundenauftrag',\r\n      purchase_order: 'Bestellung',\r\n      invoice: 'Rechnung',\r\n      delivery: 'Lieferschein',\r\n      print: 'Drucken',\r\n      export: 'Exportieren',\r\n      archive: 'Archiv',\r\n    },\r\n  },\r\n  en: {\r\n    common: {\r\n      save: 'Save',\r\n      cancel: 'Cancel',\r\n      delete: 'Delete',\r\n      edit: 'Edit',\r\n      close: 'Close',\r\n      search: 'Search',\r\n      loading: 'Loading...',\r\n      error: 'Error',\r\n      success: 'Success',\r\n    },\r\n    workflow: {\r\n      draft: 'Draft',\r\n      pending: 'Pending',\r\n      approved: 'Approved',\r\n      posted: 'Posted',\r\n      rejected: 'Rejected',\r\n      submit: 'Submit',\r\n      approve: 'Approve',\r\n      reject: 'Reject',\r\n      post: 'Post',\r\n    },\r\n    documents: {\r\n      sales_order: 'Sales Order',\r\n      purchase_order: 'Purchase Order',\r\n      invoice: 'Invoice',\r\n      delivery: 'Delivery Note',\r\n      print: 'Print',\r\n      export: 'Export',\r\n      archive: 'Archive',\r\n    },\r\n  },\r\n}\r\n\r\nlet currentLocale: Locale = 'de'\r\n\r\nexport function setLocale(locale: Locale): void {\r\n  currentLocale = locale\r\n  localStorage.setItem('locale', locale)\r\n  document.documentElement.lang = locale\r\n}\r\n\r\nexport function getLocale(): Locale {\r\n  const stored = localStorage.getItem('locale') as Locale | null\r\n  return stored || currentLocale\r\n}\r\n\r\nexport function t(key: string): string {\r\n  const keys = key.split('.')\r\n  let value: any = translations[currentLocale]\r\n\r\n  for (const k of keys) {\r\n    if (value && typeof value === 'object') {\r\n      value = value[k]\r\n    } else {\r\n      return key // Return key if translation not found\r\n    }\r\n  }\r\n\r\n  return typeof value === 'string' ? value : key\r\n}\r\n\r\n// Initialize locale from localStorage\r\nif (typeof window !== 'undefined') {\r\n  const stored = localStorage.getItem('locale') as Locale | null\r\n  if (stored) {\r\n    currentLocale = stored\r\n    document.documentElement.lang = stored\r\n  }\r\n}\r\n\r\nexport { type Locale }\r\n\r\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\Jochen\\VALEO-NeuroERP-3.0\\packages\\frontend-web\\src\\lib\\mcp-event-bus.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\Jochen\\VALEO-NeuroERP-3.0\\packages\\frontend-web\\src\\lib\\mcp-events.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\Jochen\\VALEO-NeuroERP-3.0\\packages\\frontend-web\\src\\lib\\mcp-realtime.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\Jochen\\VALEO-NeuroERP-3.0\\packages\\frontend-web\\src\\lib\\mcp.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\Jochen\\VALEO-NeuroERP-3.0\\packages\\frontend-web\\src\\lib\\number-de.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\Jochen\\VALEO-NeuroERP-3.0\\packages\\frontend-web\\src\\lib\\query.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\Jochen\\VALEO-NeuroERP-3.0\\packages\\frontend-web\\src\\lib\\sse-client.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\Jochen\\VALEO-NeuroERP-3.0\\packages\\frontend-web\\src\\lib\\sse.ts","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":3,"column":8,"nodeType":"FunctionDeclaration","messageId":"missingReturnType","endLine":3,"endColumn":23},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":3,"column":8,"nodeType":"FunctionDeclaration","messageId":"missingReturnType","endLine":3,"endColumn":23},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":16,"column":16,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":16,"endColumn":19,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[379,382],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[379,382],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":19,"column":5,"nodeType":"FunctionDeclaration","messageId":"missingReturnType","endLine":19,"endColumn":21},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":23,"column":26,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":23,"endColumn":28},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":30,"column":23,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":30,"endColumn":25},{"ruleId":"@typescript-eslint/no-magic-numbers","severity":1,"message":"No magic number: 1500.","line":35,"column":37,"nodeType":"Literal","messageId":"noMagic","endLine":35,"endColumn":41},{"ruleId":"@typescript-eslint/strict-boolean-expressions","severity":1,"message":"Unexpected nullable number value in conditional. Please handle the nullish/zero/NaN cases explicitly.","line":41,"column":9,"nodeType":"ChainExpression","messageId":"conditionErrorNullableNumber","endLine":41,"endColumn":26,"suggestions":[{"messageId":"conditionFixCompareNullish","fix":{"range":[947,964],"text":"((opts?.heartbeatMs) != null)"},"desc":"Change condition to check for null/undefined (`value != null`)"},{"messageId":"conditionFixDefaultZero","fix":{"range":[947,964],"text":"((opts?.heartbeatMs) ?? 0)"},"desc":"Explicitly treat nullish value the same as 0 (`value ?? 0`)"},{"messageId":"conditionFixCastBoolean","fix":{"range":[947,964],"text":"(Boolean((opts?.heartbeatMs)))"},"desc":"Explicitly cast value to a boolean (`Boolean(value)`)"}]},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":48,"column":15,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":48,"endColumn":17},{"ruleId":"@typescript-eslint/strict-boolean-expressions","severity":1,"message":"Unexpected any value in conditional. An explicit comparison or type cast is required.","line":50,"column":11,"nodeType":"Identifier","messageId":"conditionErrorAny","endLine":50,"endColumn":16,"suggestions":[{"messageId":"conditionFixCastBoolean","fix":{"range":[1215,1220],"text":"Boolean(timer)"},"desc":"Explicitly cast value to a boolean (`Boolean(value)`)"}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":10,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useEffect, useRef } from 'react'\r\n\r\nexport function useSSE(\r\n  channel: string,\r\n  onMessage: (data: unknown) => void,\r\n  opts?: {\r\n    onStatus?: (s: 'open' | 'closed' | 'error') => void\r\n    heartbeatMs?: number\r\n  }\r\n) {\r\n  const handler = useRef(onMessage)\r\n  handler.current = onMessage\r\n\r\n  useEffect(() => {\r\n    let es: EventSource | null = null\r\n    let timer: any = null\r\n    let stopped = false\r\n\r\n    function connect() {\r\n      if (stopped) return\r\n      es = new EventSource(`/api/stream/${channel}`)\r\n      opts?.onStatus?.('open')\r\n      es.onmessage = (e) => {\r\n        try {\r\n          handler.current(JSON.parse(e.data))\r\n        } catch {\r\n          // ignore parse errors\r\n        }\r\n      }\r\n      es.onerror = () => {\r\n        opts?.onStatus?.('error')\r\n        es?.close()\r\n        es = null\r\n        // Reconnect with backoff\r\n        timer = setTimeout(connect, 1500)\r\n      }\r\n    }\r\n\r\n    connect()\r\n\r\n    if (opts?.heartbeatMs && opts.heartbeatMs > 0) {\r\n      const hb = setInterval(() => {\r\n        // no-op: browser EventSource keeps alive; server may send comments\r\n      }, opts.heartbeatMs)\r\n      timer = hb\r\n    }\r\n\r\n    return () => {\r\n      stopped = true\r\n      if (timer) clearInterval(timer)\r\n      es?.close()\r\n    }\r\n  }, [channel])\r\n}","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\Jochen\\VALEO-NeuroERP-3.0\\packages\\frontend-web\\src\\lib\\useMcpRealtime.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\Jochen\\VALEO-NeuroERP-3.0\\packages\\frontend-web\\src\\lib\\utils.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\Jochen\\VALEO-NeuroERP-3.0\\packages\\frontend-web\\src\\main.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\Jochen\\VALEO-NeuroERP-3.0\\packages\\frontend-web\\src\\pages\\LazyPages.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":28,"column":8,"nodeType":"FunctionDeclaration","messageId":"missingReturnType","endLine":28,"endColumn":27},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":28,"column":8,"nodeType":"FunctionDeclaration","messageId":"missingReturnType","endLine":28,"endColumn":27}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * Lazy-Loaded Pages f├╝r Code-Splitting\r\n * Reduziert Initial-Bundle-Size\r\n */\r\n\r\nimport { lazy } from 'react'\r\n\r\n// Sales\r\nexport const SalesPage = lazy(() => import('./sales'))\r\nexport const ContractsPage = lazy(() => import('./contracts'))\r\n\r\n// Inventory\r\nexport const InventoryPage = lazy(() => import('./inventory'))\r\n\r\n// Documents\r\nexport const DocumentPage = lazy(() => import('./document'))\r\n\r\n// Pricing\r\nexport const PricingPage = lazy(() => import('./pricing'))\r\n\r\n// Weighing\r\nexport const WeighingPage = lazy(() => import('./weighing'))\r\n\r\n// Public\r\nexport const VerifyPage = lazy(() => import('./public/verify'))\r\n\r\n// Loading Component\r\nexport function PageLoader() {\r\n  return (\r\n    <div className=\"flex items-center justify-center h-screen\">\r\n      <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600\"></div>\r\n    </div>\r\n  )\r\n}\r\n\r\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\Jochen\\VALEO-NeuroERP-3.0\\packages\\frontend-web\\src\\pages\\admin\\setup\\dms-integration.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":30,"column":16,"nodeType":"FunctionDeclaration","messageId":"missingReturnType","endLine":30,"endColumn":43},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":30,"column":16,"nodeType":"FunctionDeclaration","messageId":"missingReturnType","endLine":30,"endColumn":43},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":43,"column":3,"nodeType":"FunctionDeclaration","messageId":"missingReturnType","endLine":43,"endColumn":28},{"ruleId":"@typescript-eslint/strict-boolean-expressions","severity":1,"message":"Unexpected nullable string value in conditional. Please handle the nullish/empty cases explicitly.","line":48,"column":11,"nodeType":"MemberExpression","messageId":"conditionErrorNullableString","endLine":48,"endColumn":20,"suggestions":[{"messageId":"conditionFixCompareNullish","fix":{"range":[1543,1552],"text":"data.base != null"},"desc":"Change condition to check for null/undefined (`value != null`)"},{"messageId":"conditionFixDefaultEmptyString","fix":{"range":[1543,1552],"text":"data.base ?? \"\""},"desc":"Explicitly treat nullish value the same as an empty string (`value ?? \"\"`)"},{"messageId":"conditionFixCastBoolean","fix":{"range":[1543,1552],"text":"Boolean(data.base)"},"desc":"Explicitly cast value to a boolean (`Boolean(value)`)"}]},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":56,"column":3,"nodeType":"FunctionDeclaration","messageId":"missingReturnType","endLine":56,"endColumn":32},{"ruleId":"@typescript-eslint/strict-boolean-expressions","severity":1,"message":"Unexpected any value in conditional. An explicit comparison or type cast is required.","line":74,"column":17,"nodeType":"MemberExpression","messageId":"conditionErrorAny","endLine":74,"endColumn":21,"suggestions":[{"messageId":"conditionFixCastBoolean","fix":{"range":[2208,2212],"text":"(Boolean(j.ok))"},"desc":"Explicitly cast value to a boolean (`Boolean(value)`)"}]},{"ruleId":"@typescript-eslint/strict-boolean-expressions","severity":1,"message":"Unexpected any value in conditional. An explicit comparison or type cast is required.","line":77,"column":16,"nodeType":"MemberExpression","messageId":"conditionErrorAny","endLine":77,"endColumn":20,"suggestions":[{"messageId":"conditionFixCastBoolean","fix":{"range":[2269,2273],"text":"(Boolean(j.ok))"},"desc":"Explicitly cast value to a boolean (`Boolean(value)`)"}]},{"ruleId":"@typescript-eslint/strict-boolean-expressions","severity":1,"message":"Unexpected any value in conditional. An explicit comparison or type cast is required.","line":78,"column":22,"nodeType":"MemberExpression","messageId":"conditionErrorAny","endLine":78,"endColumn":26,"suggestions":[{"messageId":"conditionFixCastBoolean","fix":{"range":[2338,2342],"text":"(Boolean(j.ok))"},"desc":"Explicitly cast value to a boolean (`Boolean(value)`)"}]},{"ruleId":"@typescript-eslint/strict-boolean-expressions","severity":1,"message":"Unexpected any value in conditional. An explicit comparison or type cast is required.","line":79,"column":18,"nodeType":"MemberExpression","messageId":"conditionErrorAny","endLine":79,"endColumn":22,"suggestions":[{"messageId":"conditionFixCastBoolean","fix":{"range":[2424,2428],"text":"(Boolean(j.ok))"},"desc":"Explicitly cast value to a boolean (`Boolean(value)`)"}]},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":93,"column":3,"nodeType":"FunctionDeclaration","messageId":"missingReturnType","endLine":93,"endColumn":27},{"ruleId":"@typescript-eslint/strict-boolean-expressions","severity":1,"message":"Unexpected nullable boolean value in conditional. Please handle the nullish case explicitly.","line":148,"column":12,"nodeType":"ChainExpression","messageId":"conditionErrorNullableBoolean","endLine":148,"endColumn":30,"suggestions":[{"messageId":"conditionFixDefaultFalse","fix":{"range":[4465,4483],"text":"((status?.configured) ?? false)"},"desc":"Explicitly treat nullish value the same as false (`value ?? false`)"},{"messageId":"conditionFixCompareTrue","fix":{"range":[4465,4483],"text":"((status?.configured) === true)"},"desc":"Change condition to check if true (`value === true`)"}]},{"ruleId":"@typescript-eslint/strict-boolean-expressions","severity":1,"message":"Unexpected nullable boolean value in conditional. Please handle the nullish case explicitly.","line":158,"column":10,"nodeType":"ChainExpression","messageId":"conditionErrorNullableBoolean","endLine":158,"endColumn":28,"suggestions":[{"messageId":"conditionFixDefaultFalse","fix":{"range":[4767,4785],"text":"((status?.configured) ?? false)"},"desc":"Explicitly treat nullish value the same as false (`value ?? false`)"},{"messageId":"conditionFixCompareTrue","fix":{"range":[4767,4785],"text":"((status?.configured) === true)"},"desc":"Change condition to check if true (`value === true`)"}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":12,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useEffect, useState } from 'react'\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card'\r\nimport { Button } from '@/components/ui/button'\r\nimport { Input } from '@/components/ui/input'\r\nimport { Label } from '@/components/ui/label'\r\nimport { Dialog, DialogContent, DialogFooter, DialogHeader, DialogTitle, DialogTrigger } from '@/components/ui/dialog'\r\nimport { useToast } from '@/hooks/use-toast'\r\nimport { Badge } from '@/components/ui/badge'\r\nimport { CheckCircle2, ExternalLink, Loader2 } from 'lucide-react'\r\n\r\ntype BootstrapResult = { \r\n  ok: boolean\r\n  created?: number\r\n  updated?: number\r\n  message?: string\r\n  document_types?: number\r\n  metadata_types?: number\r\n  error?: string\r\n}\r\n\r\ntype DmsStatus = {\r\n  ok: boolean\r\n  configured: boolean\r\n  base?: string\r\n  document_types?: number\r\n  metadata_types?: number\r\n  message?: string\r\n}\r\n\r\nexport default function DmsIntegrationCard() {\r\n  const { toast } = useToast()\r\n  const [open, setOpen] = useState(false)\r\n  const [base, setBase] = useState('http://localhost:8010')\r\n  const [token, setToken] = useState('')\r\n  const [loading, setLoading] = useState(false)\r\n  const [tested, setTested] = useState<'idle' | 'ok' | 'fail'>('idle')\r\n  const [status, setStatus] = useState<DmsStatus | null>(null)\r\n\r\n  useEffect(() => {\r\n    loadStatus()\r\n  }, [])\r\n\r\n  async function loadStatus() {\r\n    try {\r\n      const r = await fetch('/api/admin/dms/status')\r\n      const data: DmsStatus = await r.json()\r\n      setStatus(data)\r\n      if (data.base) {\r\n        setBase(data.base)\r\n      }\r\n    } catch (e) {\r\n      console.error('Failed to load DMS status:', e)\r\n    }\r\n  }\r\n\r\n  async function testConnection() {\r\n    if (!base || !token) {\r\n      toast({\r\n        title: 'Validierung fehlgeschlagen',\r\n        description: 'Bitte Base-URL und Token eingeben',\r\n        variant: 'destructive',\r\n      })\r\n      return\r\n    }\r\n\r\n    setLoading(true)\r\n    try {\r\n      const r = await fetch('/api/admin/dms/test', {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({ base, token }),\r\n      })\r\n      const j = await r.json()\r\n      setTested(j.ok ? 'ok' : 'fail')\r\n      \r\n      toast({\r\n        title: j.ok ? 'Ô£à Verbindung OK' : 'ÔØî Fehlgeschlagen',\r\n        description: j.ok ? 'Mayan-API erreichbar.' : (j.error ?? 'Unbekannter Fehler'),\r\n        variant: j.ok ? 'default' : 'destructive',\r\n      })\r\n    } catch (e) {\r\n      setTested('fail')\r\n      toast({\r\n        title: 'Verbindungsfehler',\r\n        description: e instanceof Error ? e.message : 'Unbekannter Fehler',\r\n        variant: 'destructive',\r\n      })\r\n    } finally {\r\n      setLoading(false)\r\n    }\r\n  }\r\n\r\n  async function bootstrap() {\r\n    if (!base || !token) {\r\n      toast({\r\n        title: 'Validierung fehlgeschlagen',\r\n        description: 'Bitte Base-URL und Token eingeben',\r\n        variant: 'destructive',\r\n      })\r\n      return\r\n    }\r\n\r\n    setLoading(true)\r\n    try {\r\n      const r = await fetch('/api/admin/dms/bootstrap', {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({ base, token }),\r\n      })\r\n      const j: BootstrapResult = await r.json()\r\n      \r\n      if (j.ok) {\r\n        toast({\r\n          title: 'Ô£à Mayan-DMS integriert',\r\n          description: `${j.document_types} DocTypes, ${j.metadata_types} Metadata, ${j.created} Bindings`,\r\n        })\r\n        setOpen(false)\r\n        loadStatus()  // Reload status\r\n      } else {\r\n        toast({\r\n          title: 'ÔØî Bootstrap-Fehler',\r\n          description: j.message ?? 'Bitte Logs pr├╝fen',\r\n          variant: 'destructive',\r\n        })\r\n      }\r\n    } catch (e) {\r\n      toast({\r\n        title: 'Bootstrap-Fehler',\r\n        description: e instanceof Error ? e.message : 'Unbekannter Fehler',\r\n        variant: 'destructive',\r\n      })\r\n    } finally {\r\n      setLoading(false)\r\n    }\r\n  }\r\n\r\n  return (\r\n    <Card className=\"p-6 space-y-4\">\r\n      <CardHeader className=\"p-0\">\r\n        <div className=\"flex items-start justify-between\">\r\n          <div className=\"space-y-1\">\r\n            <CardTitle className=\"text-xl\">Mayan-DMS integrieren</CardTitle>\r\n            <CardDescription>\r\n              Zentrale Dokumentenablage mit OCR, Versionierung & Volltext. \r\n              Wird nahtlos mit VALEO NeuroERP verbunden.\r\n            </CardDescription>\r\n          </div>\r\n          {status?.configured && (\r\n            <Badge variant=\"default\" className=\"bg-green-600\">\r\n              <CheckCircle2 className=\"h-3 w-3 mr-1\" />\r\n              Verbunden\r\n            </Badge>\r\n          )}\r\n        </div>\r\n      </CardHeader>\r\n\r\n      <CardContent className=\"p-0 space-y-4\">\r\n        {status?.configured ? (\r\n          <div className=\"space-y-3\">\r\n            <div className=\"flex items-center gap-2 text-sm text-muted-foreground\">\r\n              <span>Base-URL:</span>\r\n              <code className=\"bg-gray-100 px-2 py-1 rounded text-xs\">{status.base}</code>\r\n            </div>\r\n            <div className=\"flex items-center gap-2 text-sm text-muted-foreground\">\r\n              <span>Document Types:</span>\r\n              <Badge variant=\"outline\">{status.document_types}</Badge>\r\n            </div>\r\n            <div className=\"flex items-center gap-2 text-sm text-muted-foreground\">\r\n              <span>Metadata Types:</span>\r\n              <Badge variant=\"outline\">{status.metadata_types}</Badge>\r\n            </div>\r\n            <div className=\"flex gap-2 pt-2\">\r\n              <Button\r\n                variant=\"outline\"\r\n                onClick={() => window.open(status.base, '_blank')}\r\n              >\r\n                <ExternalLink className=\"h-4 w-4 mr-2\" />\r\n                Im DMS ├Âffnen\r\n              </Button>\r\n              <Button\r\n                variant=\"outline\"\r\n                onClick={() => setOpen(true)}\r\n              >\r\n                Neu konfigurieren\r\n              </Button>\r\n            </div>\r\n          </div>\r\n        ) : (\r\n          <Dialog open={open} onOpenChange={setOpen}>\r\n            <DialogTrigger asChild>\r\n              <Button>Jetzt einrichten</Button>\r\n            </DialogTrigger>\r\n            <DialogContent className=\"sm:max-w-[560px]\">\r\n              <DialogHeader>\r\n                <DialogTitle>Mayan-DMS verbinden</DialogTitle>\r\n              </DialogHeader>\r\n              \r\n              <div className=\"grid gap-4 py-4\">\r\n                <div className=\"grid gap-2\">\r\n                  <Label htmlFor=\"base\">DMS-Basis-URL</Label>\r\n                  <Input\r\n                    id=\"base\"\r\n                    value={base}\r\n                    onChange={(e) => setBase(e.target.value)}\r\n                    placeholder=\"http://localhost:8010\"\r\n                    disabled={loading}\r\n                  />\r\n                  <p className=\"text-xs text-muted-foreground\">\r\n                    URL zu Ihrer Mayan-DMS-Instanz (inkl. http:// oder https://)\r\n                  </p>\r\n                </div>\r\n                \r\n                <div className=\"grid gap-2\">\r\n                  <Label htmlFor=\"token\">API-Token</Label>\r\n                  <Input\r\n                    id=\"token\"\r\n                    type=\"password\"\r\n                    value={token}\r\n                    onChange={(e) => setToken(e.target.value)}\r\n                    placeholder=\"Token aus Mayan-Admin-Panel\"\r\n                    disabled={loading}\r\n                  />\r\n                  <p className=\"text-xs text-muted-foreground\">\r\n                    Erstellen Sie einen API-Token in Mayan unter: Einstellungen ÔåÆ API-Token\r\n                  </p>\r\n                </div>\r\n\r\n                {tested !== 'idle' && (\r\n                  <div className={`p-3 rounded-lg ${tested === 'ok' ? 'bg-green-50 border border-green-200' : 'bg-red-50 border border-red-200'}`}>\r\n                    <p className={`text-sm font-medium ${tested === 'ok' ? 'text-green-900' : 'text-red-900'}`}>\r\n                      {tested === 'ok' ? 'Ô£à Verbindung erfolgreich getestet' : 'ÔØî Verbindung fehlgeschlagen'}\r\n                    </p>\r\n                  </div>\r\n                )}\r\n              </div>\r\n\r\n              <DialogFooter className=\"gap-2\">\r\n                <Button\r\n                  type=\"button\"\r\n                  variant=\"secondary\"\r\n                  onClick={testConnection}\r\n                  disabled={loading || !token || !base}\r\n                >\r\n                  {loading ? (\r\n                    <>\r\n                      <Loader2 className=\"h-4 w-4 mr-2 animate-spin\" />\r\n                      Teste...\r\n                    </>\r\n                  ) : (\r\n                    <>\r\n                      Verbindung testen\r\n                      {tested === 'ok' && ' Ô£à'}\r\n                      {tested === 'fail' && ' ÔØî'}\r\n                    </>\r\n                  )}\r\n                </Button>\r\n                \r\n                <Button\r\n                  type=\"button\"\r\n                  onClick={bootstrap}\r\n                  disabled={loading || !token || !base || tested !== 'ok'}\r\n                >\r\n                  {loading ? (\r\n                    <>\r\n                      <Loader2 className=\"h-4 w-4 mr-2 animate-spin\" />\r\n                      Einrichten...\r\n                    </>\r\n                  ) : (\r\n                    'Einrichten'\r\n                  )}\r\n                </Button>\r\n              </DialogFooter>\r\n            </DialogContent>\r\n          </Dialog>\r\n        )}\r\n      </CardContent>\r\n    </Card>\r\n  )\r\n}\r\n\r\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\Jochen\\VALEO-NeuroERP-3.0\\packages\\frontend-web\\src\\pages\\admin\\setup\\index.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":3,"column":16,"nodeType":"FunctionDeclaration","messageId":"missingReturnType","endLine":3,"endColumn":39},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":3,"column":16,"nodeType":"FunctionDeclaration","messageId":"missingReturnType","endLine":3,"endColumn":39}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import DmsIntegrationCard from './dms-integration'\r\n\r\nexport default function AdminSetupPage() {\r\n  return (\r\n    <div className=\"container mx-auto py-8 space-y-6\">\r\n      <div className=\"space-y-2\">\r\n        <h1 className=\"text-3xl font-bold\">Ersteinrichtung</h1>\r\n        <p className=\"text-muted-foreground\">\r\n          Konfigurieren Sie die wichtigsten Integrationen f├╝r VALEO NeuroERP\r\n        </p>\r\n      </div>\r\n\r\n      <div className=\"grid gap-6\">\r\n        {/* Mayan-DMS-Integration */}\r\n        <DmsIntegrationCard />\r\n\r\n        {/* Weitere Setup-Cards k├Ânnen hier hinzugef├╝gt werden */}\r\n        {/* z.B. OIDC-Setup, SMTP-Setup, etc. */}\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\Jochen\\VALEO-NeuroERP-3.0\\packages\\frontend-web\\src\\pages\\analytics.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\Jochen\\VALEO-NeuroERP-3.0\\packages\\frontend-web\\src\\pages\\auth\\Callback.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":12,"column":16,"nodeType":"FunctionDeclaration","messageId":"missingReturnType","endLine":12,"endColumn":37},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":12,"column":16,"nodeType":"FunctionDeclaration","messageId":"missingReturnType","endLine":12,"endColumn":37},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":18,"column":38,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":18,"endColumn":40},{"ruleId":"@typescript-eslint/strict-boolean-expressions","severity":1,"message":"Unexpected nullable string value in conditional. Please handle the nullish/empty cases explicitly.","line":24,"column":11,"nodeType":"Identifier","messageId":"conditionErrorNullableString","endLine":24,"endColumn":21,"suggestions":[{"messageId":"conditionFixCompareNullish","fix":{"range":[799,809],"text":"errorParam != null"},"desc":"Change condition to check for null/undefined (`value != null`)"},{"messageId":"conditionFixDefaultEmptyString","fix":{"range":[799,809],"text":"errorParam ?? \"\""},"desc":"Explicitly treat nullish value the same as an empty string (`value ?? \"\"`)"},{"messageId":"conditionFixCastBoolean","fix":{"range":[799,809],"text":"Boolean(errorParam)"},"desc":"Explicitly cast value to a boolean (`Boolean(value)`)"}]},{"ruleId":"@typescript-eslint/strict-boolean-expressions","severity":1,"message":"Unexpected nullable string value in conditional. Please handle the nullish/empty cases explicitly.","line":30,"column":12,"nodeType":"Identifier","messageId":"conditionErrorNullableString","endLine":30,"endColumn":16,"suggestions":[{"messageId":"conditionFixCompareNullish","fix":{"range":[939,944],"text":"(code == null)"},"desc":"Change condition to check for null/undefined (`value != null`)"},{"messageId":"conditionFixDefaultEmptyString","fix":{"range":[940,944],"text":"(code ?? \"\")"},"desc":"Explicitly treat nullish value the same as an empty string (`value ?? \"\"`)"},{"messageId":"conditionFixCastBoolean","fix":{"range":[939,944],"text":"(!Boolean(code))"},"desc":"Explicitly cast value to a boolean (`Boolean(value)`)"}]},{"ruleId":"@typescript-eslint/strict-boolean-expressions","severity":1,"message":"Unexpected nullable string value in conditional. Please handle the nullish/empty cases explicitly.","line":30,"column":21,"nodeType":"Identifier","messageId":"conditionErrorNullableString","endLine":30,"endColumn":26,"suggestions":[{"messageId":"conditionFixCompareNullish","fix":{"range":[948,954],"text":"(state == null)"},"desc":"Change condition to check for null/undefined (`value != null`)"},{"messageId":"conditionFixDefaultEmptyString","fix":{"range":[949,954],"text":"(state ?? \"\")"},"desc":"Explicitly treat nullish value the same as an empty string (`value ?? \"\"`)"},{"messageId":"conditionFixCastBoolean","fix":{"range":[948,954],"text":"(!Boolean(state))"},"desc":"Explicitly cast value to a boolean (`Boolean(value)`)"}]},{"ruleId":"@typescript-eslint/strict-boolean-expressions","severity":1,"message":"Unexpected nullable string value in conditional. Please handle the nullish/empty cases explicitly.","line":46,"column":7,"nodeType":"Identifier","messageId":"conditionErrorNullableString","endLine":46,"endColumn":12,"suggestions":[{"messageId":"conditionFixCompareNullish","fix":{"range":[1318,1323],"text":"error != null"},"desc":"Change condition to check for null/undefined (`value != null`)"},{"messageId":"conditionFixDefaultEmptyString","fix":{"range":[1318,1323],"text":"error ?? \"\""},"desc":"Explicitly treat nullish value the same as an empty string (`value ?? \"\"`)"},{"messageId":"conditionFixCastBoolean","fix":{"range":[1318,1323],"text":"Boolean(error)"},"desc":"Explicitly cast value to a boolean (`Boolean(value)`)"}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":7,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * OIDC Callback Page\r\n * Handles redirect from OIDC provider\r\n */\r\n\r\nimport { useEffect, useState } from 'react'\r\nimport { useSearchParams } from 'react-router-dom'\r\nimport { useAuth } from '@/hooks/useAuth'\r\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card'\r\nimport { Loader2, XCircle } from 'lucide-react'\r\n\r\nexport default function CallbackPage() {\r\n  const [searchParams] = useSearchParams()\r\n  const { handleCallback } = useAuth()\r\n  const [error, setError] = useState<string | null>(null)\r\n\r\n  useEffect(() => {\r\n    const processCallback = async () => {\r\n      const code = searchParams.get('code')\r\n      const state = searchParams.get('state')\r\n      const errorParam = searchParams.get('error')\r\n\r\n      // Check for error from OIDC provider\r\n      if (errorParam) {\r\n        setError(`Authentication failed: ${errorParam}`)\r\n        return\r\n      }\r\n\r\n      // Validate parameters\r\n      if (!code || !state) {\r\n        setError('Missing code or state parameter')\r\n        return\r\n      }\r\n\r\n      try {\r\n        await handleCallback(code, state)\r\n        // Will redirect to dashboard\r\n      } catch (e) {\r\n        setError(e instanceof Error ? e.message : 'Authentication failed')\r\n      }\r\n    }\r\n\r\n    processCallback()\r\n  }, [searchParams, handleCallback])\r\n\r\n  if (error) {\r\n    return (\r\n      <div className=\"flex items-center justify-center min-h-screen bg-gray-50\">\r\n        <Card className=\"w-full max-w-md border-red-200\">\r\n          <CardHeader>\r\n            <div className=\"flex items-center gap-3\">\r\n              <XCircle className=\"h-8 w-8 text-red-600\" />\r\n              <CardTitle className=\"text-red-900\">Anmeldung fehlgeschlagen</CardTitle>\r\n            </div>\r\n          </CardHeader>\r\n          <CardContent>\r\n            <p className=\"text-sm text-red-600\">{error}</p>\r\n            <div className=\"mt-4\">\r\n              <a href=\"/login\" className=\"text-sm text-blue-600 hover:underline\">\r\n                Zur├╝ck zur Anmeldung\r\n              </a>\r\n            </div>\r\n          </CardContent>\r\n        </Card>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <div className=\"flex items-center justify-center min-h-screen bg-gray-50\">\r\n      <Card className=\"w-full max-w-md\">\r\n        <CardContent className=\"pt-6\">\r\n          <div className=\"flex flex-col items-center gap-4\">\r\n            <Loader2 className=\"h-12 w-12 animate-spin text-blue-600\" />\r\n            <p className=\"text-gray-600\">Anmeldung wird abgeschlossen...</p>\r\n          </div>\r\n        </CardContent>\r\n      </Card>\r\n    </div>\r\n  )\r\n}\r\n\r\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\Jochen\\VALEO-NeuroERP-3.0\\packages\\frontend-web\\src\\pages\\auth\\Login.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":12,"column":16,"nodeType":"FunctionDeclaration","messageId":"missingReturnType","endLine":12,"endColumn":34},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":12,"column":16,"nodeType":"FunctionDeclaration","messageId":"missingReturnType","endLine":12,"endColumn":34},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":22,"column":32,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":22,"endColumn":34}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * Login Page\r\n * OIDC/OAuth2 Login-Flow (Production)\r\n */\r\n\r\nimport { useEffect } from 'react'\r\nimport { useAuth } from '@/hooks/useAuth'\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card'\r\nimport { Button } from '@/components/ui/button'\r\nimport { Loader2 } from 'lucide-react'\r\n\r\nexport default function LoginPage() {\r\n  const { login, loading, isAuthenticated } = useAuth()\r\n\r\n  useEffect(() => {\r\n    // Redirect if already authenticated\r\n    if (isAuthenticated) {\r\n      window.location.href = '/dashboard'\r\n    }\r\n  }, [isAuthenticated])\r\n\r\n  const handleLogin = async () => {\r\n    try {\r\n      await login()\r\n      // Will redirect to OIDC provider\r\n    } catch (e) {\r\n      console.error('Login failed:', e)\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"flex items-center justify-center min-h-screen bg-gray-50\">\r\n      <Card className=\"w-full max-w-md\">\r\n        <CardHeader className=\"text-center\">\r\n          <CardTitle className=\"text-2xl\">VALEO NeuroERP</CardTitle>\r\n          <CardDescription>\r\n            Melden Sie sich mit Ihrem Unternehmens-Account an\r\n          </CardDescription>\r\n        </CardHeader>\r\n\r\n        <CardContent className=\"space-y-4\">\r\n          <Button\r\n            onClick={handleLogin}\r\n            disabled={loading}\r\n            className=\"w-full\"\r\n            size=\"lg\"\r\n          >\r\n            {loading ? (\r\n              <>\r\n                <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />\r\n                Weiterleitung...\r\n              </>\r\n            ) : (\r\n              'Mit SSO anmelden'\r\n            )}\r\n          </Button>\r\n\r\n          <div className=\"text-center text-sm text-muted-foreground\">\r\n            <p>\r\n              Sichere Anmeldung ├╝ber Ihren Identity-Provider\r\n            </p>\r\n            <p className=\"mt-2 text-xs\">\r\n              Unterst├╝tzt: Azure AD, Keycloak, Okta, Auth0\r\n            </p>\r\n          </div>\r\n        </CardContent>\r\n      </Card>\r\n    </div>\r\n  )\r\n}\r\n\r\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\Jochen\\VALEO-NeuroERP-3.0\\packages\\frontend-web\\src\\pages\\contracts.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\Jochen\\VALEO-NeuroERP-3.0\\packages\\frontend-web\\src\\pages\\document.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\Jochen\\VALEO-NeuroERP-3.0\\packages\\frontend-web\\src\\pages\\inbox\\index.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Table' is defined but never used. Allowed unused vars must match /^_/u.","line":5,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":5,"endColumn":15},{"ruleId":"no-unused-vars","severity":1,"message":"'Table' is defined but never used. Allowed unused vars must match /^_/u.","line":5,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":5,"endColumn":15},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":19,"column":16,"nodeType":"FunctionDeclaration","messageId":"missingReturnType","endLine":19,"endColumn":34},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":19,"column":16,"nodeType":"FunctionDeclaration","messageId":"missingReturnType","endLine":19,"endColumn":34},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":28,"column":3,"nodeType":"FunctionDeclaration","messageId":"missingReturnType","endLine":28,"endColumn":27},{"ruleId":"@typescript-eslint/strict-boolean-expressions","severity":1,"message":"Unexpected any value in conditional. An explicit comparison or type cast is required.","line":34,"column":11,"nodeType":"MemberExpression","messageId":"conditionErrorAny","endLine":34,"endColumn":18,"suggestions":[{"messageId":"conditionFixCastBoolean","fix":{"range":[1024,1031],"text":"Boolean(data.ok)"},"desc":"Explicitly cast value to a boolean (`Boolean(value)`)"}]},{"ruleId":"@typescript-eslint/strict-boolean-expressions","severity":1,"message":"Unexpected any value in conditional. An explicit comparison or type cast is required.","line":35,"column":22,"nodeType":"MemberExpression","messageId":"conditionErrorAny","endLine":35,"endColumn":32,"suggestions":[{"messageId":"conditionFixCastBoolean","fix":{"range":[1057,1067],"text":"(Boolean(data.items))"},"desc":"Explicitly cast value to a boolean (`Boolean(value)`)"}]},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":48,"column":3,"nodeType":"FunctionDeclaration","messageId":"missingReturnType","endLine":48,"endColumn":33},{"ruleId":"@typescript-eslint/strict-boolean-expressions","severity":1,"message":"Unexpected any value in conditional. An explicit comparison or type cast is required.","line":58,"column":11,"nodeType":"MemberExpression","messageId":"conditionErrorAny","endLine":58,"endColumn":18,"suggestions":[{"messageId":"conditionFixCastBoolean","fix":{"range":[1688,1695],"text":"Boolean(data.ok)"},"desc":"Explicitly cast value to a boolean (`Boolean(value)`)"}]},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":74,"column":3,"nodeType":"FunctionDeclaration","messageId":"missingReturnType","endLine":74,"endColumn":33},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":94,"column":51,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":94,"endColumn":53},{"ruleId":"@typescript-eslint/no-magic-numbers","severity":1,"message":"No magic number: 0.8.","line":95,"column":23,"nodeType":"Literal","messageId":"noMagic","endLine":95,"endColumn":26},{"ruleId":"@typescript-eslint/no-magic-numbers","severity":1,"message":"No magic number: 0.5.","line":96,"column":23,"nodeType":"Literal","messageId":"noMagic","endLine":96,"endColumn":26}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":13,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useEffect, useState } from 'react'\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card'\r\nimport { Button } from '@/components/ui/button'\r\nimport { Badge } from '@/components/ui/badge'\r\nimport { Table } from '@/components/ui/table'\r\nimport { useToast } from '@/hooks/use-toast'\r\nimport { CheckCircle2, ExternalLink, FileText, XCircle } from 'lucide-react'\r\n\r\ninterface InboxDocument {\r\n  id: string\r\n  dms_document_id: number\r\n  dms_url: string\r\n  ocr_text: string\r\n  parsed_fields: Record<string, string>\r\n  confidence: number\r\n  status: string\r\n}\r\n\r\nexport default function InboxPage() {\r\n  const { toast } = useToast()\r\n  const [documents, setDocuments] = useState<InboxDocument[]>([])\r\n  const [loading, setLoading] = useState(true)\r\n\r\n  useEffect(() => {\r\n    loadInbox()\r\n  }, [])\r\n\r\n  async function loadInbox() {\r\n    try {\r\n      setLoading(true)\r\n      const response = await fetch('/api/dms/inbox')\r\n      const data = await response.json()\r\n      \r\n      if (data.ok) {\r\n        setDocuments(data.items || [])\r\n      }\r\n    } catch (e) {\r\n      toast({\r\n        title: 'Fehler beim Laden',\r\n        description: e instanceof Error ? e.message : 'Unbekannter Fehler',\r\n        variant: 'destructive',\r\n      })\r\n    } finally {\r\n      setLoading(false)\r\n    }\r\n  }\r\n\r\n  async function createFromInbox(doc: InboxDocument) {\r\n    try {\r\n      const response = await fetch(`/api/dms/inbox/${doc.id}/create`, {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({}),  // Keine Overrides\r\n      })\r\n      \r\n      const data = await response.json()\r\n      \r\n      if (data.ok) {\r\n        toast({\r\n          title: 'Ô£à Beleg erstellt',\r\n          description: `Belegnummer: ${data.number}`,\r\n        })\r\n        loadInbox()  // Reload\r\n      }\r\n    } catch (e) {\r\n      toast({\r\n        title: 'Fehler beim Erstellen',\r\n        description: e instanceof Error ? e.message : 'Unbekannter Fehler',\r\n        variant: 'destructive',\r\n      })\r\n    }\r\n  }\r\n\r\n  async function deleteFromInbox(docId: string) {\r\n    if (!confirm('Dokument wirklich verwerfen?')) return\r\n\r\n    try {\r\n      await fetch(`/api/dms/inbox/${docId}`, { method: 'DELETE' })\r\n      \r\n      toast({\r\n        title: 'Dokument verworfen',\r\n      })\r\n      \r\n      loadInbox()\r\n    } catch (e) {\r\n      toast({\r\n        title: 'Fehler beim L├Âschen',\r\n        description: e instanceof Error ? e.message : 'Unbekannter Fehler',\r\n        variant: 'destructive',\r\n      })\r\n    }\r\n  }\r\n\r\n  const getConfidenceBadge = (confidence: number) => {\r\n    if (confidence >= 0.8) return <Badge variant=\"default\">Hoch ({(confidence * 100).toFixed(0)}%)</Badge>\r\n    if (confidence >= 0.5) return <Badge variant=\"secondary\">Mittel ({(confidence * 100).toFixed(0)}%)</Badge>\r\n    return <Badge variant=\"destructive\">Niedrig ({(confidence * 100).toFixed(0)}%)</Badge>\r\n  }\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"container mx-auto py-8\">\r\n        <p className=\"text-center text-muted-foreground\">L├ñdt...</p>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  if (documents.length === 0) {\r\n    return (\r\n      <div className=\"container mx-auto py-8\">\r\n        <Card>\r\n          <CardHeader>\r\n            <CardTitle>Posteingang (DMS)</CardTitle>\r\n            <CardDescription>Eingehende Dokumente zur Verarbeitung</CardDescription>\r\n          </CardHeader>\r\n          <CardContent>\r\n            <div className=\"text-center py-12 text-muted-foreground\">\r\n              <FileText className=\"h-12 w-12 mx-auto mb-4 opacity-50\" />\r\n              <p>Keine eingehenden Dokumente</p>\r\n              <p className=\"text-sm mt-2\">\r\n                Dokumente werden automatisch angezeigt wenn sie im DMS hochgeladen werden\r\n              </p>\r\n            </div>\r\n          </CardContent>\r\n        </Card>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <div className=\"container mx-auto py-8 space-y-6\">\r\n      <div>\r\n        <h1 className=\"text-3xl font-bold\">Posteingang (DMS)</h1>\r\n        <p className=\"text-muted-foreground\">\r\n          Eingehende Dokumente zur Verarbeitung ({documents.length})\r\n        </p>\r\n      </div>\r\n\r\n      <div className=\"grid gap-4\">\r\n        {documents.map((doc) => (\r\n          <Card key={doc.id}>\r\n            <CardHeader>\r\n              <div className=\"flex items-start justify-between\">\r\n                <div className=\"space-y-1\">\r\n                  <CardTitle className=\"text-lg\">\r\n                    {doc.parsed_fields.invoice_number || doc.id}\r\n                  </CardTitle>\r\n                  <CardDescription>\r\n                    {doc.parsed_fields.supplier || 'Unbekannter Lieferant'}\r\n                  </CardDescription>\r\n                </div>\r\n                {getConfidenceBadge(doc.confidence)}\r\n              </div>\r\n            </CardHeader>\r\n\r\n            <CardContent className=\"space-y-4\">\r\n              <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4\">\r\n                {doc.parsed_fields.date && (\r\n                  <div>\r\n                    <p className=\"text-sm font-medium text-gray-500\">Datum</p>\r\n                    <p className=\"text-base\">{doc.parsed_fields.date}</p>\r\n                  </div>\r\n                )}\r\n                {doc.parsed_fields.total && (\r\n                  <div>\r\n                    <p className=\"text-sm font-medium text-gray-500\">Betrag</p>\r\n                    <p className=\"text-base font-semibold\">{doc.parsed_fields.total} Ôé¼</p>\r\n                  </div>\r\n                )}\r\n                {doc.parsed_fields.supplier_id && (\r\n                  <div>\r\n                    <p className=\"text-sm font-medium text-gray-500\">Lieferanten-ID</p>\r\n                    <p className=\"text-base\">{doc.parsed_fields.supplier_id}</p>\r\n                  </div>\r\n                )}\r\n                {doc.parsed_fields.domain && (\r\n                  <div>\r\n                    <p className=\"text-sm font-medium text-gray-500\">Domain</p>\r\n                    <Badge variant=\"outline\">{doc.parsed_fields.domain}</Badge>\r\n                  </div>\r\n                )}\r\n              </div>\r\n\r\n              <div className=\"flex gap-2 pt-2\">\r\n                <Button\r\n                  variant=\"default\"\r\n                  onClick={() => createFromInbox(doc)}\r\n                >\r\n                  <CheckCircle2 className=\"h-4 w-4 mr-2\" />\r\n                  Beleg erstellen\r\n                </Button>\r\n                \r\n                <Button\r\n                  variant=\"outline\"\r\n                  onClick={() => window.open(doc.dms_url, '_blank')}\r\n                >\r\n                  <ExternalLink className=\"h-4 w-4 mr-2\" />\r\n                  Im DMS ├Âffnen\r\n                </Button>\r\n                \r\n                <Button\r\n                  variant=\"destructive\"\r\n                  onClick={() => deleteFromInbox(doc.id)}\r\n                >\r\n                  <XCircle className=\"h-4 w-4 mr-2\" />\r\n                  Verwerfen\r\n                </Button>\r\n              </div>\r\n            </CardContent>\r\n          </Card>\r\n        ))}\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\Jochen\\VALEO-NeuroERP-3.0\\packages\\frontend-web\\src\\pages\\inventory.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\Jochen\\VALEO-NeuroERP-3.0\\packages\\frontend-web\\src\\pages\\policy-manager.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\Jochen\\VALEO-NeuroERP-3.0\\packages\\frontend-web\\src\\pages\\pricing.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\Jochen\\VALEO-NeuroERP-3.0\\packages\\frontend-web\\src\\pages\\public\\verify.tsx","messages":[{"ruleId":"@typescript-eslint/strict-boolean-expressions","severity":1,"message":"Unexpected nullable string value in conditional. Please handle the nullish/empty cases explicitly.","line":29,"column":21,"nodeType":"Identifier","messageId":"conditionErrorNullableString","endLine":29,"endColumn":25,"suggestions":[{"messageId":"conditionFixCompareNullish","fix":{"range":[941,945],"text":"(hash != null)"},"desc":"Change condition to check for null/undefined (`value != null`)"},{"messageId":"conditionFixDefaultEmptyString","fix":{"range":[941,945],"text":"(hash ?? \"\")"},"desc":"Explicitly treat nullish value the same as an empty string (`value ?? \"\"`)"},{"messageId":"conditionFixCastBoolean","fix":{"range":[941,945],"text":"(Boolean(hash))"},"desc":"Explicitly cast value to a boolean (`Boolean(value)`)"}]},{"ruleId":"@typescript-eslint/strict-boolean-expressions","severity":1,"message":"Unexpected any value in conditional. An explicit comparison or type cast is required.","line":37,"column":27,"nodeType":"MemberExpression","messageId":"conditionErrorAny","endLine":37,"endColumn":38,"suggestions":[{"messageId":"conditionFixCastBoolean","fix":{"range":[1187,1198],"text":"(Boolean(data.detail))"},"desc":"Explicitly cast value to a boolean (`Boolean(value)`)"}]},{"ruleId":"@typescript-eslint/strict-boolean-expressions","severity":1,"message":"Unexpected nullable string value in conditional. Please handle the nullish/empty cases explicitly.","line":48,"column":9,"nodeType":"Identifier","messageId":"conditionErrorNullableString","endLine":48,"endColumn":15,"suggestions":[{"messageId":"conditionFixCompareNullish","fix":{"range":[1431,1437],"text":"(domain != null)"},"desc":"Change condition to check for null/undefined (`value != null`)"},{"messageId":"conditionFixDefaultEmptyString","fix":{"range":[1431,1437],"text":"(domain ?? \"\")"},"desc":"Explicitly treat nullish value the same as an empty string (`value ?? \"\"`)"},{"messageId":"conditionFixCastBoolean","fix":{"range":[1431,1437],"text":"(Boolean(domain))"},"desc":"Explicitly cast value to a boolean (`Boolean(value)`)"}]},{"ruleId":"@typescript-eslint/strict-boolean-expressions","severity":1,"message":"Unexpected nullable string value in conditional. Please handle the nullish/empty cases explicitly.","line":48,"column":19,"nodeType":"Identifier","messageId":"conditionErrorNullableString","endLine":48,"endColumn":25,"suggestions":[{"messageId":"conditionFixCompareNullish","fix":{"range":[1441,1447],"text":"(number != null)"},"desc":"Change condition to check for null/undefined (`value != null`)"},{"messageId":"conditionFixDefaultEmptyString","fix":{"range":[1441,1447],"text":"(number ?? \"\")"},"desc":"Explicitly treat nullish value the same as an empty string (`value ?? \"\"`)"},{"messageId":"conditionFixCastBoolean","fix":{"range":[1441,1447],"text":"(Boolean(number))"},"desc":"Explicitly cast value to a boolean (`Boolean(value)`)"}]},{"ruleId":"@typescript-eslint/strict-boolean-expressions","severity":1,"message":"Unexpected nullable string value in conditional. Please handle the nullish/empty cases explicitly.","line":163,"column":12,"nodeType":"Identifier","messageId":"conditionErrorNullableString","endLine":163,"endColumn":16,"suggestions":[{"messageId":"conditionFixCompareNullish","fix":{"range":[5565,5569],"text":"(hash != null)"},"desc":"Change condition to check for null/undefined (`value != null`)"},{"messageId":"conditionFixDefaultEmptyString","fix":{"range":[5565,5569],"text":"(hash ?? \"\")"},"desc":"Explicitly treat nullish value the same as an empty string (`value ?? \"\"`)"},{"messageId":"conditionFixCastBoolean","fix":{"range":[5565,5569],"text":"(Boolean(hash))"},"desc":"Explicitly cast value to a boolean (`Boolean(value)`)"}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useEffect, useState } from 'react'\nimport { useParams } from 'react-router-dom'\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card'\nimport { Badge } from '@/components/ui/badge'\nimport { AlertCircle, CheckCircle2, Loader2, XCircle } from 'lucide-react'\n\r\ntype VerificationResult = {\r\n  valid: boolean\r\n  domain: string\r\n  number: string\r\n  status: string\r\n  date: string\r\n  hash: string\r\n  message: string\r\n}\r\n\r\nexport default function VerifyPage(): JSX.Element {\n  const { domain, number, hash } = useParams<{ domain: string; number: string; hash?: string }>()\n  const [result, setResult] = useState<VerificationResult | null>(null)\n  const [loading, setLoading] = useState(true)\n  const [error, setError] = useState<string | null>(null)\n\r\nuseEffect(() => {\n  async function verify(): Promise<void> {\n      try {\r\n        setLoading(true)\r\n        setError(null)\r\n\r\n        const url = hash\r\n          ? `/verify/${domain}/${number}/${hash}`\r\n          : `/verify/${domain}/${number}`\r\n\r\n        const response = await fetch(url)\r\n        const data = await response.json()\r\n\r\n        if (!response.ok) {\r\n          throw new Error(data.detail || 'Verification failed')\r\n        }\r\n\r\n        setResult(data)\r\n      } catch (err) {\r\n        setError(err instanceof Error ? err.message : 'Unknown error')\r\n      } finally {\r\n        setLoading(false)\r\n      }\r\n    }\r\n\r\n    if (domain && number) {\r\n      verify()\r\n    }\r\n  }, [domain, number, hash])\n\nconst getStatusBadge = (status: string): JSX.Element => {\n    const variants: Record<string, 'default' | 'secondary' | 'destructive' | 'outline'> = {\r\n      posted: 'default',\r\n      approved: 'secondary',\r\n      pending: 'outline',\r\n      rejected: 'destructive',\r\n      unknown: 'destructive',\r\n    }\r\n  return <Badge variant={variants[status] ?? 'outline'}>{status.toUpperCase()}</Badge>\n}\n\nconst getDomainLabel = (domain: string): string => {\n    const labels: Record<string, string> = {\r\n      sales: 'Sales Order',\r\n      purchase: 'Purchase Order',\r\n      invoice: 'Invoice',\r\n      delivery: 'Delivery Note',\r\n    }\r\n    return labels[domain] || domain\r\n  }\r\n\r\n  if (loading) {\n    return (\r\n      <div className=\"min-h-screen flex items-center justify-center bg-gray-50\">\r\n        <Card className=\"w-full max-w-md\">\r\n          <CardContent className=\"pt-6\">\r\n            <div className=\"flex flex-col items-center gap-4\">\r\n              <Loader2 className=\"h-12 w-12 animate-spin text-blue-600\" />\r\n              <p className=\"text-gray-600\">Verifying document...</p>\r\n            </div>\r\n          </CardContent>\r\n        </Card>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  if (error !== null) {\n    return (\r\n      <div className=\"min-h-screen flex items-center justify-center bg-gray-50\">\r\n        <Card className=\"w-full max-w-md border-red-200\">\r\n          <CardHeader>\r\n            <div className=\"flex items-center gap-3\">\r\n              <XCircle className=\"h-8 w-8 text-red-600\" />\r\n              <div>\r\n                <CardTitle className=\"text-red-900\">Verification Failed</CardTitle>\r\n                <CardDescription className=\"text-red-600\">{error}</CardDescription>\r\n              </div>\r\n            </div>\r\n          </CardHeader>\r\n        </Card>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  if (result == null) {\n    return (\r\n      <div className=\"min-h-screen flex items-center justify-center bg-gray-50\">\r\n        <Card className=\"w-full max-w-md\">\r\n          <CardHeader>\r\n            <CardTitle>No Document Specified</CardTitle>\r\n            <CardDescription>Please scan a valid QR code</CardDescription>\r\n          </CardHeader>\r\n        </Card>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  const isValid = result.valid === true && result.status !== 'unknown'\n\r\n  return (\r\n    <div className=\"min-h-screen flex items-center justify-center bg-gray-50 p-4\">\r\n      <Card className={`w-full max-w-md ${isValid ? 'border-green-200' : 'border-yellow-200'}`}>\r\n        <CardHeader>\r\n          <div className=\"flex items-center gap-3\">\r\n            {isValid ? (\r\n              <CheckCircle2 className=\"h-10 w-10 text-green-600\" />\r\n            ) : (\r\n              <AlertCircle className=\"h-10 w-10 text-yellow-600\" />\r\n            )}\r\n            <div>\r\n              <CardTitle className={isValid ? 'text-green-900' : 'text-yellow-900'}>\r\n                {isValid ? 'Document Valid' : 'Document Not Verified'}\r\n              </CardTitle>\r\n              <CardDescription className={isValid ? 'text-green-600' : 'text-yellow-600'}>\r\n                {result.message}\r\n              </CardDescription>\r\n            </div>\r\n          </div>\r\n        </CardHeader>\r\n\r\n        <CardContent className=\"space-y-4\">\r\n          <div className=\"grid grid-cols-2 gap-4\">\r\n            <div>\r\n              <p className=\"text-sm font-medium text-gray-500\">Document Type</p>\r\n              <p className=\"text-base font-semibold\">{getDomainLabel(result.domain)}</p>\r\n            </div>\r\n            <div>\r\n              <p className=\"text-sm font-medium text-gray-500\">Document Number</p>\r\n              <p className=\"text-base font-semibold\">{result.number}</p>\r\n            </div>\r\n            <div>\r\n              <p className=\"text-sm font-medium text-gray-500\">Status</p>\r\n              <div className=\"mt-1\">{getStatusBadge(result.status)}</div>\r\n            </div>\r\n            <div>\r\n              <p className=\"text-sm font-medium text-gray-500\">Date</p>\r\n              <p className=\"text-base font-semibold\">{result.date}</p>\r\n            </div>\r\n          </div>\r\n\r\n          {hash && (\r\n            <div className=\"pt-4 border-t\">\r\n              <p className=\"text-sm font-medium text-gray-500 mb-2\">Verification Hash</p>\r\n              <code className=\"text-xs bg-gray-100 p-2 rounded block break-all font-mono\">\r\n                {result.hash}\r\n              </code>\r\n            </div>\r\n          )}\r\n\r\n          <div className=\"pt-4 border-t\">\r\n            <p className=\"text-xs text-gray-500 text-center\">\r\n              This document was verified against VALEO-NeuroERP records.\r\n              <br />\r\n              For questions, contact: support@valeo-erp.com\r\n            </p>\r\n          </div>\r\n        </CardContent>\r\n      </Card>\r\n    </div>\r\n  )\r\n}\r\n\r\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\Jochen\\VALEO-NeuroERP-3.0\\packages\\frontend-web\\src\\pages\\sales.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\Jochen\\VALEO-NeuroERP-3.0\\packages\\frontend-web\\src\\pages\\sales\\delivery-editor.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\Jochen\\VALEO-NeuroERP-3.0\\packages\\frontend-web\\src\\pages\\sales\\invoice-editor.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\Jochen\\VALEO-NeuroERP-3.0\\packages\\frontend-web\\src\\pages\\sales\\order-editor.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\Jochen\\VALEO-NeuroERP-3.0\\packages\\frontend-web\\src\\pages\\sales\\orders-modern.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\Jochen\\VALEO-NeuroERP-3.0\\packages\\frontend-web\\src\\pages\\system\\live-monitor.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\Jochen\\VALEO-NeuroERP-3.0\\packages\\frontend-web\\src\\pages\\weighing.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\Jochen\\VALEO-NeuroERP-3.0\\packages\\frontend-web\\src\\policy\\PolicyBadge.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\Jochen\\VALEO-NeuroERP-3.0\\packages\\frontend-web\\src\\policy\\audit.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\Jochen\\VALEO-NeuroERP-3.0\\packages\\frontend-web\\src\\policy\\engine.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\Jochen\\VALEO-NeuroERP-3.0\\packages\\frontend-web\\src\\policy\\schema.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\Jochen\\VALEO-NeuroERP-3.0\\packages\\frontend-web\\src\\state\\live.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\Jochen\\VALEO-NeuroERP-3.0\\packages\\frontend-web\\src\\stories\\Button.stories.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\Jochen\\VALEO-NeuroERP-3.0\\packages\\frontend-web\\src\\stories\\Button.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":25,"column":17,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":25,"endColumn":19},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":25,"column":17,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":25,"endColumn":19}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\n\nimport './button.css';\n\nexport interface ButtonProps {\n  /** Is this the principal call to action on the page? */\n  primary?: boolean;\n  /** What background color to use */\n  backgroundColor?: string;\n  /** How large should the button be? */\n  size?: 'small' | 'medium' | 'large';\n  /** Button contents */\n  label: string;\n  /** Optional click handler */\n  onClick?: () => void;\n}\n\n/** Primary UI component for user interaction */\nexport const Button = ({\n  primary = false,\n  size = 'medium',\n  backgroundColor,\n  label,\n  ...props\n}: ButtonProps) => {\n  const mode = primary ? 'storybook-button--primary' : 'storybook-button--secondary';\n  return (\n    <button\n      type=\"button\"\n      className={['storybook-button', `storybook-button--${size}`, mode].join(' ')}\n      style={{ backgroundColor }}\n      {...props}\n    >\n      {label}\n    </button>\n  );\n};\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\Jochen\\VALEO-NeuroERP-3.0\\packages\\frontend-web\\src\\stories\\Header.stories.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\Jochen\\VALEO-NeuroERP-3.0\\packages\\frontend-web\\src\\stories\\Header.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":17,"column":83,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":17,"endColumn":85},{"ruleId":"@typescript-eslint/explicit-function-return-type","severity":1,"message":"Missing return type on function.","line":17,"column":83,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":17,"endColumn":85}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\n\nimport { Button } from './Button';\nimport './header.css';\n\ntype User = {\n  name: string;\n};\n\nexport interface HeaderProps {\n  user?: User;\n  onLogin?: () => void;\n  onLogout?: () => void;\n  onCreateAccount?: () => void;\n}\n\nexport const Header = ({ user, onLogin, onLogout, onCreateAccount }: HeaderProps) => (\n  <header>\n    <div className=\"storybook-header\">\n      <div>\n        <svg width=\"32\" height=\"32\" viewBox=\"0 0 32 32\" xmlns=\"http://www.w3.org/2000/svg\">\n          <g fill=\"none\" fillRule=\"evenodd\">\n            <path\n              d=\"M10 0h12a10 10 0 0110 10v12a10 10 0 01-10 10H10A10 10 0 010 22V10A10 10 0 0110 0z\"\n              fill=\"#FFF\"\n            />\n            <path\n              d=\"M5.3 10.6l10.4 6v11.1l-10.4-6v-11zm11.4-6.2l9.7 5.5-9.7 5.6V4.4z\"\n              fill=\"#555AB9\"\n            />\n            <path\n              d=\"M27.2 10.6v11.2l-10.5 6V16.5l10.5-6zM15.7 4.4v11L6 10l9.7-5.5z\"\n              fill=\"#91BAF8\"\n            />\n          </g>\n        </svg>\n        <h1>Acme</h1>\n      </div>\n      <div>\n        {user ? (\n          <>\n            <span className=\"welcome\">\n              Welcome, <b>{user.name}</b>!\n            </span>\n            <Button size=\"small\" onClick={onLogout} label=\"Log out\" />\n          </>\n        ) : (\n          <>\n            <Button size=\"small\" onClick={onLogin} label=\"Log in\" />\n            <Button primary size=\"small\" onClick={onCreateAccount} label=\"Sign up\" />\n          </>\n        )}\n      </div>\n    </div>\n  </header>\n);\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\Jochen\\VALEO-NeuroERP-3.0\\packages\\frontend-web\\src\\stories\\Page.stories.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\Jochen\\VALEO-NeuroERP-3.0\\packages\\frontend-web\\src\\stories\\Page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]}]
C:\Users\Jochen\VALEO-NeuroERP-3.0\packages\frontend-web:
ÔÇëERR_PNPM_RECURSIVE_RUN_FIRST_FAILÔÇë @valero-neuroerp/frontend-web@0.1.0 lint: `eslint . --ext ts,tsx --report-unused-disable-directives --max-warnings 0 "--format" "json"`
Exit status 1
